/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={466:function(t){var e;t.exports=((e=function(){function t(t){return r.appendChild(t.dom),t}function n(t){for(var e=0;e<r.children.length;e++)r.children[e].style.display=e===t?"block":"none";i=t}var i=0,r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",r.addEventListener("click",(function(t){t.preventDefault(),n(++i%r.children.length)}),!1);var s=(performance||Date).now(),o=s,a=0,l=t(new e.Panel("FPS","#0ff","#002")),c=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var p=t(new e.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:r,addPanel:t,showPanel:n,begin:function(){s=(performance||Date).now()},end:function(){a++;var t=(performance||Date).now();if(c.update(t-s,200),t>o+1e3&&(l.update(1e3*a/(t-o),100),o=t,a=0,p)){var e=performance.memory;p.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){s=this.end()},domElement:r,setMode:n}}).Panel=function(t,e,n){var i=1/0,r=0,s=Math.round,o=s(window.devicePixelRatio||1),a=80*o,l=48*o,c=3*o,p=2*o,u=3*o,h=15*o,d=74*o,v=30*o,m=document.createElement("canvas");m.width=a,m.height=l,m.style.cssText="width:80px;height:48px";var f=m.getContext("2d");return f.font="bold "+9*o+"px Helvetica,Arial,sans-serif",f.textBaseline="top",f.fillStyle=n,f.fillRect(0,0,a,l),f.fillStyle=e,f.fillText(t,c,p),f.fillRect(u,h,d,v),f.fillStyle=n,f.globalAlpha=.9,f.fillRect(u,h,d,v),{dom:m,update:function(l,g){i=Math.min(i,l),r=Math.max(r,l),f.fillStyle=n,f.globalAlpha=1,f.fillRect(0,0,a,h),f.fillStyle=e,f.fillText(s(l)+" "+t+" ("+s(i)+"-"+s(r)+")",c,p),f.drawImage(m,u+o,h,d-o,v,u,h,d-o,v),f.fillRect(u+d-o,h,o,v),f.fillStyle=n,f.globalAlpha=.9,f.fillRect(u+d-o,h,o,s((1-l/g)*v))}}},e)},498:function(t,e){!function(t){"use strict";class e{constructor(t){this.controller_=t}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(t){this.controller_.viewProps.set("hidden",t)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class n{constructor(t){this.target=t}}class i extends n{constructor(t,e,n,i){super(t),this.value=e,this.presetKey=n,this.last=null==i||i}}class r extends n{constructor(t,e,n){super(t),this.value=e,this.presetKey=n}}class s extends n{constructor(t,e){super(t),this.expanded=e}}function o(t){return null==t}function a(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const l={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class c{constructor(t){var e;this.message=null!==(e=l[t.type](t.context))&&void 0!==e?e:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}static alreadyDisposed(){return new c({type:"alreadydisposed"})}static notBindable(){return new c({type:"notbindable"})}static propertyNotFound(t){return new c({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new c({type:"shouldneverhappen"})}}class p{constructor(t,e,n){this.obj_=t,this.key_=e,this.presetKey_=null!=n?n:e}static isBindable(t){return null!==t&&"object"==typeof t}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(t){this.obj_[this.key_]=t}writeProperty(t,e){const n=this.read();if(!p.isBindable(n))throw c.notBindable();if(!(t in n))throw c.propertyNotFound(t);n[t]=e}}class u extends e{get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get title(){var t;return null!==(t=this.controller_.valueController.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.valueController.props.set("title",t)}on(t,e){const i=e.bind(this);return this.controller_.valueController.emitter.on(t,(()=>{i(new n(this))})),this}}class h{constructor(){this.observers_={}}on(t,e){let n=this.observers_[t];return n||(n=this.observers_[t]=[]),n.push({handler:e}),this}off(t,e){const n=this.observers_[t];return n&&(this.observers_[t]=n.filter((t=>t.handler!==e))),this}emit(t,e){const n=this.observers_[t];n&&n.forEach((t=>{t.handler(e)}))}}const d="tp";function v(t){return(e,n)=>[d,"-",t,"v",e?`_${e}`:"",n?`-${n}`:""].join("")}function m(t){return t.rawValue}function f(t,e){var n,i;t.emitter.on("change",(n=m,i=e,t=>i(n(t)))),e(t.rawValue)}function g(t,e,n){f(t.value(e),n)}function _(t,e){return n=>{!function(t,e,n){n?t.classList.add(e):t.classList.remove(e)}(t,e,n)}}function b(t,e){f(t,(t=>{e.textContent=null!=t?t:""}))}const w=v("btn");class x{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(w()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("button");n.classList.add(w("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const i=t.createElement("div");i.classList.add(w("t")),b(e.props.value("title"),i),this.buttonElement.appendChild(i)}}class y{constructor(t,e){this.emitter=new h,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new x(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class C{constructor(t,e){var n;this.constraint_=null==e?void 0:e.constraint,this.equals_=null!==(n=null==e?void 0:e.equals)&&void 0!==n?n:(t,e)=>t===e,this.emitter=new h,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(t):t;(!this.equals_(this.rawValue_,i)||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:n,rawValue:i,sender:this}))}}class P{constructor(t){this.emitter=new h,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0};(this.value_!==t||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:n,rawValue:this.value_,sender:this}))}}function E(t,e){const n=null==e?void 0:e.constraint,i=null==e?void 0:e.equals;return n||i?new C(t,e):new P(t)}class k{constructor(t){this.emitter=new h,this.valMap_=t;for(const t in this.valMap_)this.valMap_[t].emitter.on("change",(()=>{this.emitter.emit("change",{key:t,sender:this})}))}static createCore(t){return Object.keys(t).reduce(((e,n)=>Object.assign(e,{[n]:E(t[n])})),{})}static fromObject(t){const e=this.createCore(t);return new k(e)}get(t){return this.valMap_[t].rawValue}set(t,e){this.valMap_[t].rawValue=e}value(t){return this.valMap_[t]}}function M(t){return e=>n=>{if(!e&&void 0===n)return{succeeded:!1,value:void 0};if(e&&void 0===n)return{succeeded:!0,value:void 0};const i=t(n);return void 0!==i?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function S(t){return{custom:e=>M(e)(t),boolean:M((t=>"boolean"==typeof t?t:void 0))(t),number:M((t=>"number"==typeof t?t:void 0))(t),string:M((t=>"string"==typeof t?t:void 0))(t),function:M((t=>"function"==typeof t?t:void 0))(t),constant:e=>M((t=>t===e?e:void 0))(t),raw:M((t=>t))(t),object:e=>M((t=>{if(null!==(n=t)&&"object"==typeof n)return function(t,e){return Object.keys(e).reduce(((n,i)=>{if(void 0===n)return;const r=(0,e[i])(t[i]);return r.succeeded?Object.assign(Object.assign({},n),{[i]:r.value}):void 0}),{})}(t,e);var n}))(t),array:e=>M((t=>{if(Array.isArray(t))return n=e,t.reduce(((t,e)=>{if(void 0===t)return;const i=n(e);return i.succeeded&&void 0!==i.value?[...t,i.value]:void 0}),[]);var n}))(t)}}const A={optional:S(!0),required:S(!1)};function T(t,e){const n=A.required.object(e)(t);return n.succeeded?n.value:void 0}const L=v(""),V={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class D{constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const e=this.view.element;this.blade.value("positions").emitter.on("change",(()=>{["veryfirst","first","last","verylast"].forEach((t=>{e.classList.remove(L(void 0,V[t]))})),this.blade.get("positions").forEach((t=>{e.classList.add(L(void 0,V[t]))}))})),this.viewProps.handleDispose((()=>{!function(t){t&&t.parentElement&&t.parentElement.removeChild(t)}(e)}))}get parent(){return this.parent_}}const R="http://www.w3.org/2000/svg";function z(t){t.offsetHeight}function O(t){return void 0!==t.ontouchstart}function I(){return new Function("return this")()}function F(t){return"document"in I()?t.getContext("2d"):null}const B={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function j(t,e){const n=t.createElementNS(R,"svg");return n.innerHTML=B[e],n}function N(t,e,n){t.insertBefore(e,t.children[n])}function U(t){t.parentElement&&t.parentElement.removeChild(t)}function K(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function G(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}const q=v("lbl");class Y{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(q()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(q("l")),g(e.props,"label",(e=>{o(e)?this.element.classList.add(q(void 0,"nol")):(this.element.classList.remove(q(void 0,"nol")),function(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}(n),n.appendChild(function(t,e){const n=t.createDocumentFragment();return e.split("\n").map((e=>t.createTextNode(e))).forEach(((e,i)=>{i>0&&n.appendChild(t.createElement("br")),n.appendChild(e)})),n}(t,e)))})),this.element.appendChild(n),this.labelElement=n;const i=t.createElement("div");i.classList.add(q("v")),this.element.appendChild(i),this.valueElement=i}}class H extends D{constructor(t,e){const n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{view:new Y(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const W={id:"button",type:"blade",accept(t){const e=A,n=T(t,{title:e.required.string,view:e.required.constant("button"),label:e.optional.string});return n?{params:n}:null},controller:t=>new H(t.document,{blade:t.blade,props:k.fromObject({label:t.params.label}),valueController:new y(t.document,{props:k.fromObject({title:t.params.title}),viewProps:t.viewProps})}),api:t=>t.controller instanceof H&&t.controller.valueController instanceof y?new u(t.controller):null};class $ extends D{constructor(t){super(t),this.value=t.value}}function X(){return new k({positions:E([],{equals:a})})}class Z extends k{constructor(t){super(t)}static create(t){const e={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},n=k.createCore(e);return new Z(n)}get styleExpanded(){var t;return null!==(t=this.get("temporaryExpanded"))&&void 0!==t?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!o(t)?`${t}px`:"auto"}bindExpandedClass(t,e){g(this,"expanded",(()=>{this.styleExpanded?t.classList.add(e):t.classList.remove(e)}))}}function J(t,e){e.style.height=t.styleHeight}function Q(t,e){t.value("expanded").emitter.on("beforechange",(()=>{t.set("completed",!1),o(t.get("expandedHeight"))&&t.set("expandedHeight",function(t,e){let n=0;return function(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}(e,(()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),z(e),n=e.clientHeight,t.set("temporaryExpanded",null),z(e)})),n}(t,e)),t.set("shouldFixHeight",!0),z(e)})),t.emitter.on("change",(()=>{J(t,e)})),J(t,e),e.addEventListener("transitionend",(e=>{"height"===e.propertyName&&(t.set("shouldFixHeight",!1),t.set("expandedHeight",null),t.set("completed",!0))}))}class tt extends e{constructor(t,e){super(t),this.rackApi_=e}}class et{constructor(t){this.emitter=new h,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=t}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(t){for(const e of this.allItems())if(t(e))return e;return null}includes(t){return this.cache_.has(t)}add(t,e){if(this.includes(t))throw c.shouldNeverHappen();const n=void 0!==e?e:this.items_.length;this.items_.splice(n,0,t),this.cache_.add(t);const i=this.extract_(t);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach((t=>{this.cache_.add(t)}))),this.emitter.emit("add",{index:n,item:t,root:this,target:this})}remove(t){const e=this.items_.indexOf(t);if(e<0)return;this.items_.splice(e,1),this.cache_.delete(t);const n=this.extract_(t);n&&(n.emitter.off("add",this.onSubListAdd_),n.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:e,item:t,root:this,target:this})}onSubListAdd_(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}onSubListRemove_(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}}class nt extends e{constructor(t){super(t),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new h,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}refresh(){this.controller_.binding.read()}onBindingChange_(t){const e=t.sender.target.read();this.emitter_.emit("change",{event:new i(this,e,this.controller_.binding.target.presetKey,t.options.last)})}}class it extends H{constructor(t,e){super(t,e),this.binding=e.binding}}class rt extends e{constructor(t){super(t),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new h,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(t){const e=t.sender.target.read();this.emitter_.emit("update",{event:new r(this,e,this.controller_.binding.target.presetKey)})}}class st extends H{constructor(t,e){super(t,e),this.binding=e.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose((()=>{this.binding.dispose()}))}}function ot(t){return t instanceof ct?t.apiSet_:t instanceof tt?t.rackApi_.apiSet_:null}function at(t,e){const n=t.find((t=>t.controller_===e));if(!n)throw c.shouldNeverHappen();return n}function lt(t,e,n){if(!p.isBindable(t))throw c.notBindable();return new p(t,e,n)}class ct extends e{constructor(t,e){super(t),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new h,this.apiSet_=new et(ot),this.pool_=e;const n=this.controller_.rack;n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),n.emitter.on("inputchange",this.onRackInputChange_),n.emitter.on("monitorupdate",this.onRackMonitorUpdate_),n.children.forEach((t=>{this.setUpApi_(t)}))}get children(){return this.controller_.rack.children.map((t=>at(this.apiSet_,t)))}addInput(t,e,n){const i=n||{},r=this.controller_.view.element.ownerDocument,s=this.pool_.createInput(r,lt(t,e,i.presetKey),i),o=new nt(s);return this.add(o,i.index)}addMonitor(t,e,n){const i=n||{},r=this.controller_.view.element.ownerDocument,s=this.pool_.createMonitor(r,lt(t,e),i),o=new rt(s);return this.add(o,i.index)}addFolder(t){return function(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}(this,t)}addButton(t){return function(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}(this,t)}addSeparator(t){return function(t,e){const n=e||{};return t.addBlade(Object.assign(Object.assign({},n),{view:"separator"}))}(this,t)}addTab(t){return function(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}(this,t)}add(t,e){this.controller_.rack.add(t.controller_,e);const n=this.apiSet_.find((e=>e.controller_===t.controller_));return n&&this.apiSet_.remove(n),this.apiSet_.add(t),t}remove(t){this.controller_.rack.remove(t.controller_)}addBlade(t){const e=this.controller_.view.element.ownerDocument,n=this.pool_.createBlade(e,t),i=this.pool_.createBladeApi(n);return this.add(i,t.index)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}setUpApi_(t){this.apiSet_.find((e=>e.controller_===t))||this.apiSet_.add(this.pool_.createBladeApi(t))}onRackAdd_(t){this.setUpApi_(t.bladeController)}onRackRemove_(t){if(t.isRoot){const e=at(this.apiSet_,t.bladeController);this.apiSet_.remove(e)}}onRackInputChange_(t){const e=t.bladeController;if(e instanceof it){const n=at(this.apiSet_,e),r=e.binding;this.emitter_.emit("change",{event:new i(n,r.target.read(),r.target.presetKey,t.options.last)})}else if(e instanceof $){const n=at(this.apiSet_,e);this.emitter_.emit("change",{event:new i(n,e.value.rawValue,void 0,t.options.last)})}}onRackMonitorUpdate_(t){if(!(t.bladeController instanceof st))throw c.shouldNeverHappen();const e=at(this.apiSet_,t.bladeController),n=t.bladeController.binding;this.emitter_.emit("update",{event:new r(e,n.target.read(),n.target.presetKey)})}}class pt extends tt{constructor(t,e){super(t,new ct(t.rackController,e)),this.emitter_=new h,this.controller_.foldable.value("expanded").emitter.on("change",(t=>{this.emitter_.emit("fold",{event:new s(this,t.sender.rawValue)})})),this.rackApi_.on("change",(t=>{this.emitter_.emit("change",{event:t})})),this.rackApi_.on("update",(t=>{this.emitter_.emit("update",{event:t})}))}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(t){this.controller_.foldable.set("expanded",t)}get title(){return this.controller_.props.get("title")}set title(t){this.controller_.props.set("title",t)}get children(){return this.rackApi_.children}addInput(t,e,n){return this.rackApi_.addInput(t,e,n)}addMonitor(t,e,n){return this.rackApi_.addMonitor(t,e,n)}addFolder(t){return this.rackApi_.addFolder(t)}addButton(t){return this.rackApi_.addButton(t)}addSeparator(t){return this.rackApi_.addSeparator(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){return this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addBlade(t){return this.rackApi_.addBlade(t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}}class ut extends D{constructor(t){super({blade:t.blade,view:t.view,viewProps:t.rackController.viewProps}),this.rackController=t.rackController}}class ht{constructor(t,e){const n=v(e.viewName);this.element=t.createElement("div"),this.element.classList.add(n()),e.viewProps.bindClassModifiers(this.element)}}function dt(t){return t instanceof ft?t.rack:t instanceof ut?t.rackController.rack:null}function vt(t){const e=dt(t);return e?e.bcSet_:null}class mt{constructor(t){var e;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new h,this.blade_=null!=t?t:null,null===(e=this.blade_)||void 0===e||e.value("positions").emitter.on("change",this.onBladePositionsChange_),this.bcSet_=new et(vt),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(t,e){t.parent&&t.parent.remove(t),t.parent_=this,this.bcSet_.add(t,e)}remove(t){t.parent_=null,this.bcSet_.remove(t)}find(t){return this.bcSet_.allItems().filter((e=>e instanceof t))}onSetAdd_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,isRoot:e,sender:this}),!e)return;const n=t.item;if(n.viewProps.emitter.on("change",this.onChildViewPropsChange_),n.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),n.viewProps.handleDispose(this.onChildDispose_),n instanceof it)n.binding.emitter.on("change",this.onChildInputChange_);else if(n instanceof st)n.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(n instanceof $)n.value.emitter.on("change",this.onChildValueChange_);else{const t=dt(n);if(t){const e=t.emitter;e.on("layout",this.onDescendantLayout_),e.on("inputchange",this.onDescendantInputChange_),e.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,isRoot:e,sender:this}),!e)return;const n=t.item;if(n instanceof it)n.binding.emitter.off("change",this.onChildInputChange_);else if(n instanceof st)n.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(n instanceof $)n.value.emitter.off("change",this.onChildValueChange_);else{const t=dt(n);if(t){const e=t.emitter;e.off("layout",this.onDescendantLayout_),e.off("inputchange",this.onDescendantInputChange_),e.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){const t=this.bcSet_.items.filter((t=>!t.viewProps.get("hidden"))),e=t[0],n=t[t.length-1];this.bcSet_.items.forEach((t=>{const i=[];t===e&&(i.push("first"),this.blade_&&!this.blade_.get("positions").includes("veryfirst")||i.push("veryfirst")),t===n&&(i.push("last"),this.blade_&&!this.blade_.get("positions").includes("verylast")||i.push("verylast")),t.blade.set("positions",i)}))}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter((t=>t.viewProps.get("disposed"))).forEach((t=>{this.bcSet_.remove(t)}))}onChildInputChange_(t){const e=function(t,e){for(let n=0;n<t.length;n++){const i=t[n];if(i instanceof it&&i.binding===e)return i}return null}(this.find(it),t.sender);if(!e)throw c.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:e,options:t.options,sender:this})}onChildMonitorUpdate_(t){const e=function(t,e){for(let n=0;n<t.length;n++){const i=t[n];if(i instanceof st&&i.binding===e)return i}return null}(this.find(st),t.sender);if(!e)throw c.shouldNeverHappen();this.emitter.emit("monitorupdate",{bladeController:e,sender:this})}onChildValueChange_(t){const e=function(t,e){for(let n=0;n<t.length;n++){const i=t[n];if(i instanceof $&&i.value===e)return i}return null}(this.find($),t.sender);if(!e)throw c.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:e,options:t.options,sender:this})}onDescendantLayout_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(t){this.emitter.emit("inputchange",{bladeController:t.bladeController,options:t.options,sender:this})}onDescendantMonitorUpdate_(t){this.emitter.emit("monitorupdate",{bladeController:t.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class ft extends D{constructor(t,e){super(Object.assign(Object.assign({},e),{view:new ht(t,{viewName:"brk",viewProps:e.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const n=new mt(e.root?void 0:e.blade);n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose((()=>{for(let t=this.rack.children.length-1;t>=0;t--)this.rack.children[t].viewProps.set("disposed",!0)}))}onRackAdd_(t){t.isRoot&&N(this.view.element,t.bladeController.view.element,t.index)}onRackRemove_(t){t.isRoot&&U(t.bladeController.view.element)}}const gt=v("cnt");class _t{constructor(t,e){this.className_=v(e.viewName||"fld"),this.element=t.createElement("div"),this.element.classList.add(this.className_(),gt()),e.viewProps.bindClassModifiers(this.element),this.foldable_=e.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),g(this.foldable_,"completed",_(this.element,this.className_(void 0,"cpl")));const n=t.createElement("button");n.classList.add(this.className_("b")),g(e.props,"title",(t=>{o(t)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))})),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const i=t.createElement("div");i.classList.add(this.className_("t")),b(e.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i;const r=t.createElement("div");r.classList.add(this.className_("m")),this.buttonElement.appendChild(r);const s=e.containerElement;s.classList.add(this.className_("c")),this.element.appendChild(s),this.containerElement=s}}class bt extends ut{constructor(t,e){var n;const i=Z.create(null===(n=e.expanded)||void 0===n||n),r=new ft(t,{blade:e.blade,root:e.root,viewProps:e.viewProps});super(Object.assign(Object.assign({},e),{rackController:r,view:new _t(t,{containerElement:r.view.element,foldable:i,props:e.props,viewName:e.root?"rot":void 0,viewProps:e.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=e.props,this.foldable=i,Q(this.foldable,this.view.containerElement),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const wt={id:"folder",type:"blade",accept(t){const e=A,n=T(t,{title:e.required.string,view:e.required.constant("folder"),expanded:e.optional.boolean});return n?{params:n}:null},controller:t=>new bt(t.document,{blade:t.blade,expanded:t.params.expanded,props:k.fromObject({title:t.params.title}),viewProps:t.viewProps}),api:t=>t.controller instanceof bt?new pt(t.controller,t.pool):null};class xt extends ${constructor(t,e){const n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{value:e.valueController.value,view:new Y(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class yt extends e{}const Ct=v("spr");class Pt{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Ct()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("hr");n.classList.add(Ct("r")),this.element.appendChild(n)}}class Et extends D{constructor(t,e){super(Object.assign(Object.assign({},e),{view:new Pt(t,{viewProps:e.viewProps})}))}}const kt={id:"separator",type:"blade",accept(t){const e=T(t,{view:A.required.constant("separator")});return e?{params:e}:null},controller:t=>new Et(t.document,{blade:t.blade,viewProps:t.viewProps}),api:t=>t.controller instanceof Et?new yt(t.controller):null},Mt=v("");function St(t,e){return _(t,Mt(void 0,e))}class At extends k{constructor(t){super(t)}static create(t){var e,n;const i=null!=t?t:{},r={disabled:null!==(e=i.disabled)&&void 0!==e&&e,disposed:!1,hidden:null!==(n=i.hidden)&&void 0!==n&&n},s=k.createCore(r);return new At(s)}bindClassModifiers(t){g(this,"disabled",St(t,"disabled")),g(this,"hidden",St(t,"hidden"))}bindDisabled(t){g(this,"disabled",(e=>{t.disabled=e}))}bindTabIndex(t){g(this,"disabled",(e=>{t.tabIndex=e?-1:0}))}handleDispose(t){this.value("disposed").emitter.on("change",(e=>{e&&t()}))}}const Tt=v("tbi");class Lt{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Tt()),e.viewProps.bindClassModifiers(this.element),g(e.props,"selected",(t=>{t?this.element.classList.add(Tt(void 0,"sel")):this.element.classList.remove(Tt(void 0,"sel"))}));const n=t.createElement("button");n.classList.add(Tt("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const i=t.createElement("div");i.classList.add(Tt("t")),b(e.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}}class Vt{constructor(t,e){this.emitter=new h,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new Lt(t,{props:e.props,viewProps:e.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Dt{constructor(t,e){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Vt(t,{props:e.itemProps,viewProps:At.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new ft(t,{blade:X(),viewProps:At.create()}),this.props=e.props,g(this.props,"selected",(t=>{this.itemController.props.set("selected",t),this.contentController.viewProps.set("hidden",!t)}))}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}}class Rt{constructor(t,e){this.controller_=t,this.rackApi_=e}get title(){var t;return null!==(t=this.controller_.itemController.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.itemController.props.set("title",t)}get selected(){return this.controller_.props.get("selected")}set selected(t){this.controller_.props.set("selected",t)}get children(){return this.rackApi_.children}addButton(t){return this.rackApi_.addButton(t)}addFolder(t){return this.rackApi_.addFolder(t)}addSeparator(t){return this.rackApi_.addSeparator(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addInput(t,e,n){return this.rackApi_.addInput(t,e,n)}addMonitor(t,e,n){return this.rackApi_.addMonitor(t,e,n)}addBlade(t){return this.rackApi_.addBlade(t)}}class zt extends tt{constructor(t,e){super(t,new ct(t.rackController,e)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.emitter_=new h,this.pageApiMap_=new Map,this.rackApi_.on("change",(t=>{this.emitter_.emit("change",{event:t})})),this.rackApi_.on("update",(t=>{this.emitter_.emit("update",{event:t})})),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach((t=>{this.setUpPageApi_(t)}))}get pages(){return this.controller_.pageSet.items.map((t=>{const e=this.pageApiMap_.get(t);if(!e)throw c.shouldNeverHappen();return e}))}addPage(t){const e=this.controller_.view.element.ownerDocument,n=new Dt(e,{itemProps:k.fromObject({selected:!1,title:t.title}),props:k.fromObject({selected:!1})});this.controller_.add(n,t.index);const i=this.pageApiMap_.get(n);if(!i)throw c.shouldNeverHappen();return i}removePage(t){this.controller_.remove(t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}setUpPageApi_(t){const e=this.rackApi_.apiSet_.find((e=>e.controller_===t.contentController));if(!e)throw c.shouldNeverHappen();const n=new Rt(t,e);this.pageApiMap_.set(t,n)}onPageAdd_(t){this.setUpPageApi_(t.item)}onPageRemove_(t){if(!this.pageApiMap_.get(t.item))throw c.shouldNeverHappen();this.pageApiMap_.delete(t.item)}}const Ot=v("tab");class It{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Ot(),gt()),e.viewProps.bindClassModifiers(this.element),f(e.empty,_(this.element,Ot(void 0,"nop")));const n=t.createElement("div");n.classList.add(Ot("i")),this.element.appendChild(n),this.itemsElement=n;const i=e.contentsElement;i.classList.add(Ot("c")),this.element.appendChild(i),this.contentsElement=i}}class Ft extends ut{constructor(t,e){const n=new ft(t,{blade:e.blade,viewProps:e.viewProps}),i=E(!0);super({blade:e.blade,rackController:n,view:new It(t,{contentsElement:n.view.element,empty:i,viewProps:e.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onPageSelectedChange_=this.onPageSelectedChange_.bind(this),this.pageSet_=new et((()=>null)),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.empty_=i,this.applyPages_()}get pageSet(){return this.pageSet_}add(t,e){this.pageSet_.add(t,null!=e?e:this.pageSet_.items.length)}remove(t){this.pageSet_.remove(this.pageSet_.items[t])}applyPages_(){this.keepSelection_(),this.empty_.rawValue=0===this.pageSet_.items.length}onPageAdd_(t){const e=t.item;N(this.view.itemsElement,e.itemController.view.element,t.index),this.rackController.rack.add(e.contentController,t.index),e.props.value("selected").emitter.on("change",this.onPageSelectedChange_),this.applyPages_()}onPageRemove_(t){const e=t.item;U(e.itemController.view.element),this.rackController.rack.remove(e.contentController),e.props.value("selected").emitter.off("change",this.onPageSelectedChange_),this.applyPages_()}keepSelection_(){if(0===this.pageSet_.items.length)return;const t=this.pageSet_.items.findIndex((t=>t.props.get("selected")));t<0?this.pageSet_.items.forEach(((t,e)=>{t.props.set("selected",0===e)})):this.pageSet_.items.forEach(((e,n)=>{e.props.set("selected",n===t)}))}onPageSelectedChange_(t){if(t.rawValue){const e=this.pageSet_.items.findIndex((e=>e.props.value("selected")===t.sender));this.pageSet_.items.forEach(((t,n)=>{t.props.set("selected",n===e)}))}else this.keepSelection_()}}const Bt={id:"tab",type:"blade",accept(t){const e=A,n=T(t,{pages:e.required.array(e.required.object({title:e.required.string})),view:e.required.constant("tab")});return n&&0!==n.pages.length?{params:n}:null},controller(t){const e=new Ft(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach((n=>{const i=new Dt(t.document,{itemProps:k.fromObject({selected:!1,title:n.title}),props:k.fromObject({selected:!1})});e.add(i)})),e},api:t=>t.controller instanceof Ft?new zt(t.controller,t.pool):null};class jt{constructor(){this.disabled=!1,this.emitter=new h}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class Nt{constructor(t,e){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new h,this.interval_=e,this.setTimer_()}get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(null===this.timerId_)return;const t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class Ut{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce(((t,e)=>e.constrain(t)),t)}}function Kt(t,e){if(t instanceof e)return t;if(t instanceof Ut){const n=t.constraints.reduce(((t,n)=>t||(n instanceof e?n:null)),null);if(n)return n}return null}class Gt{constructor(t){this.options=t}constrain(t){const e=this.options;return 0===e.length||e.filter((e=>e.value===t)).length>0?t:e[0].value}}class qt{constructor(t){this.maxValue=t.max,this.minValue=t.min}constrain(t){let e=t;return o(this.minValue)||(e=Math.max(e,this.minValue)),o(this.maxValue)||(e=Math.min(e,this.maxValue)),e}}class Yt{constructor(t){this.step=t}constrain(t){return(t<0?-Math.round(-t/this.step):Math.round(t/this.step))*this.step}}const Ht=v("lst");class Wt{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.props_=e.props,this.element=t.createElement("div"),this.element.classList.add(Ht()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("select");n.classList.add(Ht("s")),g(this.props_,"options",(e=>{K(n),e.forEach(((e,i)=>{const r=t.createElement("option");r.dataset.index=String(i),r.textContent=e.text,r.value=String(e.value),n.appendChild(r)}))})),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.selectElement=n;const i=t.createElement("div");i.classList.add(Ht("m")),i.appendChild(j(t,"dropdown")),this.element.appendChild(i),e.value.emitter.on("change",this.onValueChange_),this.value_=e.value,this.update_()}update_(){this.selectElement.value=String(this.value_.rawValue)}onValueChange_(){this.update_()}}class $t{constructor(t,e){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new Wt(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(t){const e=t.currentTarget.selectedOptions.item(0);if(!e)return;const n=Number(e.dataset.index);this.value.rawValue=this.props.get("options")[n].value}}const Xt=v("pop");class Zt{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Xt()),e.viewProps.bindClassModifiers(this.element),f(e.shows,_(this.element,Xt(void 0,"v")))}}class Jt{constructor(t,e){this.shows=E(!1),this.viewProps=e.viewProps,this.view=new Zt(t,{shows:this.shows,viewProps:this.viewProps})}}const Qt=v("txt");class te{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Qt()),e.viewProps.bindClassModifiers(this.element),this.props_=e.props,this.props_.emitter.on("change",this.onChange_);const n=t.createElement("input");n.classList.add(Qt("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onChange_),this.value_=e.value,this.refresh()}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}}class ee{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new te(t,{props:e.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const e=t.currentTarget.value,n=this.parser_(e);o(n)||(this.value.rawValue=n),this.view.refresh()}}function ne(t){return"false"!==t&&!!t}function ie(t){return function(t){return String(t)}(t)}class re{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}}const se={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class oe{constructor(t,e,n){this.left=e,this.operator=t,this.right=n}evaluate(){const t=se[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const ae={"+":t=>t,"-":t=>-t,"~":t=>~t};class le{constructor(t,e){this.operator=t,this.expression=e}evaluate(){const t=ae[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function ce(t){return(e,n)=>{for(let i=0;i<t.length;i++){const r=t[i](e,n);if(""!==r)return r}return""}}function pe(t,e){var n;const i=t.substr(e).match(/^\s+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function ue(t,e){var n;const i=t.substr(e).match(/^[0-9]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function he(t,e){const n=t.substr(e,1);if(e+=1,"e"!==n.toLowerCase())return"";const i=function(t,e){const n=ue(t,e);if(""!==n)return n;const i=t.substr(e,1);if("-"!==i&&"+"!==i)return"";const r=ue(t,e+=1);return""===r?"":i+r}(t,e);return""===i?"":n+i}function de(t,e){const n=t.substr(e,1);if("0"===n)return n;const i=function(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}(t,e);return e+=i.length,""===i?"":i+ue(t,e)}const ve=ce([function(t,e){const n=de(t,e);if(e+=n.length,""===n)return"";const i=t.substr(e,1);if(e+=i.length,"."!==i)return"";const r=ue(t,e);return n+i+r+he(t,e+=r.length)},function(t,e){const n=t.substr(e,1);if(e+=n.length,"."!==n)return"";const i=ue(t,e);return e+=i.length,""===i?"":n+i+he(t,e)},function(t,e){const n=de(t,e);return e+=n.length,""===n?"":n+he(t,e)}]);const me=ce([function(t,e){const n=t.substr(e,2);if(e+=n.length,"0b"!==n.toLowerCase())return"";const i=function(t,e){var n;const i=t.substr(e).match(/^[01]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}(t,e);return""===i?"":n+i},function(t,e){const n=t.substr(e,2);if(e+=n.length,"0o"!==n.toLowerCase())return"";const i=function(t,e){var n;const i=t.substr(e).match(/^[0-7]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}(t,e);return""===i?"":n+i},function(t,e){const n=t.substr(e,2);if(e+=n.length,"0x"!==n.toLowerCase())return"";const i=function(t,e){var n;const i=t.substr(e).match(/^[0-9a-f]+/i);return null!==(n=i&&i[0])&&void 0!==n?n:""}(t,e);return""===i?"":n+i}]),fe=ce([me,ve]);function ge(t,e){return function(t,e){const n=fe(t,e);return e+=n.length,""===n?null:{evaluable:new re(n),cursor:e}}(t,e)||function(t,e){const n=t.substr(e,1);if(e+=n.length,"("!==n)return null;const i=we(t,e);if(!i)return null;e=i.cursor,e+=pe(t,e).length;const r=t.substr(e,1);return e+=r.length,")"!==r?null:{evaluable:i.evaluable,cursor:e}}(t,e)}function _e(t,e,n){n+=pe(e,n).length;const i=t.filter((t=>e.startsWith(t,n)))[0];return i?(n+=i.length,{cursor:n+=pe(e,n).length,operator:i}):null}const be=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce(((t,e)=>function(t,e){return(n,i)=>{const r=t(n,i);if(!r)return null;i=r.cursor;let s=r.evaluable;for(;;){const r=_e(e,n,i);if(!r)break;i=r.cursor;const o=t(n,i);if(!o)return null;i=o.cursor,s=new oe(r.operator,s,o.evaluable)}return s?{cursor:i,evaluable:s}:null}}(t,e)),(function t(e,n){const i=ge(e,n);if(i)return i;const r=e.substr(n,1);if(n+=r.length,"+"!==r&&"-"!==r&&"~"!==r)return null;const s=t(e,n);return s?{cursor:n=s.cursor,evaluable:new le(r,s.evaluable)}:null}));function we(t,e){return e+=pe(t,e).length,be(t,e)}function xe(t){var e;const n=function(t){const e=we(t,0);return e?e.cursor+pe(t,e.cursor).length!==t.length?null:e.evaluable:null}(t);return null!==(e=null==n?void 0:n.evaluate())&&void 0!==e?e:null}function ye(t){if("number"==typeof t)return t;if("string"==typeof t){const e=xe(t);if(!o(e))return e}return 0}function Ce(t){return String(t)}function Pe(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}const Ee=Pe(0);function ke(t){return Ee(t)+"%"}function Me(t){return String(t)}function Se(t){return t}function Ae(t,e){for(;t.length<e;)t.push(void 0)}function Te(t){const e=[];return Ae(e,t),E(e)}function Le(t){const e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}function Ve({primary:t,secondary:e,forward:n,backward:i}){let r=!1;function s(t){r||(r=!0,t(),r=!1)}t.emitter.on("change",(i=>{s((()=>{e.setRawValue(n(t,e),i.options)}))})),e.emitter.on("change",(r=>{s((()=>{t.setRawValue(i(t,e),r.options)})),s((()=>{e.setRawValue(n(t,e),r.options)}))})),s((()=>{e.setRawValue(n(t,e),{forceEmit:!1,last:!0})}))}function De(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function Re(t){return{altKey:t.altKey,downKey:"ArrowDown"===t.key,shiftKey:t.shiftKey,upKey:"ArrowUp"===t.key}}function ze(t){return{altKey:t.altKey,downKey:"ArrowLeft"===t.key,shiftKey:t.shiftKey,upKey:"ArrowRight"===t.key}}function Oe(t){return function(t){return"ArrowUp"===t||"ArrowDown"===t}(t)||"ArrowLeft"===t||"ArrowRight"===t}function Ie(t,e){const n=e.ownerDocument.defaultView,i=e.getBoundingClientRect();return{x:t.pageX-((n&&n.scrollX||0)+i.left),y:t.pageY-((n&&n.scrollY||0)+i.top)}}class Fe{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new h,t.addEventListener("touchstart",this.onTouchStart_),t.addEventListener("touchmove",this.onTouchMove_),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var e;t.preventDefault(),null===(e=t.currentTarget)||void 0===e||e.focus();const n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(Ie(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(Ie(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(Ie(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchMove_(t){const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchEnd_(t){var e;const n=null!==(e=t.targetTouches.item(0))&&void 0!==e?e:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-i.left,y:n.clientY-i.top}:void 0),sender:this,shiftKey:t.shiftKey})}}function Be(t,e,n,i,r){return i+(t-e)/(n-e)*(r-i)}function je(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Ne(t,e,n){return Math.min(Math.max(t,e),n)}function Ue(t,e){return(t%e+e)%e}const Ke=v("txt");class Ge{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Ke(),Ke(void 0,"num")),e.arrayPosition&&this.element.classList.add(Ke(void 0,e.arrayPosition)),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(Ke("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=e.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Ke()),this.inputElement.classList.add(Ke("i"));const i=t.createElement("div");i.classList.add(Ke("k")),this.element.appendChild(i),this.knobElement=i;const r=t.createElementNS(R,"svg");r.classList.add(Ke("g")),this.knobElement.appendChild(r);const s=t.createElementNS(R,"path");s.classList.add(Ke("gb")),r.appendChild(s),this.guideBodyElem_=s;const o=t.createElementNS(R,"path");o.classList.add(Ke("gh")),r.appendChild(o),this.guideHeadElem_=o;const a=t.createElement("div");a.classList.add(v("tt")()),this.knobElement.appendChild(a),this.tooltipElem_=a,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.refresh()}onDraggingChange_(t){if(null===t.rawValue)return void this.element.classList.remove(Ke(void 0,"drg"));this.element.classList.add(Ke(void 0,"drg"));const e=t.rawValue/this.props_.get("draggingScale"),n=e+(e>0?-1:e<0?1:0),i=Ne(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${n+i},0 L${n},4 L${n+i},8`,`M ${e},-1 L${e},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${e},4`);const r=this.props_.get("formatter");this.tooltipElem_.textContent=r(this.value.rawValue),this.tooltipElem_.style.left=`${e}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class qe{constructor(t,e){this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.dragging_=E(null),this.view=new Ge(t,{arrayPosition:e.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const n=new Fe(this.view.knobElement);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}onInputChange_(t){const e=t.currentTarget.value,n=this.parser_(e);o(n)||(this.value.rawValue=n),this.view.refresh()}onInputKeyDown_(t){const e=De(this.baseStep_,Re(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onInputKeyUp_(t){0!==De(this.baseStep_,Re(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const e=t.point.x-t.bounds.width/2;return this.originRawValue_+e*this.props.get("draggingScale")}onPointerMove_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Ye=v("sld");class He{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Ye()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Ye("t")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.trackElement=n;const i=t.createElement("div");i.classList.add(Ye("k")),this.trackElement.appendChild(i),this.knobElement=i,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.update_()}update_(){const t=Ne(Be(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${t}%`}onChange_(){this.update_()}}class We{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.value=e.value,this.viewProps=e.viewProps,this.props=e.props,this.view=new He(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Fe(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){t.point&&this.value.setRawValue(Be(Ne(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),e)}onPointerDownOrMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=De(this.baseStep_,ze(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onKeyUp_(t){0!==De(this.baseStep_,ze(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const $e=v("sldtxt");class Xe{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add($e());const n=t.createElement("div");n.classList.add($e("s")),this.sliderView_=e.sliderView,n.appendChild(this.sliderView_.element),this.element.appendChild(n);const i=t.createElement("div");i.classList.add($e("t")),this.textView_=e.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}}class Ze{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.sliderC_=new We(t,{baseStep:e.baseStep,props:e.sliderProps,value:e.value,viewProps:this.viewProps}),this.textC_=new qe(t,{baseStep:e.baseStep,parser:e.parser,props:e.textProps,value:e.value,viewProps:e.viewProps}),this.view=new Xe(t,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}}function Je(t,e){t.write(e)}function Qe(t){const e=A;return Array.isArray(t)?e.required.array(e.required.object({text:e.required.string,value:e.required.raw}))(t).value:"object"==typeof t?e.required.raw(t).value:void 0}function tn(t){if("inline"===t||"popup"===t)return t}function en(t){const e=A;return e.required.object({max:e.optional.number,min:e.optional.number,step:e.optional.number})(t).value}function nn(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach((n=>{e.push({text:n,value:t[n]})})),e}function rn(t){return o(t)?null:new Gt(nn(t))}function sn(t){const e=t?Kt(t,Gt):null;return e?e.options:null}function on(t,e){const n=t&&Kt(t,Yt);return n?je(n.step):Math.max(je(e),2)}function an(t){const e=function(t){const e=t?Kt(t,Yt):null;return e?e.step:null}(t);return null!=e?e:1}function ln(t,e){var n;const i=t&&Kt(t,Yt),r=Math.abs(null!==(n=null==i?void 0:i.step)&&void 0!==n?n:e);return 0===r?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}const cn=v("ckb");class pn{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(cn()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("label");n.classList.add(cn("l")),this.element.appendChild(n);const i=t.createElement("input");i.classList.add(cn("i")),i.type="checkbox",n.appendChild(i),this.inputElement=i,e.viewProps.bindDisabled(this.inputElement);const r=t.createElement("div");r.classList.add(cn("w")),n.appendChild(r);const s=j(t,"check");r.appendChild(s),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class un{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new pn(t,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const e=t.currentTarget;this.value.rawValue=e.checked}}const hn={id:"input-bool",type:"input",accept:(t,e)=>{if("boolean"!=typeof t)return null;const n=T(e,{options:A.optional.custom(Qe)});return n?{initialValue:t,params:n}:null},binding:{reader:t=>ne,constraint:t=>function(t){const e=[],n=rn(t.options);return n&&e.push(n),new Ut(e)}(t.params),writer:t=>Je},controller:t=>{var e;const n=t.document,i=t.value,r=t.constraint;return r&&Kt(r,Gt)?new $t(n,{props:k.fromObject({options:null!==(e=sn(r))&&void 0!==e?e:[]}),value:i,viewProps:t.viewProps}):new un(n,{value:i,viewProps:t.viewProps})}},dn=v("col");class vn{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(dn()),e.foldable.bindExpandedClass(this.element,dn(void 0,"expanded")),g(e.foldable,"completed",_(this.element,dn(void 0,"cpl")));const n=t.createElement("div");n.classList.add(dn("h")),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(dn("s")),n.appendChild(i),this.swatchElement=i;const r=t.createElement("div");if(r.classList.add(dn("t")),n.appendChild(r),this.textElement=r,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(dn("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}function mn(t,e,n){const i=Ue(t,360),r=Ne(e/100,0,1),s=Ne(n/100,0,1),o=s*r,a=o*(1-Math.abs(i/60%2-1)),l=s-o;let c,p,u;return[c,p,u]=i>=0&&i<60?[o,a,0]:i>=60&&i<120?[a,o,0]:i>=120&&i<180?[0,o,a]:i>=180&&i<240?[0,a,o]:i>=240&&i<300?[a,0,o]:[o,0,a],[255*(c+l),255*(p+l),255*(u+l)]}function fn(t){return[t[0],t[1],t[2]]}function gn(t,e){return[t[0],t[1],t[2],e]}const _n={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:function(t,e,n){const i=n+e*(100-Math.abs(2*n-100))/200;return[t,0!==i?e*(100-Math.abs(2*n-100))/i:0,n+e*(100-Math.abs(2*n-100))/200]},rgb:function(t,e,n){const i=(t%360+360)%360,r=Ne(e/100,0,1),s=Ne(n/100,0,1),o=(1-Math.abs(2*s-1))*r,a=o*(1-Math.abs(i/60%2-1)),l=s-o/2;let c,p,u;return[c,p,u]=i>=0&&i<60?[o,a,0]:i>=60&&i<120?[a,o,0]:i>=120&&i<180?[0,o,a]:i>=180&&i<240?[0,a,o]:i>=240&&i<300?[a,0,o]:[o,0,a],[255*(c+l),255*(p+l),255*(u+l)]}},hsv:{hsl:function(t,e,n){const i=100-Math.abs(n*(200-e)/100-100);return[t,0!==i?e*n/i:0,n*(200-e)/200]},hsv:(t,e,n)=>[t,e,n],rgb:mn},rgb:{hsl:function(t,e,n){const i=Ne(t/255,0,1),r=Ne(e/255,0,1),s=Ne(n/255,0,1),o=Math.max(i,r,s),a=Math.min(i,r,s),l=o-a;let c=0,p=0;const u=(a+o)/2;return 0!==l&&(p=l/(1-Math.abs(o+a-1)),c=i===o?(r-s)/l:r===o?2+(s-i)/l:4+(i-r)/l,c=c/6+(c<0?1:0)),[360*c,100*p,100*u]},hsv:function(t,e,n){const i=Ne(t/255,0,1),r=Ne(e/255,0,1),s=Ne(n/255,0,1),o=Math.max(i,r,s),a=o-Math.min(i,r,s);let l;return l=0===a?0:o===i?((r-s)/a%6+6)%6*60:o===r?60*((s-i)/a+2):60*((i-r)/a+4),[l,100*(0===o?0:a/o),100*o]},rgb:(t,e,n)=>[t,e,n]}};const bn={hsl:t=>{var e;return[Ue(t[0],360),Ne(t[1],0,100),Ne(t[2],0,100),Ne(null!==(e=t[3])&&void 0!==e?e:1,0,1)]},hsv:t=>{var e;return[Ue(t[0],360),Ne(t[1],0,100),Ne(t[2],0,100),Ne(null!==(e=t[3])&&void 0!==e?e:1,0,1)]},rgb:t=>{var e;return[Ne(t[0],0,255),Ne(t[1],0,255),Ne(t[2],0,255),Ne(null!==(e=t[3])&&void 0!==e?e:1,0,1)]}};function wn(t,e){return"object"==typeof t&&!o(t)&&e in t&&"number"==typeof t[e]}class xn{constructor(t,e){this.mode_=e,this.comps_=bn[e](t)}static black(){return new xn([0,0,0],"rgb")}static fromObject(t){const e="a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b];return new xn(e,"rgb")}static toRgbaObject(t){return t.toRgbaObject()}static isRgbColorObject(t){return wn(t,"r")&&wn(t,"g")&&wn(t,"b")}static isRgbaColorObject(t){return this.isRgbColorObject(t)&&wn(t,"a")}static isColorObject(t){return this.isRgbColorObject(t)}static equals(t,e){if(t.mode_!==e.mode_)return!1;const n=t.comps_,i=e.comps_;for(let t=0;t<n.length;t++)if(n[t]!==i[t])return!1;return!0}get mode(){return this.mode_}getComponents(t){return gn((e=fn(this.comps_),n=this.mode_,i=t||this.mode_,_n[n][i](...e)),this.comps_[3]);var e,n,i}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const yn=v("colp");class Cn{constructor(t,e){this.alphaViews_=null,this.element=t.createElement("div"),this.element.classList.add(yn());const n=t.createElement("div");n.classList.add(yn("hsv"));const i=t.createElement("div");i.classList.add(yn("sv")),this.svPaletteView_=e.svPaletteView,i.appendChild(this.svPaletteView_.element),n.appendChild(i);const r=t.createElement("div");r.classList.add(yn("h")),this.hPaletteView_=e.hPaletteView,r.appendChild(this.hPaletteView_.element),n.appendChild(r),this.element.appendChild(n);const s=t.createElement("div");if(s.classList.add(yn("rgb")),this.textView_=e.textView,s.appendChild(this.textView_.element),this.element.appendChild(s),e.alphaViews){this.alphaViews_={palette:e.alphaViews.palette,text:e.alphaViews.text};const n=t.createElement("div");n.classList.add(yn("a"));const i=t.createElement("div");i.classList.add(yn("ap")),i.appendChild(this.alphaViews_.palette.element),n.appendChild(i);const r=t.createElement("div");r.classList.add(yn("at")),r.appendChild(this.alphaViews_.text.element),n.appendChild(r),this.element.appendChild(n)}}get allFocusableElements(){const t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map((t=>t.inputElement))];return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}}function Pn(t){const e=A;return T(t,{alpha:e.optional.boolean,expanded:e.optional.boolean,picker:e.optional.custom(tn)})}function En(t){return t?.1:1}function kn(t,e){const n=t.match(/^(.+)%$/);return n?Math.min(.01*parseFloat(n[1])*e,e):Math.min(parseFloat(t),e)}const Mn={deg:t=>t,grad:t=>360*t/400,rad:t=>360*t/(2*Math.PI),turn:t=>360*t};function Sn(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),i=e[2];return Mn[i](n)}const An={"func.rgb":t=>{const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[kn(e[1],255),kn(e[2],255),kn(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:new xn(n,"rgb")},"func.rgba":t=>{const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[kn(e[1],255),kn(e[2],255),kn(e[3],255),kn(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:new xn(n,"rgb")},"func.hsl":t=>{const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Sn(e[1]),kn(e[2],100),kn(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:new xn(n,"hsl")},"func.hsla":t=>{const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Sn(e[1]),kn(e[2],100),kn(e[3],100),kn(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:new xn(n,"hsl")},"hex.rgb":t=>{const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return new xn([parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)],"rgb");const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?new xn([parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)],"rgb"):null},"hex.rgba":t=>{const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return new xn([parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Be(parseInt(e[4]+e[4],16),0,255,0,1)],"rgb");const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?new xn([parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),Be(parseInt(n[4],16),0,255,0,1)],"rgb"):null}};function Tn(t){return Object.keys(An).reduce(((e,n)=>e||((0,An[n])(t)?n:null)),null)}const Ln=t=>{const e=Tn(t);return e?An[e](t):null};function Vn(t){return"func.hsla"===t||"func.rgba"===t||"hex.rgba"===t}function Dn(t){if("string"==typeof t){const e=Ln(t);if(e)return e}return xn.black()}function Rn(t){const e=Ne(Math.floor(t),0,255).toString(16);return 1===e.length?`0${e}`:e}function zn(t,e="#"){return`${e}${fn(t.getComponents("rgb")).map(Rn).join("")}`}function On(t,e="#"){const n=t.getComponents("rgb");return`${e}${[n[0],n[1],n[2],255*n[3]].map(Rn).join("")}`}function In(t){const e=Pe(0);return`rgb(${fn(t.getComponents("rgb")).map((t=>e(t))).join(", ")})`}function Fn(t){const e=Pe(2),n=Pe(0);return`rgba(${t.getComponents("rgb").map(((t,i)=>(3===i?e:n)(t))).join(", ")})`}const Bn={"func.hsl":function(t){const e=[Pe(0),ke,ke];return`hsl(${fn(t.getComponents("hsl")).map(((t,n)=>e[n](t))).join(", ")})`},"func.hsla":function(t){const e=[Pe(0),ke,ke,Pe(2)];return`hsla(${t.getComponents("hsl").map(((t,n)=>e[n](t))).join(", ")})`},"func.rgb":In,"func.rgba":Fn,"hex.rgb":zn,"hex.rgba":On};function jn(t){return Bn[t]}const Nn=v("apl");class Un{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Nn()),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(Nn("b")),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(Nn("c")),n.appendChild(i),this.colorElem_=i;const r=t.createElement("div");r.classList.add(Nn("m")),this.element.appendChild(r),this.markerElem_=r;const s=t.createElement("div");s.classList.add(Nn("p")),this.markerElem_.appendChild(s),this.previewElem_=s,this.update_()}update_(){const t=this.value.rawValue,e=t.getComponents("rgb"),n=new xn([e[0],e[1],e[2],0],"rgb"),i=new xn([e[0],e[1],e[2],255],"rgb"),r=["to right",Fn(n),Fn(i)];this.colorElem_.style.background=`linear-gradient(${r.join(",")})`,this.previewElem_.style.backgroundColor=Fn(t);const s=Be(e[3],0,1,0,100);this.markerElem_.style.left=`${s}%`}onValueChange_(){this.update_()}}class Kn{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Un(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Fe(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=t.point.x/t.bounds.width,i=this.value.rawValue,[r,s,o]=i.getComponents("hsv");this.value.setRawValue(new xn([r,s,o,n],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=De(En(!0),ze(t));if(0===e)return;const n=this.value.rawValue,[i,r,s,o]=n.getComponents("hsv");this.value.setRawValue(new xn([i,r,s,o+e],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==De(En(!0),ze(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Gn=v("coltxt");class qn{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Gn());const n=t.createElement("div");n.classList.add(Gn("m")),this.modeElem_=function(t){const e=t.createElement("select");return e.appendChild([{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}].reduce(((e,n)=>{const i=t.createElement("option");return i.textContent=n.text,i.value=n.value,e.appendChild(i),e}),t.createDocumentFragment())),e}(t),this.modeElem_.classList.add(Gn("ms")),n.appendChild(this.modeSelectElement);const i=t.createElement("div");i.classList.add(Gn("mm")),i.appendChild(j(t,"dropdown")),n.appendChild(i),this.element.appendChild(n);const r=t.createElement("div");r.classList.add(Gn("w")),this.element.appendChild(r),this.textsElem_=r,this.textViews_=e.textViews,this.applyTextViews_(),f(e.colorMode,(t=>{this.modeElem_.value=t}))}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(t){this.textViews_=t,this.applyTextViews_()}applyTextViews_(){K(this.textsElem_);const t=this.element.ownerDocument;this.textViews_.forEach((e=>{const n=t.createElement("div");n.classList.add(Gn("c")),n.appendChild(e.element),this.textsElem_.appendChild(n)}))}}const Yn=Pe(0),Hn={rgb:()=>new qt({min:0,max:255}),hsl:t=>new qt(0===t?{min:0,max:360}:{min:0,max:100}),hsv:t=>new qt(0===t?{min:0,max:360}:{min:0,max:100})};function Wn(t,e,n){return new qe(t,{arrayPosition:0===n?"fst":2===n?"lst":"mid",baseStep:En(!1),parser:e.parser,props:k.fromObject({draggingScale:1,formatter:Yn}),value:E(0,{constraint:Hn[e.colorMode](n)}),viewProps:e.viewProps})}class $n{constructor(t,e){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.parser_=e.parser,this.value=e.value,this.viewProps=e.viewProps,this.colorMode=E(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(t),this.view=new qn(t,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(t){const e={colorMode:this.colorMode.rawValue,parser:this.parser_,viewProps:this.viewProps},n=[Wn(t,e,0),Wn(t,e,1),Wn(t,e,2)];return n.forEach(((t,e)=>{Ve({primary:this.value,secondary:t.value,forward:t=>t.rawValue.getComponents(this.colorMode.rawValue)[e],backward:(t,n)=>{const i=this.colorMode.rawValue,r=t.rawValue.getComponents(i);return r[e]=n.rawValue,new xn(gn(fn(r),r[3]),i)}})})),n}onModeSelectChange_(t){const e=t.currentTarget;this.colorMode.rawValue=e.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const Xn=v("hpl");class Zn{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Xn()),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(Xn("c")),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(Xn("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const t=this.value.rawValue,[e]=t.getComponents("hsv");this.markerElem_.style.backgroundColor=In(new xn([e,100,100],"hsv"));const n=Be(e,0,360,0,100);this.markerElem_.style.left=`${n}%`}onValueChange_(){this.update_()}}class Jn{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Zn(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Fe(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=Be(t.point.x,0,t.bounds.width,0,360),i=this.value.rawValue,[,r,s,o]=i.getComponents("hsv");this.value.setRawValue(new xn([n,r,s,o],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=De(En(!1),ze(t));if(0===e)return;const n=this.value.rawValue,[i,r,s,o]=n.getComponents("hsv");this.value.setRawValue(new xn([i+e,r,s,o],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==De(En(!1),ze(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Qn=v("svp");class ti{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Qn()),e.viewProps.bindTabIndex(this.element);const n=t.createElement("canvas");n.height=64,n.width=64,n.classList.add(Qn("c")),this.element.appendChild(n),this.canvasElement=n;const i=t.createElement("div");i.classList.add(Qn("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const t=F(this.canvasElement);if(!t)return;const e=this.value.rawValue.getComponents("hsv"),n=this.canvasElement.width,i=this.canvasElement.height,r=t.getImageData(0,0,n,i),s=r.data;for(let t=0;t<i;t++)for(let r=0;r<n;r++){const o=Be(r,0,n,0,100),a=Be(t,0,i,100,0),l=mn(e[0],o,a),c=4*(t*n+r);s[c]=l[0],s[c+1]=l[1],s[c+2]=l[2],s[c+3]=255}t.putImageData(r,0,0);const o=Be(e[1],0,100,0,100);this.markerElem_.style.left=`${o}%`;const a=Be(e[2],0,100,100,0);this.markerElem_.style.top=`${a}%`}onValueChange_(){this.update_()}}class ei{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new ti(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Fe(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=Be(t.point.x,0,t.bounds.width,0,100),i=Be(t.point.y,0,t.bounds.height,100,0),[r,,,s]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new xn([r,n,i,s],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){Oe(t.key)&&t.preventDefault();const[e,n,i,r]=this.value.rawValue.getComponents("hsv"),s=En(!1),o=De(s,ze(t)),a=De(s,Re(t));0===o&&0===a||this.value.setRawValue(new xn([e,n+o,i+a,r],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){const e=En(!1),n=De(e,ze(t)),i=De(e,Re(t));0===n&&0===i||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class ni{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.hPaletteC_=new Jn(t,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new ei(t,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=e.supportsAlpha?{palette:new Kn(t,{value:this.value,viewProps:this.viewProps}),text:new qe(t,{parser:xe,baseStep:.1,props:k.fromObject({draggingScale:.01,formatter:Pe(2)}),value:E(0,{constraint:new qt({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Ve({primary:this.value,secondary:this.alphaIcs_.text.value,forward:t=>t.rawValue.getComponents()[3],backward:(t,e)=>{const n=t.rawValue.getComponents();return n[3]=e.rawValue,new xn(n,t.rawValue.mode)}}),this.textC_=new $n(t,{parser:xe,value:this.value,viewProps:this.viewProps}),this.view=new Cn(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:e.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view})}get textController(){return this.textC_}}const ii=v("colsw");class ri{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.element=t.createElement("div"),this.element.classList.add(ii()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(ii("sw")),this.element.appendChild(n),this.swatchElem_=n;const i=t.createElement("button");i.classList.add(ii("b")),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const t=this.value.rawValue;this.swatchElem_.style.backgroundColor=On(t)}onValueChange_(){this.update_()}}class si{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new ri(t,{value:this.value,viewProps:this.viewProps})}}class oi{constructor(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=Z.create(e.expanded),this.swatchC_=new si(t,{value:this.value,viewProps:this.viewProps});const n=this.swatchC_.view.buttonElement;n.addEventListener("blur",this.onButtonBlur_),n.addEventListener("click",this.onButtonClick_),this.textC_=new ee(t,{parser:e.parser,props:k.fromObject({formatter:e.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new vn(t,{foldable:this.foldable_,pickerLayout:e.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_="popup"===e.pickerLayout?new Jt(t,{viewProps:this.viewProps}):null;const i=new ni(t,{supportsAlpha:e.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach((t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)})),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),Ve({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t.rawValue,backward:(t,e)=>e.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Q(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,n=t.relatedTarget;n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=G(t);n&&e.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!O(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.swatchC_.view.buttonElement.focus()}}function ai(t){return xn.isColorObject(t)?xn.fromObject(t):xn.black()}function li(t){return fn(t.getComponents("rgb")).reduce(((t,e)=>t<<8|255&Math.floor(e)),0)}function ci(t){return t.getComponents("rgb").reduce(((t,e,n)=>t<<8|255&Math.floor(3===n?255*e:e)),0)>>>0}function pi(t){return"number"!=typeof t?xn.black():new xn([(e=t)>>16&255,e>>8&255,255&e],"rgb");var e}function ui(t){return"number"!=typeof t?xn.black():new xn([(e=t)>>24&255,e>>16&255,e>>8&255,Be(255&e,0,255,0,1)],"rgb");var e}function hi(t,e){const n=e.toRgbaObject();t.writeProperty("r",n.r),t.writeProperty("g",n.g),t.writeProperty("b",n.b),t.writeProperty("a",n.a)}function di(t,e){const n=e.toRgbaObject();t.writeProperty("r",n.r),t.writeProperty("g",n.g),t.writeProperty("b",n.b)}function vi(t){return"alpha"in t&&!0===t.alpha}function mi(t){return t?t=>On(t,"0x"):t=>zn(t,"0x")}const fi={id:"input-color-number",type:"input",accept:(t,e)=>{if("number"!=typeof t)return null;if(!("view"in e))return null;if("color"!==e.view)return null;const n=Pn(e);return n?{initialValue:t,params:n}:null},binding:{reader:t=>vi(t.params)?ui:pi,equals:xn.equals,writer:t=>function(t){const e=t?ci:li;return(t,n)=>{Je(t,e(n))}}(vi(t.params))},controller:t=>{const e=vi(t.params),n="expanded"in t.params?t.params.expanded:void 0,i="picker"in t.params?t.params.picker:void 0;return new oi(t.document,{expanded:null!=n&&n,formatter:mi(e),parser:Ln,pickerLayout:null!=i?i:"popup",supportsAlpha:e,value:t.value,viewProps:t.viewProps})}};const gi={id:"input-color-object",type:"input",accept:(t,e)=>{if(!xn.isColorObject(t))return null;const n=Pn(e);return n?{initialValue:t,params:n}:null},binding:{reader:t=>ai,equals:xn.equals,writer:t=>{return e=t.initialValue,xn.isRgbaColorObject(e)?hi:di;var e}},controller:t=>{const e=xn.isRgbaColorObject(t.initialValue),n="expanded"in t.params?t.params.expanded:void 0,i="picker"in t.params?t.params.picker:void 0,r=e?On:zn;return new oi(t.document,{expanded:null!=n&&n,formatter:r,parser:Ln,pickerLayout:null!=i?i:"popup",supportsAlpha:e,value:t.value,viewProps:t.viewProps})}},_i={id:"input-color-string",type:"input",accept:(t,e)=>{if("string"!=typeof t)return null;if("view"in e&&"text"===e.view)return null;if(!Tn(t))return null;const n=Pn(e);return n?{initialValue:t,params:n}:null},binding:{reader:t=>Dn,equals:xn.equals,writer:t=>{const e=Tn(t.initialValue);if(!e)throw c.shouldNeverHappen();return function(t){const e=jn(t);return(t,n)=>{Je(t,e(n))}}(e)}},controller:t=>{const e=Tn(t.initialValue);if(!e)throw c.shouldNeverHappen();const n=jn(e),i="expanded"in t.params?t.params.expanded:void 0,r="picker"in t.params?t.params.picker:void 0;return new oi(t.document,{expanded:null!=i&&i,formatter:n,parser:Ln,pickerLayout:null!=r?r:"popup",supportsAlpha:Vn(e),value:t.value,viewProps:t.viewProps})}};class bi{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){const e=this.asm_.toComponents(t).map(((t,e)=>{var n,i;return null!==(i=null===(n=this.components[e])||void 0===n?void 0:n.constrain(t))&&void 0!==i?i:t}));return this.asm_.fromComponents(e)}}const wi=v("pndtxt");class xi{constructor(t,e){this.textViews=e.textViews,this.element=t.createElement("div"),this.element.classList.add(wi()),this.textViews.forEach((e=>{const n=t.createElement("div");n.classList.add(wi("a")),n.appendChild(e.element),this.element.appendChild(n)}))}}class yi{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.acs_=e.axes.map(((n,i)=>function(t,e,n){return new qe(t,{arrayPosition:0===n?"fst":n===e.axes.length-1?"lst":"mid",baseStep:e.axes[n].baseStep,parser:e.parser,props:e.axes[n].textProps,value:E(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}(t,e,i))),this.acs_.forEach(((t,n)=>{Ve({primary:this.value,secondary:t.value,forward:t=>e.assembly.toComponents(t.rawValue)[n],backward:(t,i)=>{const r=e.assembly.toComponents(t.rawValue);return r[n]=i.rawValue,e.assembly.fromComponents(r)}})})),this.view=new xi(t,{textViews:this.acs_.map((t=>t.view))})}}function Ci(t){const e=[],n=function(t){return"step"in t&&!o(t.step)?new Yt(t.step):null}(t);n&&e.push(n);const i=function(t){return"max"in t&&!o(t.max)||"min"in t&&!o(t.min)?new qt({max:t.max,min:t.min}):null}(t);i&&e.push(i);const r=rn(t.options);return r&&e.push(r),new Ut(e)}function Pi(t){const[e,n]=function(t){const e=t?Kt(t,qt):null;return e?[e.minValue,e.maxValue]:[void 0,void 0]}(t);return[null!=e?e:0,null!=n?n:100]}const Ei={id:"input-number",type:"input",accept:(t,e)=>{if("number"!=typeof t)return null;const n=A,i=T(e,{format:n.optional.function,max:n.optional.number,min:n.optional.number,options:n.optional.custom(Qe),step:n.optional.number});return i?{initialValue:t,params:i}:null},binding:{reader:t=>ye,constraint:t=>Ci(t.params),writer:t=>Je},controller:t=>{var e,n;const i=t.value,r=t.constraint;if(r&&Kt(r,Gt))return new $t(t.document,{props:k.fromObject({options:null!==(e=sn(r))&&void 0!==e?e:[]}),value:i,viewProps:t.viewProps});const s=null!==(n="format"in t.params?t.params.format:void 0)&&void 0!==n?n:Pe(on(r,i.rawValue));if(r&&Kt(r,qt)){const[e,n]=Pi(r);return new Ze(t.document,{baseStep:an(r),parser:xe,sliderProps:k.fromObject({maxValue:n,minValue:e}),textProps:k.fromObject({draggingScale:ln(r,i.rawValue),formatter:s}),value:i,viewProps:t.viewProps})}return new qe(t.document,{baseStep:an(r),parser:xe,props:k.fromObject({draggingScale:ln(r,i.rawValue),formatter:s}),value:i,viewProps:t.viewProps})}};class ki{constructor(t=0,e=0){this.x=t,this.y=e}getComponents(){return[this.x,this.y]}static isObject(t){if(o(t))return!1;const e=t.x,n=t.y;return"number"==typeof e&&"number"==typeof n}static equals(t,e){return t.x===e.x&&t.y===e.y}toObject(){return{x:this.x,y:this.y}}}const Mi={toComponents:t=>t.getComponents(),fromComponents:t=>new ki(...t)},Si=v("p2d");class Ai{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Si()),e.viewProps.bindClassModifiers(this.element),f(e.expanded,_(this.element,Si(void 0,"expanded")));const n=t.createElement("div");n.classList.add(Si("h")),this.element.appendChild(n);const i=t.createElement("button");i.classList.add(Si("b")),i.appendChild(j(t,"p2dpad")),e.viewProps.bindDisabled(i),n.appendChild(i),this.buttonElement=i;const r=t.createElement("div");if(r.classList.add(Si("t")),n.appendChild(r),this.textElement=r,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(Si("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}const Ti=v("p2dp");class Li{constructor(t,e){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=e.invertsY,this.maxValue_=e.maxValue,this.element=t.createElement("div"),this.element.classList.add(Ti()),"popup"===e.layout&&this.element.classList.add(Ti(void 0,"p"));const n=t.createElement("div");n.classList.add(Ti("p")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.padElement=n;const i=t.createElementNS(R,"svg");i.classList.add(Ti("g")),this.padElement.appendChild(i),this.svgElem_=i;const r=t.createElementNS(R,"line");r.classList.add(Ti("ax")),r.setAttributeNS(null,"x1","0"),r.setAttributeNS(null,"y1","50%"),r.setAttributeNS(null,"x2","100%"),r.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(r);const s=t.createElementNS(R,"line");s.classList.add(Ti("ax")),s.setAttributeNS(null,"x1","50%"),s.setAttributeNS(null,"y1","0"),s.setAttributeNS(null,"x2","50%"),s.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(s);const o=t.createElementNS(R,"line");o.classList.add(Ti("l")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(o),this.lineElem_=o;const a=t.createElement("div");a.classList.add(Ti("m")),this.padElement.appendChild(a),this.markerElem_=a,e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[t,e]=this.value.rawValue.getComponents(),n=this.maxValue_,i=Be(t,-n,+n,0,100),r=Be(e,-n,+n,0,100),s=this.invertsY_?100-r:r;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${s}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${s}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function Vi(t,e,n){return[De(e[0],ze(t)),De(e[1],Re(t))*(n?1:-1)]}class Di{constructor(t,e){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.baseSteps_=e.baseSteps,this.maxValue_=e.maxValue,this.invertsY_=e.invertsY,this.view=new Li(t,{invertsY:this.invertsY_,layout:e.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Fe(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=this.maxValue_,i=Be(t.point.x,0,t.bounds.width,-n,+n),r=Be(this.invertsY_?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-n,+n);this.value.setRawValue(new ki(i,r),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onPadKeyDown_(t){Oe(t.key)&&t.preventDefault();const[e,n]=Vi(t,this.baseSteps_,this.invertsY_);0===e&&0===n||this.value.setRawValue(new ki(this.value.rawValue.x+e,this.value.rawValue.y+n),{forceEmit:!1,last:!1})}onPadKeyUp_(t){const[e,n]=Vi(t,this.baseSteps_,this.invertsY_);0===e&&0===n||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Ri{constructor(t,e){var n,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=Z.create(e.expanded),this.popC_="popup"===e.pickerLayout?new Jt(t,{viewProps:this.viewProps}):null;const r=new Di(t,{baseSteps:[e.axes[0].baseStep,e.axes[1].baseStep],invertsY:e.invertsY,layout:e.pickerLayout,maxValue:e.maxValue,value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach((t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)})),this.pickerC_=r,this.textC_=new yi(t,{assembly:Mi,axes:e.axes,parser:e.parser,value:this.value,viewProps:this.viewProps}),this.view=new Ai(t,{expanded:this.foldable_.value("expanded"),pickerLayout:e.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),null===(n=this.view.buttonElement)||void 0===n||n.addEventListener("blur",this.onPadButtonBlur_),null===(i=this.view.buttonElement)||void 0===i||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Ve({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t.rawValue,backward:(t,e)=>e.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Q(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,n=t.relatedTarget;n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=G(t);n&&e.contains(n)||n&&n===this.view.buttonElement&&!O(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.view.buttonElement.focus()}}function zi(t){return ki.isObject(t)?new ki(t.x,t.y):new ki}function Oi(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function Ii(t){if(!t)return;const e=[];return o(t.step)||e.push(new Yt(t.step)),o(t.max)&&o(t.min)||e.push(new qt({max:t.max,min:t.min})),new Ut(e)}function Fi(t,e){const n=t&&Kt(t,qt);if(n)return Math.max(Math.abs(n.minValue||0),Math.abs(n.maxValue||0));const i=an(t);return Math.max(10*Math.abs(i),10*Math.abs(e))}function Bi(t,e){const n=e instanceof bi?e.components[0]:void 0,i=e instanceof bi?e.components[1]:void 0,r=Fi(n,t.x),s=Fi(i,t.y);return Math.max(r,s)}function ji(t,e){return{baseStep:an(e),constraint:e,textProps:k.fromObject({draggingScale:ln(e,t),formatter:Pe(on(e,t))})}}function Ni(t){if(!("y"in t))return!1;const e=t.y;return!!e&&"inverted"in e&&!!e.inverted}const Ui={id:"input-point2d",type:"input",accept:(t,e)=>{if(!ki.isObject(t))return null;const n=A,i=T(e,{expanded:n.optional.boolean,picker:n.optional.custom(tn),x:n.optional.custom(en),y:n.optional.object({inverted:n.optional.boolean,max:n.optional.number,min:n.optional.number,step:n.optional.number})});return i?{initialValue:t,params:i}:null},binding:{reader:t=>zi,constraint:t=>{return e=t.params,new bi({assembly:Mi,components:[Ii("x"in e?e.x:void 0),Ii("y"in e?e.y:void 0)]});var e},equals:ki.equals,writer:t=>Oi},controller:t=>{const e=t.document,n=t.value,i=t.constraint;if(!(i instanceof bi))throw c.shouldNeverHappen();const r="expanded"in t.params?t.params.expanded:void 0,s="picker"in t.params?t.params.picker:void 0;return new Ri(e,{axes:[ji(n.rawValue.x,i.components[0]),ji(n.rawValue.y,i.components[1])],expanded:null!=r&&r,invertsY:Ni(t.params),maxValue:Bi(n.rawValue,i),parser:xe,pickerLayout:null!=s?s:"popup",value:n,viewProps:t.viewProps})}};class Ki{constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}getComponents(){return[this.x,this.y,this.z]}static isObject(t){if(o(t))return!1;const e=t.x,n=t.y,i=t.z;return"number"==typeof e&&"number"==typeof n&&"number"==typeof i}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const Gi={toComponents:t=>t.getComponents(),fromComponents:t=>new Ki(...t)};function qi(t){return Ki.isObject(t)?new Ki(t.x,t.y,t.z):new Ki}function Yi(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function Hi(t){if(!t)return;const e=[];return o(t.step)||e.push(new Yt(t.step)),o(t.max)&&o(t.min)||e.push(new qt({max:t.max,min:t.min})),new Ut(e)}function Wi(t,e){return{baseStep:an(e),constraint:e,textProps:k.fromObject({draggingScale:ln(e,t),formatter:Pe(on(e,t))})}}const $i={id:"input-point3d",type:"input",accept:(t,e)=>{if(!Ki.isObject(t))return null;const n=A,i=T(e,{x:n.optional.custom(en),y:n.optional.custom(en),z:n.optional.custom(en)});return i?{initialValue:t,params:i}:null},binding:{reader:t=>qi,constraint:t=>{return e=t.params,new bi({assembly:Gi,components:[Hi("x"in e?e.x:void 0),Hi("y"in e?e.y:void 0),Hi("z"in e?e.z:void 0)]});var e},equals:Ki.equals,writer:t=>Yi},controller:t=>{const e=t.value,n=t.constraint;if(!(n instanceof bi))throw c.shouldNeverHappen();return new yi(t.document,{assembly:Gi,axes:[Wi(e.rawValue.x,n.components[0]),Wi(e.rawValue.y,n.components[1]),Wi(e.rawValue.z,n.components[2])],parser:xe,value:e,viewProps:t.viewProps})}};class Xi{constructor(t=0,e=0,n=0,i=0){this.x=t,this.y=e,this.z=n,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(t){if(o(t))return!1;const e=t.x,n=t.y,i=t.z,r=t.w;return"number"==typeof e&&"number"==typeof n&&"number"==typeof i&&"number"==typeof r}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const Zi={toComponents:t=>t.getComponents(),fromComponents:t=>new Xi(...t)};function Ji(t){return Xi.isObject(t)?new Xi(t.x,t.y,t.z,t.w):new Xi}function Qi(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function tr(t){if(!t)return;const e=[];return o(t.step)||e.push(new Yt(t.step)),o(t.max)&&o(t.min)||e.push(new qt({max:t.max,min:t.min})),new Ut(e)}const er={id:"input-point4d",type:"input",accept:(t,e)=>{if(!Xi.isObject(t))return null;const n=A,i=T(e,{x:n.optional.custom(en),y:n.optional.custom(en),z:n.optional.custom(en),w:n.optional.custom(en)});return i?{initialValue:t,params:i}:null},binding:{reader:t=>Ji,constraint:t=>{return e=t.params,new bi({assembly:Zi,components:[tr("x"in e?e.x:void 0),tr("y"in e?e.y:void 0),tr("z"in e?e.z:void 0),tr("w"in e?e.w:void 0)]});var e},equals:Xi.equals,writer:t=>Qi},controller:t=>{const e=t.value,n=t.constraint;if(!(n instanceof bi))throw c.shouldNeverHappen();return new yi(t.document,{assembly:Zi,axes:e.rawValue.getComponents().map(((t,e)=>{return i=t,{baseStep:an(r=n.components[e]),constraint:r,textProps:k.fromObject({draggingScale:ln(r,i),formatter:Pe(on(r,i))})};var i,r})),parser:xe,value:e,viewProps:t.viewProps})}};const nr={id:"input-string",type:"input",accept:(t,e)=>{if("string"!=typeof t)return null;const n=T(e,{options:A.optional.custom(Qe)});return n?{initialValue:t,params:n}:null},binding:{reader:t=>Me,constraint:t=>function(t){const e=[],n=rn(t.options);return n&&e.push(n),new Ut(e)}(t.params),writer:t=>Je},controller:t=>{var e;const n=t.document,i=t.value,r=t.constraint;return r&&Kt(r,Gt)?new $t(n,{props:k.fromObject({options:null!==(e=sn(r))&&void 0!==e?e:[]}),value:i,viewProps:t.viewProps}):new ee(n,{parser:t=>t,props:k.fromObject({formatter:Se}),value:i,viewProps:t.viewProps})}},ir={defaultInterval:200,defaultLineCount:3},rr=v("mll");class sr{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(rr()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("textarea");n.classList.add(rr("i")),n.style.height=`calc(var(--bld-us) * ${e.lineCount})`,n.readOnly=!0,e.viewProps.bindDisabled(n),this.element.appendChild(n),this.textareaElem_=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.textareaElem_,e=t.scrollTop===t.scrollHeight-t.clientHeight,n=[];this.value.rawValue.forEach((t=>{void 0!==t&&n.push(this.formatter_(t))})),t.textContent=n.join("\n"),e&&(t.scrollTop=t.scrollHeight)}onValueUpdate_(){this.update_()}}class or{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new sr(t,{formatter:e.formatter,lineCount:e.lineCount,value:this.value,viewProps:this.viewProps})}}const ar=v("sgl");class lr{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(ar()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(ar("i")),n.readOnly=!0,n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.value.rawValue,e=t[t.length-1];this.inputElement.value=void 0!==e?this.formatter_(e):""}onValueUpdate_(){this.update_()}}class cr{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new lr(t,{formatter:e.formatter,value:this.value,viewProps:this.viewProps})}}const pr={id:"monitor-bool",type:"monitor",accept:(t,e)=>{if("boolean"!=typeof t)return null;const n=T(e,{lineCount:A.optional.number});return n?{initialValue:t,params:n}:null},binding:{reader:t=>ne},controller:t=>{var e;return 1===t.value.rawValue.length?new cr(t.document,{formatter:ie,value:t.value,viewProps:t.viewProps}):new or(t.document,{formatter:ie,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:ir.defaultLineCount,value:t.value,viewProps:t.viewProps})}};class ur{constructor(){this.emitter=new h,this.index_=-1}get index(){return this.index_}set index(t){this.index_!==t&&(this.index_=t,this.emitter.emit("change",{index:t,sender:this}))}}const hr=v("grl");class dr{constructor(t,e){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(hr()),e.viewProps.bindClassModifiers(this.element),this.formatter_=e.formatter,this.minValue_=e.minValue,this.maxValue_=e.maxValue,this.cursor_=e.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const n=t.createElementNS(R,"svg");n.classList.add(hr("g")),n.style.height=`calc(var(--bld-us) * ${e.lineCount})`,this.element.appendChild(n),this.svgElem_=n;const i=t.createElementNS(R,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const r=t.createElement("div");r.classList.add(hr("t"),v("tt")()),this.element.appendChild(r),this.tooltipElem_=r,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const t=this.svgElem_.getBoundingClientRect(),e=this.value.rawValue.length-1,n=this.minValue_,i=this.maxValue_,r=[];this.value.rawValue.forEach(((s,o)=>{if(void 0===s)return;const a=Be(o,0,e,0,t.width),l=Be(s,n,i,t.height,0);r.push([a,l].join(","))})),this.lineElem_.setAttributeNS(null,"points",r.join(" "));const s=this.tooltipElem_,o=this.value.rawValue[this.cursor_.index];if(void 0===o)return void s.classList.remove(hr("t","a"));const a=Be(this.cursor_.index,0,e,0,t.width),l=Be(o,n,i,t.height,0);s.style.left=`${a}px`,s.style.top=`${l}px`,s.textContent=`${this.formatter_(o)}`,s.classList.contains(hr("t","a"))||(s.classList.add(hr("t","a"),hr("t","in")),z(s),s.classList.remove(hr("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class vr{constructor(t,e){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.cursor_=new ur,this.view=new dr(t,{cursor:this.cursor_,formatter:e.formatter,lineCount:e.lineCount,maxValue:e.maxValue,minValue:e.minValue,value:this.value,viewProps:this.viewProps}),O(t)){const t=new Fe(this.view.element);t.emitter.on("down",this.onGraphPointerDown_),t.emitter.on("move",this.onGraphPointerMove_),t.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}onGraphMouseLeave_(){this.cursor_.index=-1}onGraphMouseMove_(t){const e=this.view.element.getBoundingClientRect();this.cursor_.index=Math.floor(Be(t.offsetX,0,e.width,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){t.data.point?this.cursor_.index=Math.floor(Be(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length)):this.cursor_.index=-1}onGraphPointerUp_(){this.cursor_.index=-1}}function mr(t){return"format"in t&&!o(t.format)?t.format:Pe(2)}function fr(t){return"view"in t&&"graph"===t.view}const gr={id:"monitor-number",type:"monitor",accept:(t,e)=>{if("number"!=typeof t)return null;const n=A,i=T(e,{format:n.optional.function,lineCount:n.optional.number,max:n.optional.number,min:n.optional.number,view:n.optional.string});return i?{initialValue:t,params:i}:null},binding:{defaultBufferSize:t=>fr(t)?64:1,reader:t=>ye},controller:t=>fr(t.params)?function(t){var e,n,i;return new vr(t.document,{formatter:mr(t.params),lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:ir.defaultLineCount,maxValue:null!==(n="max"in t.params?t.params.max:null)&&void 0!==n?n:100,minValue:null!==(i="min"in t.params?t.params.min:null)&&void 0!==i?i:0,value:t.value,viewProps:t.viewProps})}(t):function(t){var e;return 1===t.value.rawValue.length?new cr(t.document,{formatter:mr(t.params),value:t.value,viewProps:t.viewProps}):new or(t.document,{formatter:mr(t.params),lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:ir.defaultLineCount,value:t.value,viewProps:t.viewProps})}(t)},_r={id:"monitor-string",type:"monitor",accept:(t,e)=>{if("string"!=typeof t)return null;const n=A,i=T(e,{lineCount:n.optional.number,multiline:n.optional.boolean});return i?{initialValue:t,params:i}:null},binding:{reader:t=>Me},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||"multiline"in t.params&&t.params.multiline?new or(t.document,{formatter:Se,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:ir.defaultLineCount,value:n,viewProps:t.viewProps}):new cr(t.document,{formatter:Se,value:n,viewProps:t.viewProps})}};class br{constructor(t){this.onValueChange_=this.onValueChange_.bind(this),this.reader=t.reader,this.writer=t.writer,this.emitter=new h,this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.target=t.target,this.read()}read(){const t=this.target.read();void 0!==t&&(this.value.rawValue=this.reader(t))}write_(t){this.writer(this.target,t)}onValueChange_(t){this.write_(t.rawValue),this.emitter.emit("change",{options:t.options,rawValue:t.rawValue,sender:this})}}class wr{constructor(t){this.onTick_=this.onTick_.bind(this),this.reader_=t.reader,this.target=t.target,this.emitter=new h,this.value=t.value,this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){const t=this.target.read();if(void 0===t)return;const e=this.value.rawValue,n=this.reader_(t);this.value.rawValue=function(t,e){const n=[...Le(t),e];return n.length>t.length?n.splice(0,n.length-t.length):Ae(n,t.length),n}(e,n),this.emitter.emit("update",{rawValue:n,sender:this})}onTick_(t){this.read()}}function xr(t,e){return 0===e?new jt:new Nt(t,null!=e?e:ir.defaultInterval)}class yr{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(t){"blade"===t.type?this.pluginsMap_.blades.unshift(t):"input"===t.type?this.pluginsMap_.inputs.unshift(t):"monitor"===t.type&&this.pluginsMap_.monitors.unshift(t)}createInput(t,e,n){if(o(e.read()))throw new c({context:{key:e.key},type:"nomatchingcontroller"});const i=this.pluginsMap_.inputs.reduce(((i,r)=>i||function(t,e){const n=t.accept(e.target.read(),e.params);if(o(n))return null;const i=A,r={target:e.target,initialValue:n.initialValue,params:n.params},s=t.binding.reader(r),a=t.binding.constraint?t.binding.constraint(r):void 0,l=E(s(n.initialValue),{constraint:a,equals:t.binding.equals}),c=new br({reader:s,target:e.target,value:l,writer:t.binding.writer(r)}),p=i.optional.boolean(e.params.disabled).value,u=i.optional.boolean(e.params.hidden).value,h=t.controller({constraint:a,document:e.document,initialValue:n.initialValue,params:n.params,value:c.value,viewProps:At.create({disabled:p,hidden:u})}),d=i.optional.string(e.params.label).value;return new it(e.document,{binding:c,blade:X(),props:k.fromObject({label:d||e.target.key}),valueController:h})}(r,{document:t,target:e,params:n})),null);if(i)return i;throw new c({context:{key:e.key},type:"nomatchingcontroller"})}createMonitor(t,e,n){const i=this.pluginsMap_.monitors.reduce(((i,r)=>i||function(t,e){var n,i,r;const s=A,a=t.accept(e.target.read(),e.params);if(o(a))return null;const l={target:e.target,initialValue:a.initialValue,params:a.params},c=t.binding.reader(l),p=null!==(i=null!==(n=s.optional.number(e.params.bufferSize).value)&&void 0!==n?n:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(a.params))&&void 0!==i?i:1,u=s.optional.number(e.params.interval).value,h=new wr({reader:c,target:e.target,ticker:xr(e.document,u),value:Te(p)}),d=s.optional.boolean(e.params.disabled).value,v=s.optional.boolean(e.params.hidden).value,m=t.controller({document:e.document,params:a.params,value:h.value,viewProps:At.create({disabled:d,hidden:v})}),f=null!==(r=s.optional.string(e.params.label).value)&&void 0!==r?r:e.target.key;return new st(e.document,{binding:h,blade:X(),props:k.fromObject({label:f}),valueController:m})}(r,{document:t,params:n,target:e})),null);if(i)return i;throw new c({context:{key:e.key},type:"nomatchingcontroller"})}createBlade(t,e){const n=this.pluginsMap_.blades.reduce(((n,i)=>n||function(t,e){const n=t.accept(e.params);if(!n)return null;const i=A.optional.boolean(e.params.disabled).value,r=A.optional.boolean(e.params.hidden).value;return t.controller({blade:X(),document:e.document,params:Object.assign(Object.assign({},n.params),{disabled:i,hidden:r}),viewProps:At.create({disabled:i,hidden:r})})}(i,{document:t,params:e})),null);if(!n)throw new c({type:"nomatchingview",context:{params:e}});return n}createBladeApi(t){if(t instanceof it)return new nt(t);if(t instanceof st)return new rt(t);if(t instanceof ft)return new ct(t,this);const e=this.pluginsMap_.blades.reduce(((e,n)=>e||n.api({controller:t,pool:this})),null);if(!e)throw c.shouldNeverHappen();return e}}class Cr extends e{constructor(t){super(t),this.emitter_=new h,this.controller_.valueController.value.emitter.on("change",(t=>{this.emitter_.emit("change",{event:new i(this,t.rawValue)})}))}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get options(){return this.controller_.valueController.props.get("options")}set options(t){this.controller_.valueController.props.set("options",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}}class Pr extends e{constructor(t){super(t),this.emitter_=new h,this.controller_.valueController.value.emitter.on("change",(t=>{this.emitter_.emit("change",{event:new i(this,t.rawValue)})}))}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(t){this.controller_.valueController.sliderController.props.set("maxValue",t)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(t){this.controller_.valueController.sliderController.props.set("minValue",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}}class Er extends e{constructor(t){super(t),this.emitter_=new h,this.controller_.valueController.value.emitter.on("change",(t=>{this.emitter_.emit("change",{event:new i(this,t.rawValue)})}))}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(t){this.controller_.valueController.props.set("formatter",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}}const kr={id:"list",type:"blade",accept(t){const e=A,n=T(t,{options:e.required.custom(Qe),value:e.required.raw,view:e.required.constant("list"),label:e.optional.string});return n?{params:n}:null},controller(t){const e=new $t(t.document,{props:k.fromObject({options:nn(t.params.options)}),value:E(t.params.value),viewProps:t.viewProps});return new xt(t.document,{blade:t.blade,props:k.fromObject({label:t.params.label}),valueController:e})},api:t=>t.controller instanceof xt&&t.controller.valueController instanceof $t?new Cr(t.controller):null};class Mr extends pt{constructor(t,e){super(t,e)}get element(){return this.controller_.view.element}importPreset(t){(function(t,e){t.forEach((t=>{const n=e[t.presetKey];void 0!==n&&t.write(n)}))})(this.controller_.rackController.rack.find(it).map((t=>t.binding.target)),t),this.refresh()}exportPreset(){return this.controller_.rackController.rack.find(it).map((t=>t.binding.target)).reduce(((t,e)=>Object.assign(t,{[e.presetKey]:e.read()})),{})}refresh(){this.controller_.rackController.rack.find(it).forEach((t=>{t.binding.read()})),this.controller_.rackController.rack.find(st).forEach((t=>{t.binding.read()}))}}class Sr extends bt{constructor(t,e){super(t,{expanded:e.expanded,blade:e.blade,props:e.props,root:!0,viewProps:e.viewProps})}}const Ar={id:"slider",type:"blade",accept(t){const e=A,n=T(t,{max:e.required.number,min:e.required.number,view:e.required.constant("slider"),format:e.optional.function,label:e.optional.string,value:e.optional.number});return n?{params:n}:null},controller(t){var e,n;const i=null!==(e=t.params.value)&&void 0!==e?e:0,r=new Ze(t.document,{baseStep:1,parser:xe,sliderProps:k.fromObject({maxValue:t.params.max,minValue:t.params.min}),textProps:k.fromObject({draggingScale:ln(void 0,i),formatter:null!==(n=t.params.format)&&void 0!==n?n:Ce}),value:E(i),viewProps:t.viewProps});return new xt(t.document,{blade:t.blade,props:k.fromObject({label:t.params.label}),valueController:r})},api:t=>t.controller instanceof xt&&t.controller.valueController instanceof Ze?new Pr(t.controller):null},Tr={id:"text",type:"blade",accept(t){const e=A,n=T(t,{parse:e.required.function,value:e.required.raw,view:e.required.constant("text"),format:e.optional.function,label:e.optional.string});return n?{params:n}:null},controller(t){var e;const n=new ee(t.document,{parser:t.params.parse,props:k.fromObject({formatter:null!==(e=t.params.format)&&void 0!==e?e:t=>String(t)}),value:E(t.params.value),viewProps:t.viewProps});return new xt(t.document,{blade:t.blade,props:k.fromObject({label:t.params.label}),valueController:n})},api:t=>t.controller instanceof xt&&t.controller.valueController instanceof ee?new Er(t.controller):null};function Lr(t,e,n){if(t.querySelector(`style[data-tp-style=${e}]`))return;const i=t.createElement("style");i.dataset.tpStyle=e,i.textContent=n,t.head.appendChild(i)}const Vr=new class{constructor(t){const[e,n]=t.split("-"),i=e.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=null!=n?n:null}toString(){const t=[this.major,this.minor,this.patch].join(".");return null!==this.prerelease?[t,this.prerelease].join("-"):t}}("3.0.5");t.BladeApi=e,t.ButtonApi=u,t.FolderApi=pt,t.InputBindingApi=nt,t.ListApi=Cr,t.MonitorBindingApi=rt,t.Pane=class extends Mr{constructor(t){var e;const n=t||{},i=null!==(e=n.document)&&void 0!==e?e:I().document,r=function(){const t=new yr;return[Ui,$i,er,nr,Ei,_i,gi,fi,hn,pr,_r,gr,W,wt,kt,Bt].forEach((e=>{t.register(e)})),t}();super(new Sr(i,{expanded:n.expanded,blade:X(),props:k.fromObject({title:n.title}),viewProps:At.create()}),r),this.pool_=r,this.containerElem_=n.container||function(t){const e=t.createElement("div");return e.classList.add(v("dfw")()),t.body&&t.body.appendChild(e),e}(i),this.containerElem_.appendChild(this.element),this.doc_=i,this.usesDefaultWrapper_=!n.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw c.alreadyDisposed();return this.doc_}dispose(){const t=this.containerElem_;if(!t)throw c.alreadyDisposed();if(this.usesDefaultWrapper_){const e=t.parentElement;e&&e.removeChild(t)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(t){("plugin"in t?[t.plugin]:"plugins"in t?t.plugins:[]).forEach((t=>{this.pool_.register(t),this.embedPluginStyle_(t)}))}embedPluginStyle_(t){t.css&&Lr(this.document,`plugin-${t.id}`,t.css)}setUpDefaultPlugins_(){Lr(this.document,"default",".tp-lstv_s,.tp-btnv_b,.tp-p2dv_b,.tp-colswv_sw,.tp-p2dpv_p,.tp-txtv_i,.tp-grlv_g,.tp-sglv_i,.tp-mllv_i,.tp-fldv_b,.tp-rotv_b,.tp-ckbv_i,.tp-coltxtv_ms,.tp-tbiv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-lstv_s,.tp-btnv_b,.tp-p2dv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-lstv_s:hover,.tp-btnv_b:hover,.tp-p2dv_b:hover{background-color:var(--btn-bg-h)}.tp-lstv_s:focus,.tp-btnv_b:focus,.tp-p2dv_b:focus{background-color:var(--btn-bg-f)}.tp-lstv_s:active,.tp-btnv_b:active,.tp-p2dv_b:active{background-color:var(--btn-bg-a)}.tp-lstv_s:disabled,.tp-btnv_b:disabled,.tp-p2dv_b:disabled{opacity:0.5}.tp-colswv_sw,.tp-p2dpv_p,.tp-txtv_i{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-colswv_sw:hover,.tp-p2dpv_p:hover,.tp-txtv_i:hover{background-color:var(--in-bg-h)}.tp-colswv_sw:focus,.tp-p2dpv_p:focus,.tp-txtv_i:focus{background-color:var(--in-bg-f)}.tp-colswv_sw:active,.tp-p2dpv_p:active,.tp-txtv_i:active{background-color:var(--in-bg-a)}.tp-colswv_sw:disabled,.tp-p2dpv_p:disabled,.tp-txtv_i:disabled{opacity:0.5}.tp-grlv_g,.tp-sglv_i,.tp-mllv_i{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);width:100%}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono,Source Code Pro,Menlo,Courier,monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, #2f3137);--bs-sh: var(--tp-base-shadow-color, rgba(0,0,0,0.2));--btn-bg: var(--tp-button-background-color, #adafb8);--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, #2f3137);--cnt-bg: var(--tp-container-background-color, rgba(187,188,196,0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187,188,196,0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187,188,196,0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187,188,196,0.15));--cnt-fg: var(--tp-container-foreground-color, #bbbcc4);--in-bg: var(--tp-input-background-color, rgba(0,0,0,0.2));--in-bg-a: var(--tp-input-background-color-active, rgba(0,0,0,0.35));--in-bg-f: var(--tp-input-background-color-focus, rgba(0,0,0,0.3));--in-bg-h: var(--tp-input-background-color-hover, rgba(0,0,0,0.25));--in-fg: var(--tp-input-foreground-color, #bbbcc4);--lbl-fg: var(--tp-label-foreground-color, rgba(187,188,196,0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0,0,0,0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187,188,196,0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(0,0,0,0.2))}.tp-fldv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-rotv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1 * var(--cnt-v-p))}.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-fldv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-rotv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-fldv_c>.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv{margin-left:4px}.tp-fldv_c>.tp-fldv>.tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-fldv_c .tp-fldv>.tp-fldv_c,.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-fldv_c>.tp-tabv>.tp-tabv_i,.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_i{border-top-left-radius:var(--elm-br)}.tp-fldv_c .tp-tabv>.tp-tabv_c,.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-fldv_b,.tp-rotv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:calc(var(--cnt-h-p) + 8px);padding-right:calc(2px * 2 + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-fldv_b:hover,.tp-rotv_b:hover{background-color:var(--cnt-bg-h)}.tp-fldv_b:focus,.tp-rotv_b:focus{background-color:var(--cnt-bg-f)}.tp-fldv_b:active,.tp-rotv_b:active{background-color:var(--cnt-bg-a)}.tp-fldv_b:disabled,.tp-rotv_b:disabled{opacity:0.5}.tp-fldv_m,.tp-rotv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:'';display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px) / 2 - 2px);margin:auto;opacity:0.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m,.tp-rotv.tp-rotv-expanded .tp-rotv_m{transform:none}.tp-fldv_c,.tp-rotv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c,.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c{display:none}.tp-fldv.tp-fldv-expanded>.tp-fldv_c,.tp-rotv.tp-rotv-expanded .tp-rotv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-coltxtv_m,.tp-lstv{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-coltxtv_mm,.tp-lstv_m{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-coltxtv_mm svg,.tp-lstv_m svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-coltxtv_mm svg path,.tp-lstv_m svg path{fill:currentColor}.tp-coltxtv_w,.tp-pndtxtv{display:flex}.tp-coltxtv_c,.tp-pndtxtv_a{width:100%}.tp-coltxtv_c+.tp-coltxtv_c,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-pndtxtv_a{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:0.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1 * var(--cnt-h-p));right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a:before{background-color:var(--grv-fg);content:'';height:2px;left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:0}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us) * 4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0,0,0,0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,0.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,0.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,0.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br)}.tp-colswv.tp-v-disabled{opacity:0.5}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,0.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:'';display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_c{border-left:var(--cnt-bg) solid 4px}.tp-fldv_b:hover+.tp-fldv_c{border-left-color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_c{border-left-color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_c{border-left-color:var(--cnt-bg-a)}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left 0.05s, top 0.05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:0.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:0.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:0.5}.tp-mllv_i{display:block;height:calc(var(--bld-us) * 3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:0.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1 * var(--cnt-h-p));right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sldv.tp-v-disabled{opacity:0.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:'';display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:'';display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:'';display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv.tp-v-disabled{opacity:0.5}.tp-tabv_i{align-items:flex-end;display:flex;overflow:hidden}.tp-tabv.tp-tabv-nop .tp-tabv_i{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_i::before{background-color:var(--cnt-bg);bottom:0;content:'';height:2px;left:0;position:absolute;right:0}.tp-tabv_c{border-left:var(--cnt-bg) solid 4px;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p)}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv::before{background-color:var(--cnt-bg);bottom:0;content:'';height:2px;left:-2px;position:absolute;width:2px}.tp-tbiv_b{background-color:var(--cnt-bg);display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);width:100%}.tp-tbiv_b:hover{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active{background-color:var(--cnt-bg-a)}.tp-tbiv_b:disabled{opacity:0.5}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:0.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:0.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:'';height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:0.1;position:absolute;top:0;transition:border-radius 0.1s, height 0.1s, transform 0.1s, width 0.1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) transparent transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;content:'';font-size:0.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(2px * 2 + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c,.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1 * var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1 * var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_i{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}"),this.pool_.getAll().forEach((t=>{this.embedPluginStyle_(t)})),this.registerPlugin({plugins:[Ar,kr,Bt,Tr]})}},t.SeparatorApi=yt,t.SliderApi=Pr,t.TabApi=zt,t.TabPageApi=Rt,t.TextApi=Er,t.TpChangeEvent=i,t.VERSION=Vr,Object.defineProperty(t,"__esModule",{value:!0})}(e)}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={exports:{}};return t[i].call(s.exports,s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t="#define GLSLIFY 1\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 modelMatrix;\n\nattribute vec3 aPosition;\nattribute vec3 aColor;\n\nvarying vec3 vColor;\n\nvoid main() {\n  vColor = aColor;\n\n  gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(aPosition, 1.0);\n}",e="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 uResolution;\n\nvarying vec3 vColor;\n\nvoid main() {\n  gl_FragColor = vec4(vColor, 1.0);\n}";var i,r=(i=function(t,e){for(var n=["webgl","experimental-webgl","webkit-3d","moz-webgl"],i=null,r=0;r<n.length;++r){try{i=t.getContext(n[r],e)}catch(t){}if(i)break}return i},{create3DContext:i,setupWebGL:(t,e,n)=>{n=n||function(t){var e=document.getElementsByTagName("body")[0];if(e){var n=window.WebGLRenderingContext?'It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org">Click here for more information.</a>':'This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>';t&&(n+="<br/><br/>Status: "+t),e.innerHTML=function(t){return'<div style="margin: auto; width:500px;z-index:10000;margin-top:20em;text-align:center;">'+t+"</div>"}(n)}},t.addEventListener&&t.addEventListener("webglcontextcreationerror",(function(t){n(t.statusMessage)}),!1);var r=i(t,e);return r||(window.WebGLRenderingContext,n("")),r}}),s=function(){var t={enable:{0:!0},disable:{0:!0},getParameter:{0:!0},drawArrays:{0:!0},drawElements:{0:!0,2:!0},createShader:{0:!0},getShaderParameter:{1:!0},getProgramParameter:{1:!0},getVertexAttrib:{1:!0},vertexAttribPointer:{2:!0},bindTexture:{0:!0},activeTexture:{0:!0},getTexParameter:{0:!0,1:!0},texParameterf:{0:!0,1:!0},texParameteri:{0:!0,1:!0,2:!0},texImage2D:{0:!0,2:!0,6:!0,7:!0},texSubImage2D:{0:!0,6:!0,7:!0},copyTexImage2D:{0:!0,2:!0},copyTexSubImage2D:{0:!0},generateMipmap:{0:!0},bindBuffer:{0:!0},bufferData:{0:!0,2:!0},bufferSubData:{0:!0},getBufferParameter:{0:!0,1:!0},pixelStorei:{0:!0,1:!0},readPixels:{4:!0,5:!0},bindRenderbuffer:{0:!0},bindFramebuffer:{0:!0},checkFramebufferStatus:{0:!0},framebufferRenderbuffer:{0:!0,1:!0,2:!0},framebufferTexture2D:{0:!0,1:!0,2:!0},getFramebufferAttachmentParameter:{0:!0,1:!0,2:!0},getRenderbufferParameter:{0:!0,1:!0},renderbufferStorage:{0:!0,1:!0},clear:{0:!0},depthFunc:{0:!0},blendFunc:{0:!0,1:!0},blendFuncSeparate:{0:!0,1:!0,2:!0,3:!0},blendEquation:{0:!0},blendEquationSeparate:{0:!0,1:!0},stencilFunc:{0:!0},stencilFuncSeparate:{0:!0,1:!0},stencilMaskSeparate:{0:!0},stencilOp:{0:!0,1:!0,2:!0},stencilOpSeparate:{0:!0,1:!0,2:!0,3:!0},cullFace:{0:!0},frontFace:{0:!0}},e=null;function n(t){if(null==e)for(var n in e={},t)"number"==typeof t[n]&&(e[t[n]]=n)}function i(){if(null==e)throw"WebGLDebugUtils.init(ctx) not called"}function r(t){i();var n=e[t];return void 0!==n?n:"*UNKNOWN WebGL ENUM (0x"+t.toString(16)+")"}function s(e,n,i){var s=t[e];return void 0!==s&&s[n]?r(i):i.toString()}function o(t){var e=t.getParameter(t.MAX_VERTEX_ATTRIBS),n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n);for(var i=0;i<e;++i)t.disableVertexAttribArray(i),t.vertexAttribPointer(i,4,t.FLOAT,!1,0,0),t.vertexAttrib1f(i,0);t.deleteBuffer(n);var r=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);for(i=0;i<r;++i)t.activeTexture(t.TEXTURE0+i),t.bindTexture(t.TEXTURE_CUBE_MAP,null),t.bindTexture(t.TEXTURE_2D,null);for(t.activeTexture(t.TEXTURE0),t.useProgram(null),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.DITHER),t.disable(t.SCISSOR_TEST),t.blendColor(0,0,0,0),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.clearColor(0,0,0,0),t.clearDepth(1),t.clearStencil(-1),t.colorMask(!0,!0,!0,!0),t.cullFace(t.BACK),t.depthFunc(t.LESS),t.depthMask(!0),t.depthRange(0,1),t.frontFace(t.CCW),t.hint(t.GENERATE_MIPMAP_HINT,t.DONT_CARE),t.lineWidth(1),t.pixelStorei(t.PACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.UNPACK_COLORSPACE_CONVERSION_WEBGL&&t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.BROWSER_DEFAULT_WEBGL),t.polygonOffset(0,0),t.sampleCoverage(1,!1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilMask(4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.viewport(0,0,t.canvas.clientWidth,t.canvas.clientHeight),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT);t.getError(););}return{init:n,mightBeEnum:function(t){return i(),void 0!==e[t]},glEnumToString:r,glFunctionArgToString:s,makeDebugContext:function(t,e){n(t),e=e||function(t,e,n){for(var i,o="",a=0;a<n.length;++a)o+=(0==a?"":", ")+s(e,a,n[a]);i="WebGL error "+r(t)+" in "+e+"("+o+")",window.console&&window.console.log&&window.console.log(i)};var i={};function o(t,n){return function(){var r=t[n].apply(t,arguments),s=t.getError();return 0!=s&&(i[s]=!0,e(s,n,arguments)),r}}var a={};for(var l in t)"function"==typeof t[l]?a[l]=o(t,l):a[l]=t[l];return a.getError=function(){for(var e in i)if(i[e])return i[e]=!1,e;return t.NO_ERROR},a},makeLostContextSimulatingContext:function(t){var e={},n=1,i=!1,r=[],s=void 0,a=void 0,l=void 0,c={};function p(t){for(var e=0;e<t.length;++e){var i=t[e];if((r=i)instanceof WebGLBuffer||r instanceof WebGLFramebuffer||r instanceof WebGLProgram||r instanceof WebGLRenderbuffer||r instanceof WebGLShader||r instanceof WebGLTexture)return i.__webglDebugContextLostId__==n}var r;return!0}function u(t,e){var n=t[e];return function(){if(!i){if(!p(arguments))return void(c[t.INVALID_OPERATION]=!0);var e=n.apply(t,arguments);return e}}}for(var h in t)"function"==typeof t[h]?e[h]=u(t,h):e[h]=t[h];function d(t){return{statusMessage:t}}e.loseContext=function(){if(!i){for(i=!0,++n;t.getError(););!function(){for(var t=Object.keys(c),e=0;e<t.length;++e)delete glErrorShdow_[t]}(),c[t.CONTEXT_LOST_WEBGL]=!0,setTimeout((function(){s&&s(d("context lost"))}),0)}},e.restoreContext=function(){if(i){if(!a)throw"You can not restore the context without a listener";setTimeout((function(){if(function(){for(var e=0;e<r.length;++e){var n=r[e];n instanceof WebGLBuffer?t.deleteBuffer(n):n instanceof WebctxFramebuffer?t.deleteFramebuffer(n):n instanceof WebctxProgram?t.deleteProgram(n):n instanceof WebctxRenderbuffer?t.deleteRenderbuffer(n):n instanceof WebctxShader?t.deleteShader(n):n instanceof WebctxTexture&&t.deleteTexture(n)}}(),o(t),i=!1,a){var e=a;a=l,l=void 0,e(d("context restored"))}}),0)}},e.getError=function(){if(!i)for(;e=t.getError();)c[e]=!0;for(var e in c)if(c[e])return delete c[e],e;return t.NO_ERROR};for(var v=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"],m=0;m<v.length;++m)e[b=v[m]]=function(e){return function(){if(i)return null;var s=e.apply(t,arguments);return s.__webglDebugContextLostId__=n,r.push(s),s}}(t[b]);var f=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"];for(m=0;m<f.length;++m)e[b=f[m]]=function(e){return function(){return i?null:e.apply(t,arguments)}}(e[b]);var g,_=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"];for(m=0;m<_.length;++m){var b;e[b=_[m]]=function(e){return function(){return!i&&e.apply(t,arguments)}}(e[b])}function w(t){return"function"==typeof t?t:function(e){t.handleEvent(e)}}return e.checkFramebufferStatus=(g=e.checkFramebufferStatus,function(){return i?t.FRAMEBUFFER_UNSUPPORTED:g.apply(t,arguments)}),e.getAttribLocation=function(e){return function(){return i?-1:e.apply(t,arguments)}}(e.getAttribLocation),e.getVertexAttribOffset=function(e){return function(){return i?0:e.apply(t,arguments)}}(e.getVertexAttribOffset),e.isContextLost=function(){return i},e.registerOnContextLostListener=function(t){s=w(t)},e.registerOnContextRestoredListener=function(t){i?l=w(t):a=w(t)},e},resetToInitialState:o}}();function o(t,e,n){var i=a(t,t.VERTEX_SHADER,e),r=a(t,t.FRAGMENT_SHADER,n);if(!i||!r)return null;var s=t.createProgram();if(!s)return null;if(t.attachShader(s,i),t.attachShader(s,r),t.linkProgram(s),!t.getProgramParameter(s,t.LINK_STATUS)){var o=t.getProgramInfoLog(s);return console.log("Failed to link program: "+o),t.deleteProgram(s),t.deleteShader(r),t.deleteShader(i),null}return s}function a(t,e,n){var i=t.createShader(e);if(null==i)return console.log("unable to create shader"),null;if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){var r=t.getShaderInfoLog(i);return console.log("Failed to compile shader: "+r),t.deleteShader(i),null}return i}class l{constructor(t){var e=new Float32Array(3);t&&"object"==typeof t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2]),this.elements=e}set(t){var e,n,i;if(i=this.elements,(n=Array.isArray(t)?t:t.elements)!==i){for(e=0;e<3;++e)i[e]=n[e];return this}}add(t){for(var e=0;e<3;e++)this.elements[e]+=t.elements[e];return this}sub(t){for(var e=0;e<3;e++)this.elements[e]-=t.elements[e];return this}div(t){for(var e=0;e<3;e++)this.elements[e]/=t;return this}mul(t){for(var e=0;e<3;e++)this.elements[e]*=t;return this}static dot(t,e){let n=0;for(var i=0;i<3;i++)n+=t.elements[i]*e.elements[i];return n}static cross(t,e){let n=t.elements,i=e.elements,r=n[1]*i[2]-n[2]*i[1],s=-1*(n[0]*i[2]-n[2]*i[0]),o=n[0]*i[1]-n[1]*i[0];return new l([r,s,o])}magnitude(){let t=0;for(var e=0;e<3;e++)t+=this.elements[e]*this.elements[e];return t=Math.sqrt(t),t}normalize(){return this.div(this.magnitude()),this}}class c{constructor(t){var e=new Float32Array(4);t&&"object"==typeof t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),this.elements=e}}class p{constructor(t){var e,n,i;if(t&&"object"==typeof t&&t.hasOwnProperty("elements")){for(n=t.elements,i=new Float32Array(16),e=0;e<16;++e)i[e]=n[e];this.elements=i}else this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}setIdentity(){var t=this.elements;return t[0]=1,t[4]=0,t[8]=0,t[12]=0,t[1]=0,t[5]=1,t[9]=0,t[13]=0,t[2]=0,t[6]=0,t[10]=1,t[14]=0,t[3]=0,t[7]=0,t[11]=0,t[15]=1,this}set(t){var e,n,i;if((n=t.elements)!==(i=this.elements)){for(e=0;e<16;++e)i[e]=n[e];return this}}multiply(t){var e,n,i,r,s,o,a,l;if(n=this.elements,i=this.elements,n===(r=t.elements))for(r=new Float32Array(16),e=0;e<16;++e)r[e]=n[e];for(e=0;e<4;e++)s=i[e],o=i[e+4],a=i[e+8],l=i[e+12],n[e]=s*r[0]+o*r[1]+a*r[2]+l*r[3],n[e+4]=s*r[4]+o*r[5]+a*r[6]+l*r[7],n[e+8]=s*r[8]+o*r[9]+a*r[10]+l*r[11],n[e+12]=s*r[12]+o*r[13]+a*r[14]+l*r[15];return this}concat(t){return this.multiply(t)}multiplyVector3(t){var e=this.elements,n=t.elements,i=new l,r=i.elements;return r[0]=n[0]*e[0]+n[1]*e[4]+n[2]*e[8]+e[12],r[1]=n[0]*e[1]+n[1]*e[5]+n[2]*e[9]+e[13],r[2]=n[0]*e[2]+n[1]*e[6]+n[2]*e[10]+e[14],i}multiplyVector4(t){var e=this.elements,n=t.elements,i=new c,r=i.elements;return r[0]=n[0]*e[0]+n[1]*e[4]+n[2]*e[8]+n[3]*e[12],r[1]=n[0]*e[1]+n[1]*e[5]+n[2]*e[9]+n[3]*e[13],r[2]=n[0]*e[2]+n[1]*e[6]+n[2]*e[10]+n[3]*e[14],r[3]=n[0]*e[3]+n[1]*e[7]+n[2]*e[11]+n[3]*e[15],i}transpose(){var t,e;return e=(t=this.elements)[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setInverseOf(t){var e,n,i,r,s;if(n=t.elements,i=this.elements,(r=new Float32Array(16))[0]=n[5]*n[10]*n[15]-n[5]*n[11]*n[14]-n[9]*n[6]*n[15]+n[9]*n[7]*n[14]+n[13]*n[6]*n[11]-n[13]*n[7]*n[10],r[4]=-n[4]*n[10]*n[15]+n[4]*n[11]*n[14]+n[8]*n[6]*n[15]-n[8]*n[7]*n[14]-n[12]*n[6]*n[11]+n[12]*n[7]*n[10],r[8]=n[4]*n[9]*n[15]-n[4]*n[11]*n[13]-n[8]*n[5]*n[15]+n[8]*n[7]*n[13]+n[12]*n[5]*n[11]-n[12]*n[7]*n[9],r[12]=-n[4]*n[9]*n[14]+n[4]*n[10]*n[13]+n[8]*n[5]*n[14]-n[8]*n[6]*n[13]-n[12]*n[5]*n[10]+n[12]*n[6]*n[9],r[1]=-n[1]*n[10]*n[15]+n[1]*n[11]*n[14]+n[9]*n[2]*n[15]-n[9]*n[3]*n[14]-n[13]*n[2]*n[11]+n[13]*n[3]*n[10],r[5]=n[0]*n[10]*n[15]-n[0]*n[11]*n[14]-n[8]*n[2]*n[15]+n[8]*n[3]*n[14]+n[12]*n[2]*n[11]-n[12]*n[3]*n[10],r[9]=-n[0]*n[9]*n[15]+n[0]*n[11]*n[13]+n[8]*n[1]*n[15]-n[8]*n[3]*n[13]-n[12]*n[1]*n[11]+n[12]*n[3]*n[9],r[13]=n[0]*n[9]*n[14]-n[0]*n[10]*n[13]-n[8]*n[1]*n[14]+n[8]*n[2]*n[13]+n[12]*n[1]*n[10]-n[12]*n[2]*n[9],r[2]=n[1]*n[6]*n[15]-n[1]*n[7]*n[14]-n[5]*n[2]*n[15]+n[5]*n[3]*n[14]+n[13]*n[2]*n[7]-n[13]*n[3]*n[6],r[6]=-n[0]*n[6]*n[15]+n[0]*n[7]*n[14]+n[4]*n[2]*n[15]-n[4]*n[3]*n[14]-n[12]*n[2]*n[7]+n[12]*n[3]*n[6],r[10]=n[0]*n[5]*n[15]-n[0]*n[7]*n[13]-n[4]*n[1]*n[15]+n[4]*n[3]*n[13]+n[12]*n[1]*n[7]-n[12]*n[3]*n[5],r[14]=-n[0]*n[5]*n[14]+n[0]*n[6]*n[13]+n[4]*n[1]*n[14]-n[4]*n[2]*n[13]-n[12]*n[1]*n[6]+n[12]*n[2]*n[5],r[3]=-n[1]*n[6]*n[11]+n[1]*n[7]*n[10]+n[5]*n[2]*n[11]-n[5]*n[3]*n[10]-n[9]*n[2]*n[7]+n[9]*n[3]*n[6],r[7]=n[0]*n[6]*n[11]-n[0]*n[7]*n[10]-n[4]*n[2]*n[11]+n[4]*n[3]*n[10]+n[8]*n[2]*n[7]-n[8]*n[3]*n[6],r[11]=-n[0]*n[5]*n[11]+n[0]*n[7]*n[9]+n[4]*n[1]*n[11]-n[4]*n[3]*n[9]-n[8]*n[1]*n[7]+n[8]*n[3]*n[5],r[15]=n[0]*n[5]*n[10]-n[0]*n[6]*n[9]-n[4]*n[1]*n[10]+n[4]*n[2]*n[9]+n[8]*n[1]*n[6]-n[8]*n[2]*n[5],0==(s=n[0]*r[0]+n[1]*r[4]+n[2]*r[8]+n[3]*r[12]))return this;for(s=1/s,e=0;e<16;e++)i[e]=r[e]*s;return this}invert(){return this.setInverseOf(this)}setOrtho(t,e,n,i,r,s){var o,a,l,c;if(t===e||n===i||r===s)throw"null frustum";return a=1/(e-t),l=1/(i-n),c=1/(s-r),(o=this.elements)[0]=2*a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2*l,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=-2*c,o[11]=0,o[12]=-(e+t)*a,o[13]=-(i+n)*l,o[14]=-(s+r)*c,o[15]=1,this}ortho(t,e,n,i,r,s){return this.concat((new p).setOrtho(t,e,n,i,r,s))}setFrustum(t,e,n,i,r,s){var o,a,l,c;if(t===e||i===n||r===s)throw"null frustum";if(r<=0)throw"near <= 0";if(s<=0)throw"far <= 0";return a=1/(e-t),l=1/(i-n),c=1/(s-r),(o=this.elements)[0]=2*r*a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2*r*l,o[6]=0,o[7]=0,o[8]=(e+t)*a,o[9]=(i+n)*l,o[10]=-(s+r)*c,o[11]=-1,o[12]=0,o[13]=0,o[14]=-2*r*s*c,o[15]=0,this}frustum(t,e,n,i,r,s){return this.concat((new p).setFrustum(t,e,n,i,r,s))}setPerspective(t,e,n,i){var r,s,o,a;if(n===i||0===e)throw"null frustum";if(n<=0)throw"near <= 0";if(i<=0)throw"far <= 0";if(t=Math.PI*t/180/2,0===(o=Math.sin(t)))throw"null frustum";return s=1/(i-n),a=Math.cos(t)/o,(r=this.elements)[0]=a/e,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=-(i+n)*s,r[11]=-1,r[12]=0,r[13]=0,r[14]=-2*n*i*s,r[15]=0,this}perspective(t,e,n,i){return this.concat((new p).setPerspective(t,e,n,i))}setScale(t,e,n){var i=this.elements;return i[0]=t,i[4]=0,i[8]=0,i[12]=0,i[1]=0,i[5]=e,i[9]=0,i[13]=0,i[2]=0,i[6]=0,i[10]=n,i[14]=0,i[3]=0,i[7]=0,i[11]=0,i[15]=1,this}scale(t,e,n){var i=this.elements;return i[0]*=t,i[4]*=e,i[8]*=n,i[1]*=t,i[5]*=e,i[9]*=n,i[2]*=t,i[6]*=e,i[10]*=n,i[3]*=t,i[7]*=e,i[11]*=n,this}setTranslate(t,e,n){var i=this.elements;return i[0]=1,i[4]=0,i[8]=0,i[12]=t,i[1]=0,i[5]=1,i[9]=0,i[13]=e,i[2]=0,i[6]=0,i[10]=1,i[14]=n,i[3]=0,i[7]=0,i[11]=0,i[15]=1,this}translate(t,e,n){var i=this.elements;return i[12]+=i[0]*t+i[4]*e+i[8]*n,i[13]+=i[1]*t+i[5]*e+i[9]*n,i[14]+=i[2]*t+i[6]*e+i[10]*n,i[15]+=i[3]*t+i[7]*e+i[11]*n,this}setRotate(t,e,n,i){var r,s,o,a,l,c,p,u,h,d,v,m;return t=Math.PI*t/180,r=this.elements,s=Math.sin(t),o=Math.cos(t),0!==e&&0===n&&0===i?(e<0&&(s=-s),r[0]=1,r[4]=0,r[8]=0,r[12]=0,r[1]=0,r[5]=o,r[9]=-s,r[13]=0,r[2]=0,r[6]=s,r[10]=o,r[14]=0,r[3]=0,r[7]=0,r[11]=0,r[15]=1):0===e&&0!==n&&0===i?(n<0&&(s=-s),r[0]=o,r[4]=0,r[8]=s,r[12]=0,r[1]=0,r[5]=1,r[9]=0,r[13]=0,r[2]=-s,r[6]=0,r[10]=o,r[14]=0,r[3]=0,r[7]=0,r[11]=0,r[15]=1):0===e&&0===n&&0!==i?(i<0&&(s=-s),r[0]=o,r[4]=-s,r[8]=0,r[12]=0,r[1]=s,r[5]=o,r[9]=0,r[13]=0,r[2]=0,r[6]=0,r[10]=1,r[14]=0,r[3]=0,r[7]=0,r[11]=0,r[15]=1):(1!==(a=Math.sqrt(e*e+n*n+i*i))&&(e*=l=1/a,n*=l,i*=l),c=1-o,p=e*n,u=n*i,h=i*e,d=e*s,v=n*s,m=i*s,r[0]=e*e*c+o,r[1]=p*c+m,r[2]=h*c-v,r[3]=0,r[4]=p*c-m,r[5]=n*n*c+o,r[6]=u*c+d,r[7]=0,r[8]=h*c+v,r[9]=u*c-d,r[10]=i*i*c+o,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1),this}rotate=function(t,e,n,i){return this.concat((new p).setRotate(t,e,n,i))};setLookAt(t,e,n,i,r,s,o,a,l){var c,p,u,h,d,v,m,f,g,_,b,w;return p=i-t,u=r-e,h=s-n,v=(u*=d=1/Math.sqrt(p*p+u*u+h*h))*l-(h*=d)*a,m=h*o-(p*=d)*l,f=p*a-u*o,_=(m*=g=1/Math.sqrt(v*v+m*m+f*f))*h-(f*=g)*u,b=f*p-(v*=g)*h,w=v*u-m*p,(c=this.elements)[0]=v,c[1]=_,c[2]=-p,c[3]=0,c[4]=m,c[5]=b,c[6]=-u,c[7]=0,c[8]=f,c[9]=w,c[10]=-h,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,this.translate(-t,-e,-n)}lookAt(t,e,n,i,r,s,o,a,l){return this.concat((new p).setLookAt(t,e,n,i,r,s,o,a,l))}dropShadow(t,e){var n=new p,i=n.elements,r=t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3];return i[0]=r-e[0]*t[0],i[1]=-e[1]*t[0],i[2]=-e[2]*t[0],i[3]=-e[3]*t[0],i[4]=-e[0]*t[1],i[5]=r-e[1]*t[1],i[6]=-e[2]*t[1],i[7]=-e[3]*t[1],i[8]=-e[0]*t[2],i[9]=-e[1]*t[2],i[10]=r-e[2]*t[2],i[11]=-e[3]*t[2],i[12]=-e[0]*t[3],i[13]=-e[1]*t[3],i[14]=-e[2]*t[3],i[15]=r-e[3]*t[3],this.concat(n)}dropShadowDirectionally=function(t,e,n,i,r,s,o,a,l){var c=i*t+r*e+s*n;return this.dropShadow([t,e,n,-c],[o,a,l,0])}}let u=new p,h=new p,d=new p;new p,(new p).setScale(1,1,1);class v{constructor(t,e,n){Array.isArray(t)?this.value=new Float32Array(t):this.value=t,this.countPerVertex=e,this.name=n,this.buffer=null,this.location=null}}class m{constructor(t,e,n){Array.isArray(t)?this.value=new Float32Array(t):this.value=null===t?new Float32Array(e):t,this.count=e,this.type=n,this.location=null}}class f{constructor({position:t=[0,0,0],rotation:e=[0,0,0],scale:n=[1,1,1]}){this.type="Object3D",this.position=new l(t),this.scale=new l(n),this.rotation=new l(e),this.scaleMatrix=new p,this.rotationMatrix=new p,this.translationMatrix=new p,this.parent=null,this.children=[],this.matrix=new p,this.matrixWorld=new p,this.renderMatrix=new p,this.up=new l([0,1,0]),this.drawMode="static",this.drawType="triangles",this.visible=!1,this.transparent=!1,this.attributes=[],this.uniforms={uMouse:new m(null,2,"vec2"),uTime:new m(null,1,"float"),uResolution:new m(null,2,"vec2"),viewMatrix:new m(null,16,"mat4"),projectionMatrix:new m(null,16,"mat4"),modelMatrix:new m(null,16,"mat4"),uColor:new m(new Float32Array([1,1,1]),3,"vec3")},this.indices=[],this.indexBuffer=null,this.indexLocation=null,this.userData={},this.program=null,this.autoUpdateMatrix=!0,this.calculateScaleMatrix(),this.calculateRotationMatrix(),this.calculateTranslationMatrix(),this.recalculateMatrix()}add(t){if(Array.isArray(t)&&t.length>0)for(let e of t)this.add(e);else this.children.push(t),t.parent=this}remove(t){let e=this.children.indexOf(t);t.parent=null,this.children.splice(e,1)}getAlphaOrderedChildren(){return this.children.sort(((t,e)=>t.transparent?1:-1))}setPosition(t,e,n){if(Array.isArray(t))for(let e=0;e<3;e++)this.position.elements[e]=t[e];else t.elements?this.position.set(t):(this.position.elements[0]=t,this.position.elements[1]=e,this.position.elements[2]=n);this.calculateTranslationMatrix()}getPosition(){return[...this.position.elements]}setScale(t,e,n){if(Array.isArray(t))for(let e=0;e<3;e++)this.scale.elements[e]=t[e];else t.elements?this.scale.set(t):(this.scale.elements[0]=t,this.scale.elements[1]=e,this.scale.elements[2]=n);this.calculateScaleMatrix()}getScale(){return[...this.scale.elements]}setRotation(t,e,n){if(Array.isArray(t))for(let e=0;e<3;e++)this.rotation.elements[e]=t[e];else t.elements?this.rotation.set(t):(this.rotation.elements[0]=t,this.rotation.elements[1]=e,this.rotation.elements[2]=n);this.calculateRotationMatrix()}getRotation(){return[...this.rotation.elements]}setUpDirection(t,e,n){if(Array.isArray(t))for(let e=0;e<3;e++)this.up.elements[e]=t[e];else t.elements?this.up.set(t):(this.up.elements[0]=t,this.up.elements[1]=e,this.up.elements[2]=n)}getUpDirection(){return[...this.up.elements]}setShaderProgram(t,e,n){this.program=o(t,e,n),this.program||console.warn(`Failed to compile program for ${this}`)}traverse(t){t(this);for(let e of this.getAlphaOrderedChildren())e.traverse(t)}setColor(t,e,n){if(Array.isArray(t))for(let e=0;e<3;e++)this.uniforms.uColor.value[e]=t[e];else t.elements?this.uniforms.uColor.value.set(t):(this.uniforms.uColor.value[0]=t,this.uniforms.uColor.value[1]=e,this.uniforms.uColor.value[2]=n)}calculateScaleMatrix(){this.scaleMatrix.setScale(...this.scale.elements)}calculateRotationMatrix(){this.rotationMatrix.setRotate(this.rotation.elements[0],1,0,0),this.rotationMatrix.rotate(this.rotation.elements[1],0,1,0),this.rotationMatrix.rotate(this.rotation.elements[2],0,0,1)}calculateTranslationMatrix(){this.translationMatrix.setTranslate(...this.position.elements)}getScaleMatrix(){return u.set(this.scaleMatrix)}getRotationMatrix(){return h.set(this.rotationMatrix)}getTranslationMatrix(){return d.set(this.translationMatrix)}getMatrix(){return this.calculateMatrix(),this.matrix}getMatrixWorld(){return this.calculateWorldMatrix(),this.matrixWorld}calculateMatrix(){this.matrix.set(this.translationMatrix).multiply(this.rotationMatrix).multiply(this.scaleMatrix)}calculateWorldMatrix(){null!==this.parent?this.matrixWorld.set(this.parent.getMatrixWorld()).multiply(this.translationMatrix).multiply(this.rotationMatrix):this.matrixWorld.set(this.translationMatrix).multiply(this.rotationMatrix)}recalculateMatrix(){this.autoUpdateMatrix&&this.calculateMatrix(),this.calculateWorldMatrix(),this.renderMatrix.set(this.matrixWorld).multiply(this.scaleMatrix),this.uniforms.modelMatrix.value.set(this.renderMatrix.elements)}}class g extends f{constructor({position:t=[0,0,0],rotation:e=[0,0,0],scale:n=[1,1,1],width:i=1,height:r=1,widthSegments:s=1,heightSegments:o=1}){super({position:t,scale:n,rotation:e}),this.type="plane",this.drawType="triangles",this.visible=!0;let a=i/2,l=r/2,c=i/s,p=r/o,u=[],h=[];for(let t=0;t<o+1;t++){var d=t*p-l;for(let t=0;t<s+1;t++){let e=t*c-a;u.push(e,-d,0)}}for(let t=0;t<o;t++)for(let e=0;e<s;e++){let n=t+(s+1)*e,i=t+(s+1)*(e+1),r=t+1+(s+1)*(e+1),o=t+1+(s+1)*e;h.push(n,i,o),h.push(i,r,o)}this.attributes.push(new v(u,3,"aPosition")),this.indices=new Uint8Array(h)}}var _=n(466),b=n.n(_),w=n(498);function x(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var C,P,E,k,M,S,A,T,L,V,D,R,z,O,I,F,B,j,N,U,K,G,q,Y,H,W,$,X,Z={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},J={duration:.5,overwrite:!1,delay:0},Q=1e8,tt=1e-8,et=2*Math.PI,nt=et/4,it=0,rt=Math.sqrt,st=Math.cos,ot=Math.sin,at=function(t){return"string"==typeof t},lt=function(t){return"function"==typeof t},ct=function(t){return"number"==typeof t},pt=function(t){return void 0===t},ut=function(t){return"object"==typeof t},ht=function(t){return!1!==t},dt=function(){return"undefined"!=typeof window},vt=function(t){return lt(t)||at(t)},mt="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},ft=Array.isArray,gt=/(?:-?\.?\d|\.)+/gi,_t=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,bt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,wt=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,xt=/[+-]=-?[.\d]+/,yt=/[^,'"\[\]\s]+/gi,Ct=/[\d.+\-=]+(?:e[-+]\d*)*/i,Pt={},Et={},kt=function(t){return(Et=Jt(t,Pt))&&Bn},Mt=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},St=function(t,e){return!e&&console.warn(t)},At=function(t,e){return t&&(Pt[t]=e)&&Et&&(Et[t]=e)||Pt},Tt=function(){return 0},Lt={},Vt=[],Dt={},Rt={},zt={},Ot=30,It=[],Ft="",Bt=function(t){var e,n,i=t[0];if(ut(i)||lt(i)||(t=[t]),!(e=(i._gsap||{}).harness)){for(n=It.length;n--&&!It[n].targetTest(i););e=It[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new pn(t[n],e)))||t.splice(n,1);return t},jt=function(t){return t._gsap||Bt(Se(t))[0]._gsap},Nt=function(t,e,n){return(n=t[e])&&lt(n)?t[e]():pt(n)&&t.getAttribute&&t.getAttribute(e)||n},Ut=function(t,e){return(t=t.split(",")).forEach(e)||t},Kt=function(t){return Math.round(1e5*t)/1e5||0},Gt=function(t){return Math.round(1e7*t)/1e7||0},qt=function(t,e){for(var n=e.length,i=0;t.indexOf(e[i])<0&&++i<n;);return i<n},Yt=function(){var t,e,n=Vt.length,i=Vt.slice(0);for(Dt={},Vt.length=0,t=0;t<n;t++)(e=i[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},Ht=function(t,e,n,i){Vt.length&&Yt(),t.render(e,n,i),Vt.length&&Yt()},Wt=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(yt).length<2?e:at(t)?t.trim():t},$t=function(t){return t},Xt=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},Zt=function(t,e){for(var n in e)n in t||"duration"===n||"ease"===n||(t[n]=e[n])},Jt=function(t,e){for(var n in e)t[n]=e[n];return t},Qt=function t(e,n){for(var i in n)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(e[i]=ut(n[i])?t(e[i]||(e[i]={}),n[i]):n[i]);return e},te=function(t,e){var n,i={};for(n in t)n in e||(i[n]=t[n]);return i},ee=function(t){var e=t.parent||P,n=t.keyframes?Zt:Xt;if(ht(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent||e._dp;return t},ne=function(t,e,n,i){void 0===n&&(n="_first"),void 0===i&&(i="_last");var r=e._prev,s=e._next;r?r._next=s:t[n]===e&&(t[n]=s),s?s._prev=r:t[i]===e&&(t[i]=r),e._next=e._prev=e.parent=null},ie=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},re=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},se=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},oe=function t(e){return!e||e._ts&&t(e.parent)},ae=function(t){return t._repeat?le(t._tTime,t=t.duration()+t._rDelay)*t:0},le=function(t,e){var n=Math.floor(t/=e);return t&&n===t?n-1:n},ce=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},pe=function(t){return t._end=Gt(t._start+(t._tDur/Math.abs(t._ts||t._rts||tt)||0))},ue=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=Gt(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),pe(t),n._dirty||re(n,t)),t},he=function(t,e){var n;if((e._time||e._initted&&!e._dur)&&(n=ce(t.rawTime(),e),(!e._dur||Pe(0,e.totalDuration(),n)-e._tTime>tt)&&e.render(n,!0)),re(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-1e-8}},de=function(t,e,n,i){return e.parent&&ie(e),e._start=Gt((ct(n)?n:n||t!==P?xe(t,n,e):t._time)+e._delay),e._end=Gt(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),function(t,e,n,i,r){void 0===n&&(n="_first"),void 0===i&&(i="_last");var s,o=t[i];if(r)for(s=e[r];o&&o[r]>s;)o=o._prev;o?(e._next=o._next,o._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[i]=e,e._prev=o,e.parent=e._dp=t}(t,e,"_first","_last",t._sort?"_start":0),ge(e)||(t._recent=e),i||he(t,e),t},ve=function(t,e){return(Pt.ScrollTrigger||Mt("scrollTrigger",e))&&Pt.ScrollTrigger.create(e,t)},me=function(t,e,n,i){return gn(t,e),t._initted?!n&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&A!==Xe.frame?(Vt.push(t),t._lazy=[e,i],1):void 0:1},fe=function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))},ge=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},_e=function(t,e,n,i){var r=t._repeat,s=Gt(e)||0,o=t._tTime/t._tDur;return o&&!i&&(t._time*=s/t._dur),t._dur=s,t._tDur=r?r<0?1e10:Gt(s*(r+1)+t._rDelay*r):s,o&&!i?ue(t,t._tTime=t._tDur*o):t.parent&&pe(t),n||re(t.parent,t),t},be=function(t){return t instanceof hn?re(t):_e(t,t._dur)},we={_start:0,endTime:Tt,totalDuration:Tt},xe=function t(e,n,i){var r,s,o,a=e.labels,l=e._recent||we,c=e.duration()>=Q?l.endTime(!1):e._dur;return at(n)&&(isNaN(n)||n in a)?(s=n.charAt(0),o="%"===n.substr(-1),r=n.indexOf("="),"<"===s||">"===s?(r>=0&&(n=n.replace(/=/,"")),("<"===s?l._start:l.endTime(l._repeat>=0))+(parseFloat(n.substr(1))||0)*(o?(r<0?l:i).totalDuration()/100:1)):r<0?(n in a||(a[n]=c),a[n]):(s=parseFloat(n.charAt(r-1)+n.substr(r+1)),o&&i&&(s=s/100*(ft(i)?i[0]:i).totalDuration()),r>1?t(e,n.substr(0,r-1),i)+s:c+s)):null==n?c:+n},ye=function(t,e,n){var i,r,s=ct(e[1]),o=(s?2:1)+(t<2?0:1),a=e[o];if(s&&(a.duration=e[1]),a.parent=n,t){for(i=a,r=n;r&&!("immediateRender"in i);)i=r.vars.defaults||{},r=ht(r.vars.inherit)&&r.parent;a.immediateRender=ht(i.immediateRender),t<2?a.runBackwards=1:a.startAt=e[o-1]}return new xn(e[0],a,e[o+1])},Ce=function(t,e){return t||0===t?e(t):e},Pe=function(t,e,n){return n<t?t:n>e?e:n},Ee=function(t){if("string"!=typeof t)return"";var e=Ct.exec(t);return e?t.substr(e.index+e[0].length):""},ke=[].slice,Me=function(t,e){return t&&ut(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&ut(t[0]))&&!t.nodeType&&t!==E},Se=function(t,e,n){return!at(t)||n||!k&&Ze()?ft(t)?function(t,e,n){return void 0===n&&(n=[]),t.forEach((function(t){var i;return at(t)&&!e||Me(t,1)?(i=n).push.apply(i,Se(t)):n.push(t)}))||n}(t,n):Me(t)?ke.call(t,0):t?[t]:[]:ke.call((e||M).querySelectorAll(t),0)},Ae=function(t){return t.sort((function(){return.5-Math.random()}))},Te=function(t){if(lt(t))return t;var e=ut(t)?t:{each:t},n=sn(e.ease),i=e.from||0,r=parseFloat(e.base)||0,s={},o=i>0&&i<1,a=isNaN(i)||o,l=e.axis,c=i,p=i;return at(i)?c=p={center:.5,edges:.5,end:1}[i]||0:!o&&a&&(c=i[0],p=i[1]),function(t,o,u){var h,d,v,m,f,g,_,b,w,x=(u||e).length,y=s[x];if(!y){if(!(w="auto"===e.grid?0:(e.grid||[1,Q])[1])){for(_=-Q;_<(_=u[w++].getBoundingClientRect().left)&&w<x;);w--}for(y=s[x]=[],h=a?Math.min(w,x)*c-.5:i%w,d=a?x*p/w-.5:i/w|0,_=0,b=Q,g=0;g<x;g++)v=g%w-h,m=d-(g/w|0),y[g]=f=l?Math.abs("y"===l?m:v):rt(v*v+m*m),f>_&&(_=f),f<b&&(b=f);"random"===i&&Ae(y),y.max=_-b,y.min=b,y.v=x=(parseFloat(e.amount)||parseFloat(e.each)*(w>x?x-1:l?"y"===l?x/w:w:Math.max(w,x/w))||0)*("edges"===i?-1:1),y.b=x<0?r-x:r,y.u=Ee(e.amount||e.each)||0,n=n&&x<0?nn(n):n}return x=(y[t]-y.min)/y.max||0,Gt(y.b+(n?n(x):x)*y.v)+y.u}},Le=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var i=Math.round(parseFloat(n)/t)*t*e;return(i-i%1)/e+(ct(n)?0:Ee(n))}},Ve=function(t,e){var n,i,r=ft(t);return!r&&ut(t)&&(n=r=t.radius||Q,t.values?(t=Se(t.values),(i=!ct(t[0]))&&(n*=n)):t=Le(t.increment)),Ce(e,r?lt(t)?function(e){return i=t(e),Math.abs(i-e)<=n?i:e}:function(e){for(var r,s,o=parseFloat(i?e.x:e),a=parseFloat(i?e.y:0),l=Q,c=0,p=t.length;p--;)(r=i?(r=t[p].x-o)*r+(s=t[p].y-a)*s:Math.abs(t[p]-o))<l&&(l=r,c=p);return c=!n||l<=n?t[c]:e,i||c===e||ct(e)?c:c+Ee(e)}:Le(t))},De=function(t,e,n,i){return Ce(ft(t)?!e:!0===n?!!(n=0):!i,(function(){return ft(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+.99*n))/n)*n*i)/i}))},Re=function(t,e,n){return Ce(n,(function(n){return t[~~e(n)]}))},ze=function(t){for(var e,n,i,r,s=0,o="";~(e=t.indexOf("random(",s));)i=t.indexOf(")",e),r="["===t.charAt(e+7),n=t.substr(e+7,i-e-7).match(r?yt:gt),o+=t.substr(s,e-s)+De(r?n:+n[0],r?0:+n[1],+n[2]||1e-5),s=i+1;return o+t.substr(s,t.length-s)},Oe=function(t,e,n,i,r){var s=e-t,o=i-n;return Ce(r,(function(e){return n+((e-t)/s*o||0)}))},Ie=function(t,e,n){var i,r,s,o=t.labels,a=Q;for(i in o)(r=o[i]-e)<0==!!n&&r&&a>(r=Math.abs(r))&&(s=i,a=r);return s},Fe=function(t,e,n){var i,r,s=t.vars,o=s[e];if(o)return i=s[e+"Params"],r=s.callbackScope||t,n&&Vt.length&&Yt(),i?o.apply(r,i):o.call(r)},Be=function(t){return ie(t),t.scrollTrigger&&t.scrollTrigger.kill(!1),t.progress()<1&&Fe(t,"onInterrupt"),t},je=function(t){var e=(t=!t.name&&t.default||t).name,n=lt(t),i=e&&!n&&t.init?function(){this._props=[]}:t,r={init:Tt,render:Tn,add:mn,kill:Vn,modifier:Ln,rawVars:0},s={targetTest:0,get:0,getSetter:kn,aliases:{},register:0};if(Ze(),t!==i){if(Rt[e])return;Xt(i,Xt(te(t,r),s)),Jt(i.prototype,Jt(r,te(t,s))),Rt[i.prop=e]=i,t.targetTest&&(It.push(i),Lt[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}At(e,i),t.register&&t.register(Bn,i,zn)},Ne=255,Ue={aqua:[0,Ne,Ne],lime:[0,Ne,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ne],navy:[0,0,128],white:[Ne,Ne,Ne],olive:[128,128,0],yellow:[Ne,Ne,0],orange:[Ne,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ne,0,0],pink:[Ne,192,203],cyan:[0,Ne,Ne],transparent:[Ne,Ne,Ne,0]},Ke=function(t,e,n){return(6*(t=t<0?t+1:t>1?t-1:t)<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)*Ne+.5|0},Ge=function(t,e,n){var i,r,s,o,a,l,c,p,u,h,d=t?ct(t)?[t>>16,t>>8&Ne,t&Ne]:0:Ue.black;if(!d){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),Ue[t])d=Ue[t];else if("#"===t.charAt(0)){if(t.length<6&&(i=t.charAt(1),r=t.charAt(2),s=t.charAt(3),t="#"+i+i+r+r+s+s+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(d=parseInt(t.substr(1,6),16))>>16,d>>8&Ne,d&Ne,parseInt(t.substr(7),16)/255];d=[(t=parseInt(t.substr(1),16))>>16,t>>8&Ne,t&Ne]}else if("hsl"===t.substr(0,3))if(d=h=t.match(gt),e){if(~t.indexOf("="))return d=t.match(_t),n&&d.length<4&&(d[3]=1),d}else o=+d[0]%360/360,a=+d[1]/100,i=2*(l=+d[2]/100)-(r=l<=.5?l*(a+1):l+a-l*a),d.length>3&&(d[3]*=1),d[0]=Ke(o+1/3,i,r),d[1]=Ke(o,i,r),d[2]=Ke(o-1/3,i,r);else d=t.match(gt)||Ue.transparent;d=d.map(Number)}return e&&!h&&(i=d[0]/Ne,r=d[1]/Ne,s=d[2]/Ne,l=((c=Math.max(i,r,s))+(p=Math.min(i,r,s)))/2,c===p?o=a=0:(u=c-p,a=l>.5?u/(2-c-p):u/(c+p),o=c===i?(r-s)/u+(r<s?6:0):c===r?(s-i)/u+2:(i-r)/u+4,o*=60),d[0]=~~(o+.5),d[1]=~~(100*a+.5),d[2]=~~(100*l+.5)),n&&d.length<4&&(d[3]=1),d},qe=function(t){var e=[],n=[],i=-1;return t.split(He).forEach((function(t){var r=t.match(bt)||[];e.push.apply(e,r),n.push(i+=r.length+1)})),e.c=n,e},Ye=function(t,e,n){var i,r,s,o,a="",l=(t+a).match(He),c=e?"hsla(":"rgba(",p=0;if(!l)return t;if(l=l.map((function(t){return(t=Ge(t,e,1))&&c+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),n&&(s=qe(t),(i=n.c).join(a)!==s.c.join(a)))for(o=(r=t.replace(He,"1").split(bt)).length-1;p<o;p++)a+=r[p]+(~i.indexOf(p)?l.shift()||c+"0,0,0,0)":(s.length?s:l.length?l:n).shift());if(!r)for(o=(r=t.split(He)).length-1;p<o;p++)a+=r[p]+l[p];return a+r[o]},He=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in Ue)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),We=/hsl[a]?\(/,$e=function(t){var e,n=t.join(" ");if(He.lastIndex=0,He.test(n))return e=We.test(n),t[1]=Ye(t[1],e),t[0]=Ye(t[0],e,qe(t[1])),!0},Xe=(F=Date.now,B=500,j=33,N=F(),U=N,G=K=1e3/240,Y=function t(e){var n,i,r,s,o=F()-U,a=!0===e;if(o>B&&(N+=o-j),((n=(r=(U+=o)-N)-G)>0||a)&&(s=++z.frame,O=r-1e3*z.time,z.time=r/=1e3,G+=n+(n>=K?4:K-n),i=1),a||(V=D(t)),i)for(I=0;I<q.length;I++)q[I](r,O,s,e)},z={time:0,frame:0,tick:function(){Y(!0)},deltaRatio:function(t){return O/(1e3/(t||60))},wake:function(){S&&(!k&&dt()&&(E=k=window,M=E.document||{},Pt.gsap=Bn,(E.gsapVersions||(E.gsapVersions=[])).push(Bn.version),kt(Et||E.GreenSockGlobals||!E.gsap&&E||{}),R=E.requestAnimationFrame),V&&z.sleep(),D=R||function(t){return setTimeout(t,G-1e3*z.time+1|0)},L=1,Y(2))},sleep:function(){(R?E.cancelAnimationFrame:clearTimeout)(V),L=0,D=Tt},lagSmoothing:function(t,e){B=t||1e8,j=Math.min(e,B,0)},fps:function(t){K=1e3/(t||240),G=1e3*z.time+K},add:function(t){q.indexOf(t)<0&&q.push(t),Ze()},remove:function(t){var e;~(e=q.indexOf(t))&&q.splice(e,1)&&I>=e&&I--},_listeners:q=[]}),Ze=function(){return!L&&Xe.wake()},Je={},Qe=/^[\d.\-M][\d.\-,\s]/,tn=/["']/g,en=function(t){for(var e,n,i,r={},s=t.substr(1,t.length-3).split(":"),o=s[0],a=1,l=s.length;a<l;a++)n=s[a],e=a!==l-1?n.lastIndexOf(","):n.length,i=n.substr(0,e),r[o]=isNaN(i)?i.replace(tn,"").trim():+i,o=n.substr(e+1).trim();return r},nn=function(t){return function(e){return 1-t(1-e)}},rn=function t(e,n){for(var i,r=e._first;r;)r instanceof hn?t(r,n):!r.vars.yoyoEase||r._yoyo&&r._repeat||r._yoyo===n||(r.timeline?t(r.timeline,n):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=n)),r=r._next},sn=function(t,e){return t&&(lt(t)?t:Je[t]||function(t){var e,n,i,r,s=(t+"").split("("),o=Je[s[0]];return o&&s.length>1&&o.config?o.config.apply(null,~t.indexOf("{")?[en(s[1])]:(e=t,n=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",n),e.substring(n,~r&&r<i?e.indexOf(")",i+1):i)).split(",").map(Wt)):Je._CE&&Qe.test(t)?Je._CE("",t):o}(t))||e},on=function(t,e,n,i){void 0===n&&(n=function(t){return 1-e(1-t)}),void 0===i&&(i=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var r,s={easeIn:e,easeOut:n,easeInOut:i};return Ut(t,(function(t){for(var e in Je[t]=Pt[t]=s,Je[r=t.toLowerCase()]=n,s)Je[r+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=Je[t+"."+e]=s[e]})),s},an=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},ln=function t(e,n,i){var r=n>=1?n:1,s=(i||(e?.3:.45))/(n<1?n:1),o=s/et*(Math.asin(1/r)||0),a=function(t){return 1===t?1:r*Math.pow(2,-10*t)*ot((t-o)*s)+1},l="out"===e?a:"in"===e?function(t){return 1-a(1-t)}:an(a);return s=et/s,l.config=function(n,i){return t(e,n,i)},l},cn=function t(e,n){void 0===n&&(n=1.70158);var i=function(t){return t?--t*t*((n+1)*t+n)+1:0},r="out"===e?i:"in"===e?function(t){return 1-i(1-t)}:an(i);return r.config=function(n){return t(e,n)},r};Ut("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var n=e<5?e+1:e;on(t+",Power"+(n-1),e?function(t){return Math.pow(t,n)}:function(t){return t},(function(t){return 1-Math.pow(1-t,n)}),(function(t){return t<.5?Math.pow(2*t,n)/2:1-Math.pow(2*(1-t),n)/2}))})),Je.Linear.easeNone=Je.none=Je.Linear.easeIn,on("Elastic",ln("in"),ln("out"),ln()),H=7.5625,$=1/(W=2.75),on("Bounce",(function(t){return 1-X(1-t)}),X=function(t){return t<$?H*t*t:t<.7272727272727273?H*Math.pow(t-1.5/W,2)+.75:t<.9090909090909092?H*(t-=2.25/W)*t+.9375:H*Math.pow(t-2.625/W,2)+.984375}),on("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),on("Circ",(function(t){return-(rt(1-t*t)-1)})),on("Sine",(function(t){return 1===t?1:1-st(t*nt)})),on("Back",cn("in"),cn("out"),cn()),Je.SteppedEase=Je.steps=Pt.SteppedEase={config:function(t,e){void 0===t&&(t=1);var n=1/t,i=t+(e?0:1),r=e?1:0;return function(t){return((i*Pe(0,.99999999,t)|0)+r)*n}}},J.ease=Je["quad.out"],Ut("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return Ft+=t+","+t+"Params,"}));var pn=function(t,e){this.id=it++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:Nt,this.set=e?e.getSetter:kn},un=function(){function t(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,_e(this,+t.duration,1,1),this.data=t.data,L||Xe.wake()}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,_e(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Ze(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(ue(this,t),!n._dp||n.parent||he(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&de(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===tt||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),Ht(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+ae(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+ae(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*n,e):this._repeat?le(this._tTime,n)+1:1},e.timeScale=function(t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?ce(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,se(this.totalTime(Pe(-this._delay,this._tDur,e),!0)),pe(this),this},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Ze(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==tt&&(this._tTime-=tt)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&de(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(ht(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?ce(e.rawTime(t),this):this._tTime:this._tTime},e.globalTime=function(t){for(var e=this,n=arguments.length?t:e.rawTime();e;)n=e._start+n/(e._ts||1),e=e._dp;return n},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,be(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){if(arguments.length){var e=this._time;return this._rDelay=t,be(this),e?this.time(e):this}return this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(xe(this,t),ht(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,ht(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,n=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=n&&t<this.endTime(!0)-tt))},e.eventCallback=function(t,e,n){var i=this.vars;return arguments.length>1?(e?(i[t]=e,n&&(i[t+"Params"]=n),"onUpdate"===t&&(this._onUpdate=e)):delete i[t],this):i[t]},e.then=function(t){var e=this;return new Promise((function(n){var i=lt(t)?t:$t,r=function(){var t=e.then;e.then=null,lt(i)&&(i=i(e))&&(i.then||i===e)&&(e.then=t),n(i),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?r():e._prom=r}))},e.kill=function(){Be(this)},t}();Xt(un.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var hn=function(t){function e(e,n){var i;return void 0===e&&(e={}),(i=t.call(this,e)||this).labels={},i.smoothChildTiming=!!e.smoothChildTiming,i.autoRemoveChildren=!!e.autoRemoveChildren,i._sort=ht(e.sortChildren),P&&de(e.parent||P,x(i),n),e.reversed&&i.reverse(),e.paused&&i.paused(!0),e.scrollTrigger&&ve(x(i),e.scrollTrigger),i}y(e,t);var n=e.prototype;return n.to=function(t,e,n){return ye(0,arguments,this),this},n.from=function(t,e,n){return ye(1,arguments,this),this},n.fromTo=function(t,e,n,i){return ye(2,arguments,this),this},n.set=function(t,e,n){return e.duration=0,e.parent=this,ee(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new xn(t,e,xe(this,n),1),this},n.call=function(t,e,n){return de(this,xn.delayedCall(0,t,e),n)},n.staggerTo=function(t,e,n,i,r,s,o){return n.duration=e,n.stagger=n.stagger||i,n.onComplete=s,n.onCompleteParams=o,n.parent=this,new xn(t,n,xe(this,r)),this},n.staggerFrom=function(t,e,n,i,r,s,o){return n.runBackwards=1,ee(n).immediateRender=ht(n.immediateRender),this.staggerTo(t,e,n,i,r,s,o)},n.staggerFromTo=function(t,e,n,i,r,s,o,a){return i.startAt=n,ee(i).immediateRender=ht(i.immediateRender),this.staggerTo(t,e,i,r,s,o,a)},n.render=function(t,e,n){var i,r,s,o,a,l,c,p,u,h,d,v,m=this._time,f=this._dirty?this.totalDuration():this._tDur,g=this._dur,_=t<=0?0:Gt(t),b=this._zTime<0!=t<0&&(this._initted||!g);if(this!==P&&_>f&&t>=0&&(_=f),_!==this._tTime||n||b){if(m!==this._time&&g&&(_+=this._time-m,t+=this._time-m),i=_,u=this._start,l=!(p=this._ts),b&&(g||(m=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(d=this._yoyo,a=g+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*a+t,e,n);if(i=Gt(_%a),_===f?(o=this._repeat,i=g):((o=~~(_/a))&&o===_/a&&(i=g,o--),i>g&&(i=g)),h=le(this._tTime,a),!m&&this._tTime&&h!==o&&(h=o),d&&1&o&&(i=g-i,v=1),o!==h&&!this._lock){var w=d&&1&h,x=w===(d&&1&o);if(o<h&&(w=!w),m=w?0:g,this._lock=1,this.render(m||(v?0:Gt(o*a)),e,!g)._lock=0,this._tTime=_,!e&&this.parent&&Fe(this,"onRepeat"),this.vars.repeatRefresh&&!v&&(this.invalidate()._lock=1),m&&m!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(g=this._dur,f=this._tDur,x&&(this._lock=2,m=w?g:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!v&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;rn(this,v)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(t,e,n){var i;if(n>e)for(i=t._first;i&&i._start<=n;){if(!i._dur&&"isPause"===i.data&&i._start>e)return i;i=i._next}else for(i=t._last;i&&i._start>=n;){if(!i._dur&&"isPause"===i.data&&i._start<e)return i;i=i._prev}}(this,Gt(m),Gt(i)),c&&(_-=i-(i=c._start))),this._tTime=_,this._time=i,this._act=!p,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,m=0),!m&&i&&!e&&(Fe(this,"onStart"),this._tTime!==_))return this;if(i>=m&&t>=0)for(r=this._first;r;){if(s=r._next,(r._act||i>=r._start)&&r._ts&&c!==r){if(r.parent!==this)return this.render(t,e,n);if(r.render(r._ts>0?(i-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(i-r._start)*r._ts,e,n),i!==this._time||!this._ts&&!l){c=0,s&&(_+=this._zTime=-1e-8);break}}r=s}else{r=this._last;for(var y=t<0?t:i;r;){if(s=r._prev,(r._act||y<=r._end)&&r._ts&&c!==r){if(r.parent!==this)return this.render(t,e,n);if(r.render(r._ts>0?(y-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(y-r._start)*r._ts,e,n),i!==this._time||!this._ts&&!l){c=0,s&&(_+=this._zTime=y?-1e-8:tt);break}}r=s}}if(c&&!e&&(this.pause(),c.render(i>=m?0:-1e-8)._zTime=i>=m?1:-1,this._ts))return this._start=u,pe(this),this.render(t,e,n);this._onUpdate&&!e&&Fe(this,"onUpdate",!0),(_===f&&f>=this.totalDuration()||!_&&m)&&(u!==this._start&&Math.abs(p)===Math.abs(this._ts)||this._lock||((t||!g)&&(_===f&&this._ts>0||!_&&this._ts<0)&&ie(this,1),e||t<0&&!m||!_&&!m&&f||(Fe(this,_===f&&t>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(_<f&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(t,e){var n=this;if(ct(e)||(e=xe(this,e,t)),!(t instanceof un)){if(ft(t))return t.forEach((function(t){return n.add(t,e)})),this;if(at(t))return this.addLabel(t,e);if(!lt(t))return this;t=xn.delayedCall(0,t)}return this!==t?de(this,t,e):this},n.getChildren=function(t,e,n,i){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===i&&(i=-Q);for(var r=[],s=this._first;s;)s._start>=i&&(s instanceof xn?e&&r.push(s):(n&&r.push(s),t&&r.push.apply(r,s.getChildren(!0,e,n)))),s=s._next;return r},n.getById=function(t){for(var e=this.getChildren(1,1,1),n=e.length;n--;)if(e[n].vars.id===t)return e[n]},n.remove=function(t){return at(t)?this.removeLabel(t):lt(t)?this.killTweensOf(t):(ne(this,t),t===this._recent&&(this._recent=this._last),re(this))},n.totalTime=function(e,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Gt(Xe.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,n),this._forcing=0,this):this._tTime},n.addLabel=function(t,e){return this.labels[t]=xe(this,e),this},n.removeLabel=function(t){return delete this.labels[t],this},n.addPause=function(t,e,n){var i=xn.delayedCall(0,e||Tt,n);return i.data="isPause",this._hasPause=1,de(this,i,xe(this,t))},n.removePause=function(t){var e=this._first;for(t=xe(this,t);e;)e._start===t&&"isPause"===e.data&&ie(e),e=e._next},n.killTweensOf=function(t,e,n){for(var i=this.getTweensOf(t,n),r=i.length;r--;)dn!==i[r]&&i[r].kill(t,e);return this},n.getTweensOf=function(t,e){for(var n,i=[],r=Se(t),s=this._first,o=ct(e);s;)s instanceof xn?qt(s._targets,r)&&(o?(!dn||s._initted&&s._ts)&&s.globalTime(0)<=e&&s.globalTime(s.totalDuration())>e:!e||s.isActive())&&i.push(s):(n=s.getTweensOf(r,e)).length&&i.push.apply(i,n),s=s._next;return i},n.tweenTo=function(t,e){e=e||{};var n,i=this,r=xe(i,t),s=e,o=s.startAt,a=s.onStart,l=s.onStartParams,c=s.immediateRender,p=xn.to(i,Xt({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:e.duration||Math.abs((r-(o&&"time"in o?o.time:i._time))/i.timeScale())||tt,onStart:function(){if(i.pause(),!n){var t=e.duration||Math.abs((r-(o&&"time"in o?o.time:i._time))/i.timeScale());p._dur!==t&&_e(p,t,0,1).render(p._time,!0,!0),n=1}a&&a.apply(p,l||[])}},e));return c?p.render(0):p},n.tweenFromTo=function(t,e,n){return this.tweenTo(e,Xt({startAt:{time:xe(this,t)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(t){return void 0===t&&(t=this._time),Ie(this,xe(this,t))},n.previousLabel=function(t){return void 0===t&&(t=this._time),Ie(this,xe(this,t),1)},n.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+tt)},n.shiftChildren=function(t,e,n){void 0===n&&(n=0);for(var i,r=this._first,s=this.labels;r;)r._start>=n&&(r._start+=t,r._end+=t),r=r._next;if(e)for(i in s)s[i]>=n&&(s[i]+=t);return re(this)},n.invalidate=function(){var e=this._first;for(this._lock=0;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},n.clear=function(t){void 0===t&&(t=!0);for(var e,n=this._first;n;)e=n._next,this.remove(n),n=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),re(this)},n.totalDuration=function(t){var e,n,i,r=0,s=this,o=s._last,a=Q;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-t:t));if(s._dirty){for(i=s.parent;o;)e=o._prev,o._dirty&&o.totalDuration(),(n=o._start)>a&&s._sort&&o._ts&&!s._lock?(s._lock=1,de(s,o,n-o._delay,1)._lock=0):a=n,n<0&&o._ts&&(r-=n,(!i&&!s._dp||i&&i.smoothChildTiming)&&(s._start+=n/s._ts,s._time-=n,s._tTime-=n),s.shiftChildren(-n,!1,-Infinity),a=0),o._end>r&&o._ts&&(r=o._end),o=e;_e(s,s===P&&s._time>r?s._time:r,1,1),s._dirty=0}return s._tDur},e.updateRoot=function(t){if(P._ts&&(Ht(P,ce(t,P)),A=Xe.frame),Xe.frame>=Ot){Ot+=Z.autoSleep||120;var e=P._first;if((!e||!e._ts)&&Z.autoSleep&&Xe._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Xe.sleep()}}},e}(un);Xt(hn.prototype,{_lock:0,_hasPause:0,_forcing:0});var dn,vn=function(t,e,n,i,r,s,o){var a,l,c,p,u,h,d,v,m=new zn(this._pt,t,e,0,1,An,null,r),f=0,g=0;for(m.b=n,m.e=i,n+="",(d=~(i+="").indexOf("random("))&&(i=ze(i)),s&&(s(v=[n,i],t,e),n=v[0],i=v[1]),l=n.match(wt)||[];a=wt.exec(i);)p=a[0],u=i.substring(f,a.index),c?c=(c+1)%5:"rgba("===u.substr(-5)&&(c=1),p!==l[g++]&&(h=parseFloat(l[g-1])||0,m._pt={_next:m._pt,p:u||1===g?u:",",s:h,c:"="===p.charAt(1)?parseFloat(p.substr(2))*("-"===p.charAt(0)?-1:1):parseFloat(p)-h,m:c&&c<4?Math.round:0},f=wt.lastIndex);return m.c=f<i.length?i.substring(f,i.length):"",m.fp=o,(xt.test(i)||d)&&(m.e=0),this._pt=m,m},mn=function(t,e,n,i,r,s,o,a,l){lt(i)&&(i=i(r||0,t,s));var c,p=t[e],u="get"!==n?n:lt(p)?l?t[e.indexOf("set")||!lt(t["get"+e.substr(3)])?e:"get"+e.substr(3)](l):t[e]():p,h=lt(p)?l?Pn:Cn:yn;if(at(i)&&(~i.indexOf("random(")&&(i=ze(i)),"="===i.charAt(1)&&((c=parseFloat(u)+parseFloat(i.substr(2))*("-"===i.charAt(0)?-1:1)+(Ee(u)||0))||0===c)&&(i=c)),u!==i)return isNaN(u*i)||""===i?(!p&&!(e in t)&&Mt(e,i),vn.call(this,t,e,u,i,h,a||Z.stringFilter,l)):(c=new zn(this._pt,t,e,+u||0,i-(u||0),"boolean"==typeof p?Sn:Mn,0,h),l&&(c.fp=l),o&&c.modifier(o,this,t),this._pt=c)},fn=function(t,e,n,i,r,s){var o,a,l,c;if(Rt[t]&&!1!==(o=new Rt[t]).init(r,o.rawVars?e[t]:function(t,e,n,i,r){if(lt(t)&&(t=_n(t,r,e,n,i)),!ut(t)||t.style&&t.nodeType||ft(t)||mt(t))return at(t)?_n(t,r,e,n,i):t;var s,o={};for(s in t)o[s]=_n(t[s],r,e,n,i);return o}(e[t],i,r,s,n),n,i,s)&&(n._pt=a=new zn(n._pt,r,t,0,1,o.render,o,0,o.priority),n!==T))for(l=n._ptLookup[n._targets.indexOf(r)],c=o._props.length;c--;)l[o._props[c]]=a;return o},gn=function t(e,n){var i,r,s,o,a,l,c,p,u,h,d,v,m,f=e.vars,g=f.ease,_=f.startAt,b=f.immediateRender,w=f.lazy,x=f.onUpdate,y=f.onUpdateParams,E=f.callbackScope,k=f.runBackwards,M=f.yoyoEase,S=f.keyframes,A=f.autoRevert,T=e._dur,L=e._startAt,V=e._targets,D=e.parent,R=D&&"nested"===D.data?D.parent._targets:V,z="auto"===e._overwrite&&!C,O=e.timeline;if(O&&(!S||!g)&&(g="none"),e._ease=sn(g,J.ease),e._yEase=M?nn(sn(!0===M?g:M,J.ease)):0,M&&e._yoyo&&!e._repeat&&(M=e._yEase,e._yEase=e._ease,e._ease=M),e._from=!O&&!!f.runBackwards,!O){if(v=(p=V[0]?jt(V[0]).harness:0)&&f[p.prop],i=te(f,Lt),L&&L.render(-1,!0).kill(),_)if(ie(e._startAt=xn.set(V,Xt({data:"isStart",overwrite:!1,parent:D,immediateRender:!0,lazy:ht(w),startAt:null,delay:0,onUpdate:x,onUpdateParams:y,callbackScope:E,stagger:0},_))),n<0&&!b&&!A&&e._startAt.render(-1,!0),b){if(n>0&&!A&&(e._startAt=0),T&&n<=0)return void(n&&(e._zTime=n))}else!1===A&&(e._startAt=0);else if(k&&T)if(L)!A&&(e._startAt=0);else if(n&&(b=!1),s=Xt({overwrite:!1,data:"isFromStart",lazy:b&&ht(w),immediateRender:b,stagger:0,parent:D},i),v&&(s[p.prop]=v),ie(e._startAt=xn.set(V,s)),n<0&&e._startAt.render(-1,!0),b){if(!n)return}else t(e._startAt,tt);for(e._pt=0,w=T&&ht(w)||w&&!T,r=0;r<V.length;r++){if(c=(a=V[r])._gsap||Bt(V)[r]._gsap,e._ptLookup[r]=h={},Dt[c.id]&&Vt.length&&Yt(),d=R===V?r:R.indexOf(a),p&&!1!==(u=new p).init(a,v||i,e,d,R)&&(e._pt=o=new zn(e._pt,a,u.name,0,1,u.render,u,0,u.priority),u._props.forEach((function(t){h[t]=o})),u.priority&&(l=1)),!p||v)for(s in i)Rt[s]&&(u=fn(s,i,e,d,a,R))?u.priority&&(l=1):h[s]=o=mn.call(e,a,s,"get",i[s],d,R,0,f.stringFilter);e._op&&e._op[r]&&e.kill(a,e._op[r]),z&&e._pt&&(dn=e,P.killTweensOf(a,h,e.globalTime(n)),m=!e.parent,dn=0),e._pt&&w&&(Dt[c.id]=1)}l&&Rn(e),e._onInit&&e._onInit(e)}e._onUpdate=x,e._initted=(!e._op||e._pt)&&!m},_n=function(t,e,n,i,r){return lt(t)?t.call(e,n,i,r):at(t)&&~t.indexOf("random(")?ze(t):t},bn=Ft+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",wn=(bn+",id,stagger,delay,duration,paused,scrollTrigger").split(","),xn=function(t){function e(e,n,i,r){var s;"number"==typeof n&&(i.duration=n,n=i,i=null);var o,a,l,c,p,u,h,d,v=(s=t.call(this,r?n:ee(n))||this).vars,m=v.duration,f=v.delay,g=v.immediateRender,_=v.stagger,b=v.overwrite,w=v.keyframes,y=v.defaults,E=v.scrollTrigger,k=v.yoyoEase,M=n.parent||P,S=(ft(e)||mt(e)?ct(e[0]):"length"in n)?[e]:Se(e);if(s._targets=S.length?Bt(S):St("GSAP target "+e+" not found. https://greensock.com",!Z.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=b,w||_||vt(m)||vt(f)){if(n=s.vars,(o=s.timeline=new hn({data:"nested",defaults:y||{}})).kill(),o.parent=o._dp=x(s),o._start=0,w)ee(Xt(o.vars.defaults,{ease:"none"})),_?S.forEach((function(t,e){return w.forEach((function(n,i){return o.to(t,n,i?">":e*_)}))})):w.forEach((function(t){return o.to(S,t,">")}));else{if(c=S.length,h=_?Te(_):Tt,ut(_))for(p in _)~bn.indexOf(p)&&(d||(d={}),d[p]=_[p]);for(a=0;a<c;a++){for(p in l={},n)wn.indexOf(p)<0&&(l[p]=n[p]);l.stagger=0,k&&(l.yoyoEase=k),d&&Jt(l,d),u=S[a],l.duration=+_n(m,x(s),a,u,S),l.delay=(+_n(f,x(s),a,u,S)||0)-s._delay,!_&&1===c&&l.delay&&(s._delay=f=l.delay,s._start+=f,l.delay=0),o.to(u,l,h(a,u,S))}o.duration()?m=f=0:s.timeline=0}m||s.duration(m=o.duration())}else s.timeline=0;return!0!==b||C||(dn=x(s),P.killTweensOf(S),dn=0),de(M,x(s),i),n.reversed&&s.reverse(),n.paused&&s.paused(!0),(g||!m&&!w&&s._start===Gt(M._time)&&ht(g)&&oe(x(s))&&"nested"!==M.data)&&(s._tTime=-1e-8,s.render(Math.max(0,-f))),E&&ve(x(s),E),s}y(e,t);var n=e.prototype;return n.render=function(t,e,n){var i,r,s,o,a,l,c,p,u,h=this._time,d=this._tDur,v=this._dur,m=t>d-tt&&t>=0?d:t<tt?0:t;if(v){if(m!==this._tTime||!t||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=t<0){if(i=m,p=this.timeline,this._repeat){if(o=v+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*o+t,e,n);if(i=Gt(m%o),m===d?(s=this._repeat,i=v):((s=~~(m/o))&&s===m/o&&(i=v,s--),i>v&&(i=v)),(l=this._yoyo&&1&s)&&(u=this._yEase,i=v-i),a=le(this._tTime,o),i===h&&!n&&this._initted)return this;s!==a&&(p&&this._yEase&&rn(p,l),!this.vars.repeatRefresh||l||this._lock||(this._lock=n=1,this.render(Gt(o*s),!0).invalidate()._lock=0))}if(!this._initted){if(me(this,t<0?t:i,n,e))return this._tTime=0,this;if(v!==this._dur)return this.render(t,e,n)}if(this._tTime=m,this._time=i,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(u||this._ease)(i/v),this._from&&(this.ratio=c=1-c),i&&!h&&!e&&(Fe(this,"onStart"),this._tTime!==m))return this;for(r=this._pt;r;)r.r(c,r.d),r=r._next;p&&p.render(t<0?t:!i&&l?-1e-8:p._dur*c,e,n)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,n),Fe(this,"onUpdate")),this._repeat&&s!==a&&this.vars.onRepeat&&!e&&this.parent&&Fe(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,!0),(t||!v)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&ie(this,1),e||t<0&&!h||!m&&!h||(Fe(this,m===d?"onComplete":"onReverseComplete",!0),this._prom&&!(m<d&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,n,i){var r,s,o,a=t.ratio,l=e<0||!e&&(!t._start&&fe(t)&&(t._initted||!ge(t))||(t._ts<0||t._dp._ts<0)&&!ge(t))?0:1,c=t._rDelay,p=0;if(c&&t._repeat&&(p=Pe(0,t._tDur,e),s=le(p,c),o=le(t._tTime,c),t._yoyo&&1&s&&(l=1-l),s!==o&&(a=1-l,t.vars.repeatRefresh&&t._initted&&t.invalidate())),l!==a||i||t._zTime===tt||!e&&t._zTime){if(!t._initted&&me(t,e,i,n))return;for(o=t._zTime,t._zTime=e||(n?tt:0),n||(n=e&&!o),t.ratio=l,t._from&&(l=1-l),t._time=0,t._tTime=p,r=t._pt;r;)r.r(l,r.d),r=r._next;t._startAt&&e<0&&t._startAt.render(e,!0,!0),t._onUpdate&&!n&&Fe(t,"onUpdate"),p&&t._repeat&&!n&&t.parent&&Fe(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===l&&(l&&ie(t,1),n||(Fe(t,l?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,n);return this},n.targets=function(){return this._targets},n.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),t.prototype.invalidate.call(this)},n.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?Be(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,dn&&!0!==dn.vars.overwrite)._first||Be(this),this.parent&&n!==this.timeline.totalDuration()&&_e(this,this._dur*this.timeline._tDur/n,0,1),this}var i,r,s,o,a,l,c,p=this._targets,u=t?Se(t):p,h=this._ptLookup,d=this._pt;if((!e||"all"===e)&&function(t,e){for(var n=t.length,i=n===e.length;i&&n--&&t[n]===e[n];);return n<0}(p,u))return"all"===e&&(this._pt=0),Be(this);for(i=this._op=this._op||[],"all"!==e&&(at(e)&&(a={},Ut(e,(function(t){return a[t]=1})),e=a),e=function(t,e){var n,i,r,s,o=t[0]?jt(t[0]).harness:0,a=o&&o.aliases;if(!a)return e;for(i in n=Jt({},e),a)if(i in n)for(r=(s=a[i].split(",")).length;r--;)n[s[r]]=n[i];return n}(p,e)),c=p.length;c--;)if(~u.indexOf(p[c]))for(a in r=h[c],"all"===e?(i[c]=e,o=r,s={}):(s=i[c]=i[c]||{},o=e),o)(l=r&&r[a])&&("kill"in l.d&&!0!==l.d.kill(a)||ne(this,l,"_pt"),delete r[a]),"all"!==s&&(s[a]=1);return this._initted&&!this._pt&&d&&Be(this),this},e.to=function(t,n){return new e(t,n,arguments[2])},e.from=function(t,e){return ye(1,arguments)},e.delayedCall=function(t,n,i,r){return new e(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:n,onReverseComplete:n,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:r})},e.fromTo=function(t,e,n){return ye(2,arguments)},e.set=function(t,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new e(t,n)},e.killTweensOf=function(t,e,n){return P.killTweensOf(t,e,n)},e}(un);Xt(xn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Ut("staggerTo,staggerFrom,staggerFromTo",(function(t){xn[t]=function(){var e=new hn,n=ke.call(arguments,0);return n.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,n)}}));var yn=function(t,e,n){return t[e]=n},Cn=function(t,e,n){return t[e](n)},Pn=function(t,e,n,i){return t[e](i.fp,n)},En=function(t,e,n){return t.setAttribute(e,n)},kn=function(t,e){return lt(t[e])?Cn:pt(t[e])&&t.setAttribute?En:yn},Mn=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},Sn=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},An=function(t,e){var n=e._pt,i="";if(!t&&e.b)i=e.b;else if(1===t&&e.e)i=e.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*t):Math.round(1e4*(n.s+n.c*t))/1e4)+i,n=n._next;i+=e.c}e.set(e.t,e.p,i,e)},Tn=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},Ln=function(t,e,n,i){for(var r,s=this._pt;s;)r=s._next,s.p===i&&s.modifier(t,e,n),s=r},Vn=function(t){for(var e,n,i=this._pt;i;)n=i._next,i.p===t&&!i.op||i.op===t?ne(this,i,"_pt"):i.dep||(e=1),i=n;return!e},Dn=function(t,e,n,i){i.mSet(t,e,i.m.call(i.tween,n,i.mt),i)},Rn=function(t){for(var e,n,i,r,s=t._pt;s;){for(e=s._next,n=i;n&&n.pr>s.pr;)n=n._next;(s._prev=n?n._prev:r)?s._prev._next=s:i=s,(s._next=n)?n._prev=s:r=s,s=e}t._pt=i},zn=function(){function t(t,e,n,i,r,s,o,a,l){this.t=e,this.s=i,this.c=r,this.p=n,this.r=s||Mn,this.d=o||this,this.set=a||yn,this.pr=l||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,n){this.mSet=this.mSet||this.set,this.set=Dn,this.m=t,this.mt=n,this.tween=e},t}();Ut(Ft+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return Lt[t]=1})),Pt.TweenMax=Pt.TweenLite=xn,Pt.TimelineLite=Pt.TimelineMax=hn,P=new hn({sortChildren:!1,defaults:J,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Z.stringFilter=$e;var On={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((function(t){return je(t)}))},timeline:function(t){return new hn(t)},getTweensOf:function(t,e){return P.getTweensOf(t,e)},getProperty:function(t,e,n,i){at(t)&&(t=Se(t)[0]);var r=jt(t||{}).get,s=n?$t:Wt;return"native"===n&&(n=""),t?e?s((Rt[e]&&Rt[e].get||r)(t,e,n,i)):function(e,n,i){return s((Rt[e]&&Rt[e].get||r)(t,e,n,i))}:t},quickSetter:function(t,e,n){if((t=Se(t)).length>1){var i=t.map((function(t){return Bn.quickSetter(t,e,n)})),r=i.length;return function(t){for(var e=r;e--;)i[e](t)}}t=t[0]||{};var s=Rt[e],o=jt(t),a=o.harness&&(o.harness.aliases||{})[e]||e,l=s?function(e){var i=new s;T._pt=0,i.init(t,n?e+n:e,T,0,[t]),i.render(1,i),T._pt&&Tn(1,T)}:o.set(t,a);return s?l:function(e){return l(t,a,n?e+n:e,o,1)}},isTweening:function(t){return P.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=sn(t.ease,J.ease)),Qt(J,t||{})},config:function(t){return Qt(Z,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,i=t.plugins,r=t.defaults,s=t.extendTimeline;(i||"").split(",").forEach((function(t){return t&&!Rt[t]&&!Pt[t]&&St(e+" effect requires "+t+" plugin.")})),zt[e]=function(t,e,i){return n(Se(t),Xt(e||{},r),i)},s&&(hn.prototype[e]=function(t,n,i){return this.add(zt[e](t,ut(n)?n:(i=n)&&{},this),i)})},registerEase:function(t,e){Je[t]=sn(e)},parseEase:function(t,e){return arguments.length?sn(t,e):Je},getById:function(t){return P.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var n,i,r=new hn(t);for(r.smoothChildTiming=ht(t.smoothChildTiming),P.remove(r),r._dp=0,r._time=r._tTime=P._time,n=P._first;n;)i=n._next,!e&&!n._dur&&n instanceof xn&&n.vars.onComplete===n._targets[0]||de(r,n,n._start-n._delay),n=i;return de(P,r,0),r},utils:{wrap:function t(e,n,i){var r=n-e;return ft(e)?Re(e,t(0,e.length),n):Ce(i,(function(t){return(r+(t-e)%r)%r+e}))},wrapYoyo:function t(e,n,i){var r=n-e,s=2*r;return ft(e)?Re(e,t(0,e.length-1),n):Ce(i,(function(t){return e+((t=(s+(t-e)%s)%s||0)>r?s-t:t)}))},distribute:Te,random:De,snap:Ve,normalize:function(t,e,n){return Oe(t,e,0,1,n)},getUnit:Ee,clamp:function(t,e,n){return Ce(n,(function(n){return Pe(t,e,n)}))},splitColor:Ge,toArray:Se,selector:function(t){return t=Se(t)[0]||St("Invalid scope")||{},function(e){var n=t.current||t.nativeElement||t;return Se(e,n.querySelectorAll?n:n===t?St("Invalid scope")||M.createElement("div"):t)}},mapRange:Oe,pipe:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(n){return t(parseFloat(n))+(e||Ee(n))}},interpolate:function t(e,n,i,r){var s=isNaN(e+n)?0:function(t){return(1-t)*e+t*n};if(!s){var o,a,l,c,p,u=at(e),h={};if(!0===i&&(r=1)&&(i=null),u)e={p:e},n={p:n};else if(ft(e)&&!ft(n)){for(l=[],c=e.length,p=c-2,a=1;a<c;a++)l.push(t(e[a-1],e[a]));c--,s=function(t){t*=c;var e=Math.min(p,~~t);return l[e](t-e)},i=n}else r||(e=Jt(ft(e)?[]:{},e));if(!l){for(o in n)mn.call(h,e,o,"get",n[o]);s=function(t){return Tn(t,h)||(u?e.p:e)}}}return Ce(i,s)},shuffle:Ae},install:kt,effects:zt,ticker:Xe,updateRoot:hn.updateRoot,plugins:Rt,globalTimeline:P,core:{PropTween:zn,globals:At,Tween:xn,Timeline:hn,Animation:un,getCache:jt,_removeLinkedListItem:ne,suppressOverwrites:function(t){return C=t}}};Ut("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return On[t]=xn[t]})),Xe.add(hn.updateRoot),T=On.to({},{duration:0});var In=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},Fn=function(t,e){return{name:t,rawVars:1,init:function(t,n,i){i._onInit=function(t){var i,r;if(at(n)&&(i={},Ut(n,(function(t){return i[t]=1})),n=i),e){for(r in i={},n)i[r]=e(n[r]);n=i}!function(t,e){var n,i,r,s=t._targets;for(n in e)for(i=s.length;i--;)(r=t._ptLookup[i][n])&&(r=r.d)&&(r._pt&&(r=In(r,n)),r&&r.modifier&&r.modifier(e[n],t,s[i],n))}(t,n)}}}},Bn=On.registerPlugin({name:"attr",init:function(t,e,n,i,r){var s,o;for(s in e)(o=this.add(t,"setAttribute",(t.getAttribute(s)||0)+"",e[s],i,r,0,0,s))&&(o.op=s),this._props.push(s)}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n])}},Fn("roundProps",Le),Fn("modifiers"),Fn("snap",Ve))||On;xn.version=hn.version=Bn.version="3.8.0",S=1,dt()&&Ze(),Je.Power0,Je.Power1;var jn,Nn,Un,Kn,Gn,qn,Yn,Hn=Je.Power2,Wn=(Je.Power3,Je.Power4,Je.Linear,Je.Quad,Je.Cubic,Je.Quart,Je.Quint,Je.Strong,Je.Elastic,Je.Back,Je.SteppedEase,Je.Bounce,Je.Sine,Je.Expo,Je.Circ,{}),$n=180/Math.PI,Xn=Math.PI/180,Zn=Math.atan2,Jn=/([A-Z])/g,Qn=/(?:left|right|width|margin|padding|x)/i,ti=/[\s,\(]\S/,ei={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},ni=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},ii=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},ri=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},si=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},oi=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},ai=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},li=function(t,e,n){return t.style[e]=n},ci=function(t,e,n){return t.style.setProperty(e,n)},pi=function(t,e,n){return t._gsap[e]=n},ui=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},hi=function(t,e,n,i,r){var s=t._gsap;s.scaleX=s.scaleY=n,s.renderTransform(r,s)},di=function(t,e,n,i,r){var s=t._gsap;s[e]=n,s.renderTransform(r,s)},vi="transform",mi=vi+"Origin",fi=function(t,e){var n=Nn.createElementNS?Nn.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Nn.createElement(t);return n.style?n:Nn.createElement(t)},gi=function t(e,n,i){var r=getComputedStyle(e);return r[n]||r.getPropertyValue(n.replace(Jn,"-$1").toLowerCase())||r.getPropertyValue(n)||!i&&t(e,bi(n)||n,1)||""},_i="O,Moz,ms,Ms,Webkit".split(","),bi=function(t,e,n){var i=(e||Gn).style,r=5;if(t in i&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);r--&&!(_i[r]+t in i););return r<0?null:(3===r?"ms":r>=0?_i[r]:"")+t},wi=function(){"undefined"!=typeof window&&window.document&&(jn=window,Nn=jn.document,Un=Nn.documentElement,Gn=fi("div")||{style:{}},fi("div"),vi=bi(vi),mi=vi+"Origin",Gn.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Yn=!!bi("perspective"),Kn=1)},xi=function t(e){var n,i=fi("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,s=this.nextSibling,o=this.style.cssText;if(Un.appendChild(i),i.appendChild(this),this.style.display="block",e)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(t){}else this._gsapBBox&&(n=this._gsapBBox());return r&&(s?r.insertBefore(this,s):r.appendChild(this)),Un.removeChild(i),this.style.cssText=o,n},yi=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},Ci=function(t){var e;try{e=t.getBBox()}catch(n){e=xi.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===xi||(e=xi.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+yi(t,["x","cx","x1"])||0,y:+yi(t,["y","cy","y1"])||0,width:0,height:0}},Pi=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!Ci(t))},Ei=function(t,e){if(e){var n=t.style;e in Wn&&e!==mi&&(e=vi),n.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),n.removeProperty(e.replace(Jn,"-$1").toLowerCase())):n.removeAttribute(e)}},ki=function(t,e,n,i,r,s){var o=new zn(t._pt,e,n,0,1,s?ai:oi);return t._pt=o,o.b=i,o.e=r,t._props.push(n),o},Mi={deg:1,rad:1,turn:1},Si=function t(e,n,i,r){var s,o,a,l,c=parseFloat(i)||0,p=(i+"").trim().substr((c+"").length)||"px",u=Gn.style,h=Qn.test(n),d="svg"===e.tagName.toLowerCase(),v=(d?"client":"offset")+(h?"Width":"Height"),m=100,f="px"===r,g="%"===r;return r===p||!c||Mi[r]||Mi[p]?c:("px"!==p&&!f&&(c=t(e,n,i,"px")),l=e.getCTM&&Pi(e),!g&&"%"!==p||!Wn[n]&&!~n.indexOf("adius")?(u[h?"width":"height"]=m+(f?p:r),o=~n.indexOf("adius")||"em"===r&&e.appendChild&&!d?e:e.parentNode,l&&(o=(e.ownerSVGElement||{}).parentNode),o&&o!==Nn&&o.appendChild||(o=Nn.body),(a=o._gsap)&&g&&a.width&&h&&a.time===Xe.time?Kt(c/a.width*m):((g||"%"===p)&&(u.position=gi(e,"position")),o===e&&(u.position="static"),o.appendChild(Gn),s=Gn[v],o.removeChild(Gn),u.position="absolute",h&&g&&((a=jt(o)).time=Xe.time,a.width=o[v]),Kt(f?s*c/m:s&&c?m/s*c:0))):(s=l?e.getBBox()[h?"width":"height"]:e[v],Kt(g?c/s*m:c/100*s)))},Ai=function(t,e,n,i){var r;return Kn||wi(),e in ei&&"transform"!==e&&~(e=ei[e]).indexOf(",")&&(e=e.split(",")[0]),Wn[e]&&"transform"!==e?(r=ji(t,i),r="transformOrigin"!==e?r[e]:r.svg?r.origin:Ni(gi(t,mi))+" "+r.zOrigin+"px"):(!(r=t.style[e])||"auto"===r||i||~(r+"").indexOf("calc("))&&(r=Di[e]&&Di[e](t,e,n)||gi(t,e)||Nt(t,e)||("opacity"===e?1:0)),n&&!~(r+"").trim().indexOf(" ")?Si(t,e,r,n)+n:r},Ti=function(t,e,n,i){if(!n||"none"===n){var r=bi(e,t,1),s=r&&gi(t,r,1);s&&s!==n?(e=r,n=s):"borderColor"===e&&(n=gi(t,"borderTopColor"))}var o,a,l,c,p,u,h,d,v,m,f,g,_=new zn(this._pt,t.style,e,0,1,An),b=0,w=0;if(_.b=n,_.e=i,n+="","auto"==(i+="")&&(t.style[e]=i,i=gi(t,e)||i,t.style[e]=n),$e(o=[n,i]),i=o[1],l=(n=o[0]).match(bt)||[],(i.match(bt)||[]).length){for(;a=bt.exec(i);)h=a[0],v=i.substring(b,a.index),p?p=(p+1)%5:"rgba("!==v.substr(-5)&&"hsla("!==v.substr(-5)||(p=1),h!==(u=l[w++]||"")&&(c=parseFloat(u)||0,f=u.substr((c+"").length),(g="="===h.charAt(1)?+(h.charAt(0)+"1"):0)&&(h=h.substr(2)),d=parseFloat(h),m=h.substr((d+"").length),b=bt.lastIndex-m.length,m||(m=m||Z.units[e]||f,b===i.length&&(i+=m,_.e+=m)),f!==m&&(c=Si(t,e,u,m)||0),_._pt={_next:_._pt,p:v||1===w?v:",",s:c,c:g?g*d:d-c,m:p&&p<4||"zIndex"===e?Math.round:0});_.c=b<i.length?i.substring(b,i.length):""}else _.r="display"===e&&"none"===i?ai:oi;return xt.test(i)&&(_.e=0),this._pt=_,_},Li={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Vi=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n,i,r,s=e.t,o=s.style,a=e.u,l=s._gsap;if("all"===a||!0===a)o.cssText="",i=1;else for(r=(a=a.split(",")).length;--r>-1;)n=a[r],Wn[n]&&(i=1,n="transformOrigin"===n?mi:vi),Ei(s,n);i&&(Ei(s,vi),l&&(l.svg&&s.removeAttribute("transform"),ji(s,1),l.uncache=1))}},Di={clearProps:function(t,e,n,i,r){if("isFromStart"!==r.data){var s=t._pt=new zn(t._pt,e,n,0,0,Vi);return s.u=i,s.pr=-10,s.tween=r,t._props.push(n),1}}},Ri=[1,0,0,1,0,0],zi={},Oi=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},Ii=function(t){var e=gi(t,vi);return Oi(e)?Ri:e.substr(7).match(_t).map(Kt)},Fi=function(t,e){var n,i,r,s,o=t._gsap||jt(t),a=t.style,l=Ii(t);return o.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(r=t.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?Ri:l:(l!==Ri||t.offsetParent||t===Un||o.svg||(r=a.display,a.display="block",(n=t.parentNode)&&t.offsetParent||(s=1,i=t.nextSibling,Un.appendChild(t)),l=Ii(t),r?a.display=r:Ei(t,"display"),s&&(i?n.insertBefore(t,i):n?n.appendChild(t):Un.removeChild(t))),e&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},Bi=function(t,e,n,i,r,s){var o,a,l,c=t._gsap,p=r||Fi(t,!0),u=c.xOrigin||0,h=c.yOrigin||0,d=c.xOffset||0,v=c.yOffset||0,m=p[0],f=p[1],g=p[2],_=p[3],b=p[4],w=p[5],x=e.split(" "),y=parseFloat(x[0])||0,C=parseFloat(x[1])||0;n?p!==Ri&&(a=m*_-f*g)&&(l=y*(-f/a)+C*(m/a)-(m*w-f*b)/a,y=y*(_/a)+C*(-g/a)+(g*w-_*b)/a,C=l):(y=(o=Ci(t)).x+(~x[0].indexOf("%")?y/100*o.width:y),C=o.y+(~(x[1]||x[0]).indexOf("%")?C/100*o.height:C)),i||!1!==i&&c.smooth?(b=y-u,w=C-h,c.xOffset=d+(b*m+w*g)-b,c.yOffset=v+(b*f+w*_)-w):c.xOffset=c.yOffset=0,c.xOrigin=y,c.yOrigin=C,c.smooth=!!i,c.origin=e,c.originIsAbsolute=!!n,t.style[mi]="0px 0px",s&&(ki(s,c,"xOrigin",u,y),ki(s,c,"yOrigin",h,C),ki(s,c,"xOffset",d,c.xOffset),ki(s,c,"yOffset",v,c.yOffset)),t.setAttribute("data-svg-origin",y+" "+C)},ji=function(t,e){var n=t._gsap||new pn(t);if("x"in n&&!e&&!n.uncache)return n;var i,r,s,o,a,l,c,p,u,h,d,v,m,f,g,_,b,w,x,y,C,P,E,k,M,S,A,T,L,V,D,R,z=t.style,O=n.scaleX<0,I="px",F="deg",B=gi(t,mi)||"0";return i=r=s=l=c=p=u=h=d=0,o=a=1,n.svg=!(!t.getCTM||!Pi(t)),f=Fi(t,n.svg),n.svg&&(k=(!n.uncache||"0px 0px"===B)&&!e&&t.getAttribute("data-svg-origin"),Bi(t,k||B,!!k||n.originIsAbsolute,!1!==n.smooth,f)),v=n.xOrigin||0,m=n.yOrigin||0,f!==Ri&&(w=f[0],x=f[1],y=f[2],C=f[3],i=P=f[4],r=E=f[5],6===f.length?(o=Math.sqrt(w*w+x*x),a=Math.sqrt(C*C+y*y),l=w||x?Zn(x,w)*$n:0,(u=y||C?Zn(y,C)*$n+l:0)&&(a*=Math.abs(Math.cos(u*Xn))),n.svg&&(i-=v-(v*w+m*y),r-=m-(v*x+m*C))):(R=f[6],V=f[7],A=f[8],T=f[9],L=f[10],D=f[11],i=f[12],r=f[13],s=f[14],c=(g=Zn(R,L))*$n,g&&(k=P*(_=Math.cos(-g))+A*(b=Math.sin(-g)),M=E*_+T*b,S=R*_+L*b,A=P*-b+A*_,T=E*-b+T*_,L=R*-b+L*_,D=V*-b+D*_,P=k,E=M,R=S),p=(g=Zn(-y,L))*$n,g&&(_=Math.cos(-g),D=C*(b=Math.sin(-g))+D*_,w=k=w*_-A*b,x=M=x*_-T*b,y=S=y*_-L*b),l=(g=Zn(x,w))*$n,g&&(k=w*(_=Math.cos(g))+x*(b=Math.sin(g)),M=P*_+E*b,x=x*_-w*b,E=E*_-P*b,w=k,P=M),c&&Math.abs(c)+Math.abs(l)>359.9&&(c=l=0,p=180-p),o=Kt(Math.sqrt(w*w+x*x+y*y)),a=Kt(Math.sqrt(E*E+R*R)),g=Zn(P,E),u=Math.abs(g)>2e-4?g*$n:0,d=D?1/(D<0?-D:D):0),n.svg&&(k=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!Oi(gi(t,vi)),k&&t.setAttribute("transform",k))),Math.abs(u)>90&&Math.abs(u)<270&&(O?(o*=-1,u+=l<=0?180:-180,l+=l<=0?180:-180):(a*=-1,u+=u<=0?180:-180)),n.x=i-((n.xPercent=i&&(n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-i)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+I,n.y=r-((n.yPercent=r&&(n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-r)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+I,n.z=s+I,n.scaleX=Kt(o),n.scaleY=Kt(a),n.rotation=Kt(l)+F,n.rotationX=Kt(c)+F,n.rotationY=Kt(p)+F,n.skewX=u+F,n.skewY=h+F,n.transformPerspective=d+I,(n.zOrigin=parseFloat(B.split(" ")[2])||0)&&(z[mi]=Ni(B)),n.xOffset=n.yOffset=0,n.force3D=Z.force3D,n.renderTransform=n.svg?Wi:Yn?Hi:Ki,n.uncache=0,n},Ni=function(t){return(t=t.split(" "))[0]+" "+t[1]},Ui=function(t,e,n){var i=Ee(e);return Kt(parseFloat(e)+parseFloat(Si(t,"x",n+"px",i)))+i},Ki=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Hi(t,e)},Gi="0deg",qi="0px",Yi=") ",Hi=function(t,e){var n=e||this,i=n.xPercent,r=n.yPercent,s=n.x,o=n.y,a=n.z,l=n.rotation,c=n.rotationY,p=n.rotationX,u=n.skewX,h=n.skewY,d=n.scaleX,v=n.scaleY,m=n.transformPerspective,f=n.force3D,g=n.target,_=n.zOrigin,b="",w="auto"===f&&t&&1!==t||!0===f;if(_&&(p!==Gi||c!==Gi)){var x,y=parseFloat(c)*Xn,C=Math.sin(y),P=Math.cos(y);y=parseFloat(p)*Xn,x=Math.cos(y),s=Ui(g,s,C*x*-_),o=Ui(g,o,-Math.sin(y)*-_),a=Ui(g,a,P*x*-_+_)}m!==qi&&(b+="perspective("+m+Yi),(i||r)&&(b+="translate("+i+"%, "+r+"%) "),(w||s!==qi||o!==qi||a!==qi)&&(b+=a!==qi||w?"translate3d("+s+", "+o+", "+a+") ":"translate("+s+", "+o+Yi),l!==Gi&&(b+="rotate("+l+Yi),c!==Gi&&(b+="rotateY("+c+Yi),p!==Gi&&(b+="rotateX("+p+Yi),u===Gi&&h===Gi||(b+="skew("+u+", "+h+Yi),1===d&&1===v||(b+="scale("+d+", "+v+Yi),g.style[vi]=b||"translate(0, 0)"},Wi=function(t,e){var n,i,r,s,o,a=e||this,l=a.xPercent,c=a.yPercent,p=a.x,u=a.y,h=a.rotation,d=a.skewX,v=a.skewY,m=a.scaleX,f=a.scaleY,g=a.target,_=a.xOrigin,b=a.yOrigin,w=a.xOffset,x=a.yOffset,y=a.forceCSS,C=parseFloat(p),P=parseFloat(u);h=parseFloat(h),d=parseFloat(d),(v=parseFloat(v))&&(d+=v=parseFloat(v),h+=v),h||d?(h*=Xn,d*=Xn,n=Math.cos(h)*m,i=Math.sin(h)*m,r=Math.sin(h-d)*-f,s=Math.cos(h-d)*f,d&&(v*=Xn,o=Math.tan(d-v),r*=o=Math.sqrt(1+o*o),s*=o,v&&(o=Math.tan(v),n*=o=Math.sqrt(1+o*o),i*=o)),n=Kt(n),i=Kt(i),r=Kt(r),s=Kt(s)):(n=m,s=f,i=r=0),(C&&!~(p+"").indexOf("px")||P&&!~(u+"").indexOf("px"))&&(C=Si(g,"x",p,"px"),P=Si(g,"y",u,"px")),(_||b||w||x)&&(C=Kt(C+_-(_*n+b*r)+w),P=Kt(P+b-(_*i+b*s)+x)),(l||c)&&(o=g.getBBox(),C=Kt(C+l/100*o.width),P=Kt(P+c/100*o.height)),o="matrix("+n+","+i+","+r+","+s+","+C+","+P+")",g.setAttribute("transform",o),y&&(g.style[vi]=o)},$i=function(t,e,n,i,r,s){var o,a,l=360,c=at(r),p=parseFloat(r)*(c&&~r.indexOf("rad")?$n:1),u=s?p*s:p-i,h=i+u+"deg";return c&&("short"===(o=r.split("_")[1])&&(u%=l)!=u%180&&(u+=u<0?l:-360),"cw"===o&&u<0?u=(u+36e9)%l-~~(u/l)*l:"ccw"===o&&u>0&&(u=(u-36e9)%l-~~(u/l)*l)),t._pt=a=new zn(t._pt,e,n,i,u,ii),a.e=h,a.u="deg",t._props.push(n),a},Xi=function(t,e){for(var n in e)t[n]=e[n];return t},Zi=function(t,e,n){var i,r,s,o,a,l,c,p=Xi({},n._gsap),u=n.style;for(r in p.svg?(s=n.getAttribute("transform"),n.setAttribute("transform",""),u[vi]=e,i=ji(n,1),Ei(n,vi),n.setAttribute("transform",s)):(s=getComputedStyle(n)[vi],u[vi]=e,i=ji(n,1),u[vi]=s),Wn)(s=p[r])!==(o=i[r])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(r)<0&&(a=Ee(s)!==(c=Ee(o))?Si(n,r,s,c):parseFloat(s),l=parseFloat(o),t._pt=new zn(t._pt,i,r,a,l-a,ni),t._pt.u=c||0,t._props.push(r));Xi(i,p)};Ut("padding,margin,Width,Radius",(function(t,e){var n="Top",i="Right",r="Bottom",s="Left",o=(e<3?[n,i,r,s]:[n+s,n+i,r+i,r+s]).map((function(n){return e<2?t+n:"border"+n+t}));Di[e>1?"border"+t:t]=function(t,e,n,i,r){var s,a;if(arguments.length<4)return s=o.map((function(e){return Ai(t,e,n)})),5===(a=s.join(" ")).split(s[0]).length?s[0]:a;s=(i+"").split(" "),a={},o.forEach((function(t,e){return a[t]=s[e]=s[e]||s[(e-1)/2|0]})),t.init(e,a,r)}}));var Ji,Qi,tr={name:"css",register:wi,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,i,r){var s,o,a,l,c,p,u,h,d,v,m,f,g,_,b,w,x,y,C,P=this._props,E=t.style,k=n.vars.startAt;for(u in Kn||wi(),e)if("autoRound"!==u&&(o=e[u],!Rt[u]||!fn(u,e,n,i,t,r)))if(c=typeof o,p=Di[u],"function"===c&&(c=typeof(o=o.call(n,i,t,r))),"string"===c&&~o.indexOf("random(")&&(o=ze(o)),p)p(this,t,u,o,n)&&(b=1);else if("--"===u.substr(0,2))s=(getComputedStyle(t).getPropertyValue(u)+"").trim(),o+="",He.lastIndex=0,He.test(s)||(h=Ee(s),d=Ee(o)),d?h!==d&&(s=Si(t,u,s,d)+d):h&&(o+=h),this.add(E,"setProperty",s,o,i,r,0,0,u),P.push(u);else if("undefined"!==c){if(k&&u in k?(s="function"==typeof k[u]?k[u].call(n,i,t,r):k[u],u in Z.units&&!Ee(s)&&(s+=Z.units[u]),at(s)&&~s.indexOf("random(")&&(s=ze(s)),"="===(s+"").charAt(1)&&(s=Ai(t,u))):s=Ai(t,u),l=parseFloat(s),(v="string"===c&&"="===o.charAt(1)?+(o.charAt(0)+"1"):0)&&(o=o.substr(2)),a=parseFloat(o),u in ei&&("autoAlpha"===u&&(1===l&&"hidden"===Ai(t,"visibility")&&a&&(l=0),ki(this,E,"visibility",l?"inherit":"hidden",a?"inherit":"hidden",!a)),"scale"!==u&&"transform"!==u&&~(u=ei[u]).indexOf(",")&&(u=u.split(",")[0])),m=u in Wn)if(f||((g=t._gsap).renderTransform&&!e.parseTransform||ji(t,e.parseTransform),_=!1!==e.smoothOrigin&&g.smooth,(f=this._pt=new zn(this._pt,E,vi,0,1,g.renderTransform,g,0,-1)).dep=1),"scale"===u)this._pt=new zn(this._pt,g,"scaleY",g.scaleY,(v?v*a:a-g.scaleY)||0),P.push("scaleY",u),u+="X";else{if("transformOrigin"===u){x=void 0,y=void 0,C=void 0,y=(x=(w=o).split(" "))[0],C=x[1]||"50%","top"!==y&&"bottom"!==y&&"left"!==C&&"right"!==C||(w=y,y=C,C=w),x[0]=Li[y]||y,x[1]=Li[C]||C,o=x.join(" "),g.svg?Bi(t,o,0,_,0,this):((d=parseFloat(o.split(" ")[2])||0)!==g.zOrigin&&ki(this,g,"zOrigin",g.zOrigin,d),ki(this,E,u,Ni(s),Ni(o)));continue}if("svgOrigin"===u){Bi(t,o,1,_,0,this);continue}if(u in zi){$i(this,g,u,l,o,v);continue}if("smoothOrigin"===u){ki(this,g,"smooth",g.smooth,o);continue}if("force3D"===u){g[u]=o;continue}if("transform"===u){Zi(this,o,t);continue}}else u in E||(u=bi(u)||u);if(m||(a||0===a)&&(l||0===l)&&!ti.test(o)&&u in E)a||(a=0),(h=(s+"").substr((l+"").length))!==(d=Ee(o)||(u in Z.units?Z.units[u]:h))&&(l=Si(t,u,s,d)),this._pt=new zn(this._pt,m?g:E,u,l,v?v*a:a-l,m||"px"!==d&&"zIndex"!==u||!1===e.autoRound?ni:si),this._pt.u=d||0,h!==d&&"%"!==d&&(this._pt.b=s,this._pt.r=ri);else if(u in E)Ti.call(this,t,u,s,o);else{if(!(u in t)){Mt(u,o);continue}this.add(t,u,s||t[u],o,i,r)}P.push(u)}b&&Rn(this)},get:Ai,aliases:ei,getSetter:function(t,e,n){var i=ei[e];return i&&i.indexOf(",")<0&&(e=i),e in Wn&&e!==mi&&(t._gsap.x||Ai(t,"x"))?n&&qn===n?"scale"===e?ui:pi:(qn=n||{})&&("scale"===e?hi:di):t.style&&!pt(t.style[e])?li:~e.indexOf("-")?ci:kn(t,e)},core:{_removeProperty:Ei,_getMatrix:Fi}};Bn.utils.checkPrefix=bi,Qi=Ut("x,y,z,scale,scaleX,scaleY,xPercent,yPercent"+","+(Ji="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){Wn[t]=1})),Ut(Ji,(function(t){Z.units[t]="deg",zi[t]=1})),ei[Qi[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+Ji,Ut("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");ei[e[1]]=Qi[e[0]]})),Ut("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){Z.units[t]="px"})),Bn.registerPlugin(tr);var er=Bn.registerPlugin(tr)||Bn;er.core.Tween;const nr="#define GLSLIFY 1\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 modelMatrix;\n\nattribute vec3 aPosition;\n\nvoid main() {\n\n  gl_Position = projectionMatrix * viewMatrix *modelMatrix * vec4(aPosition, 1.0);\n}",ir="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 uResolution;\n\nuniform vec3 uColor;\nuniform float uBrightness;\n\nvoid main() {\n  gl_FragColor = vec4(uColor * uBrightness, 1.0);\n}";class rr extends f{constructor({position:t=[0,0,0],rotation:e=[0,0,0],scale:n=[1,1,1]}){super({position:t,scale:n,rotation:e}),this.type="cube",this.visible=!0,this.attributes.push(new v(new Float32Array([-.5,-.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5,.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5,.5,-.5]),3,"aPosition")),this.attributes.push(new v(new Float32Array([0,0,1,0,1,0,0,1,1,1,0,0,1,0,1,1,1,0,.5,1,1,1,.5,.1]),3,"aColor")),this.uniforms.uBrightness=new m([1],1,"float"),this.indices=new Uint8Array([0,2,1,1,2,3,3,2,6,3,6,7,5,4,6,5,6,7,5,4,0,5,0,1,5,1,3,5,3,7,0,4,6,0,6,2])}}const sr=new f({position:[0,-.5,0],scale:[1,1,1],rotation:[25,0,0]});sr.visible=!1;const or=new rr({position:[.4,-.6,0],scale:[.2,1.2,.2]}),ar=new f({position:[0,-.6,0],scale:[1,1,1],rotation:[-45,0,0]});ar.visible=!1;const lr=new rr({position:[0,-.4,0],scale:[.175,.8,.175]}),cr=new rr({position:[0,-.475,0],scale:[.2,.15,.2]});cr.userData.hoof=!0;const pr=new f({position:[0,-.5,0],scale:[1,1,1]});pr.visible=!1;const ur=new rr({position:[-.4,-.6,0],scale:[.2,1.2,.2]}),hr=new f({position:[0,-.6,0],scale:[1,1,1],rotation:[-12,0,0]});hr.visible=!1;const dr=new rr({position:[0,-.4,0],scale:[.175,.8,.175]}),vr=new rr({position:[0,-.475,0],scale:[.2,.15,.2]});vr.userData.hoof=!0,sr.add(or),or.add(ar),ar.add(lr),lr.add(cr),pr.add(ur),ur.add(hr),hr.add(dr),dr.add(vr);const mr=new f({position:[.3,-.2,.25],scale:[1,1,1],rotation:[-15,0,0]});mr.visible=!1;const fr=new rr({position:[0,0,0],scale:[.3,1,.8]}),gr=new rr({position:[0,-.85,-.1],scale:[.285,.7,.55]}),_r=new f({position:[0,-.35,-.1],scale:[1,1,1],rotation:[-5,0,0]});_r.visible=!1;const br=new rr({position:[0,-.325,0],scale:[.175,.65,.175]}),wr=new rr({position:[0,-.4,0],scale:[.2,.15,.2]});wr.userData.hoof=!0;const xr=new f({position:[-.3,-.2,.25],scale:[1,1,1],rotation:[-15,0,0]});xr.visible=!1;const yr=new rr({position:[0,0,0],scale:[.3,1,.8]}),Cr=new rr({position:[0,-.85,-.1],scale:[.285,.7,.55]}),Pr=new f({position:[0,-.35,-.1],scale:[1,1,1],rotation:[-5,0,0]});Pr.visible=!1;const Er=new rr({position:[0,-.325,0],scale:[.175,.65,.175]}),kr=new rr({position:[0,-.4,0],scale:[.2,.15,.2]});kr.userData.hoof=!0,wr.setColor(.1,.1,.1),kr.setColor(.1,.1,.1),cr.setColor(.1,.1,.1),vr.setColor(.1,.1,.1),mr.add(fr),fr.add(gr),gr.add(_r),_r.add(br),br.add(wr),xr.add(yr),yr.add(Cr),Cr.add(Pr),Pr.add(Er),Er.add(kr);const Mr=new rr({position:[0,2.7,-1],scale:[1.2,1.2,.75],rotation:[15,0,0]}),Sr=new rr({position:[0,.075,.85],scale:[.85,1,.95]}),Ar=new rr({position:[0,.1,1.075],scale:[.6,.75,1.2]}),Tr=new rr({position:[0,.15,-.475],scale:[.7,.7,.2]});Mr.add(Sr),Mr.add(Tr),Sr.add(Ar);const Lr=new f({position:[0,.6,-.2],scale:[1,1,1],rotation:[-5,0,0]});Lr.visible=!1;const Vr=new rr({position:[0,.2,0],scale:[.8,.6,.8]}),Dr=new rr({position:[0,.8,0],scale:[.75,1,.75]}),Rr=new f({position:[0,.5,0],scale:[1,1,1],rotation:[-12,0,0]});Rr.visible=!1;const zr=new rr({position:[0,.6,0],scale:[.6,1.2,.6]}),Or=new f({position:[0,.6,0],scale:[1,1,1],rotation:[-5,0,0]});Or.visible=!1;const Ir=new rr({position:[0,.5,0],scale:[.4,1,.4]});Lr.add(Vr),Vr.add(Dr),Dr.add(Rr),Rr.add(zr),zr.add(Or),Or.add(Ir);const Fr=new f({position:[0,.5,0],scale:[1,1,1],rotation:[0,0,0]}),Br=new f({position:[0,0,0],scale:[1,1,1],rotation:[-5,0,0]}),jr=new rr({position:[0,-.025,-.4],scale:[.2,.05,.4]}),Nr=new rr({position:[0,.2,0],scale:[.6,.4,.6]}),Ur=new rr({position:[0,-.1,-.45],scale:[.3,.2,.3]});Fr.add([Br,Nr]),Br.add(jr),Nr.add(Ur);const Kr=new f({rotation:[0,-90,0],position:[0,-.5,0],scale:[1.2,3.5,1]});let Gr=[],qr=[],Yr=[];for(let t=0;t<1500;t++){let e=1.2*Math.pow(Math.random(),2),n=Math.random()-.5,i=Math.random()-.5,r=Math.random();qr.push(r),Gr.push(e,n,i),Yr.push(t)}Kr.attributes.push(new v(Gr,3,"aPosition")),Kr.attributes.push(new v(Gr,1,"aOffset")),Kr.indices=new Uint8Array(Yr),Kr.setColor(1,.6196,.6196),Kr.visible=!0,Kr.transparent=!0,Kr.drawType="points",Kr.depthTest=!0;const Hr=new f({rotation:[0,0,0],position:[0,.375,.6],scale:[1,1,1]});Gr=[],qr=[],Yr=[];for(let t=0;t<1500;t++){let e=Math.pow(Math.random()-.5,5),n=Math.pow(Math.random()-.5,5),i=2*Math.random(),r=5*Math.random();qr.push(r),Gr.push(e,n,i),Yr.push(t)}Hr.attributes.push(new v(Gr,3,"aPosition")),Hr.attributes.push(new v(Gr,1,"aOffset")),Hr.indices=new Uint8Array(Yr),Hr.setColor(1,.6196,.6196),Hr.visible=!0,Hr.transparent=!0,Hr.drawType="points",Hr.depthTest=!0;const Wr=()=>90*Math.random()-45,$r=(t,e=0)=>{if(e>4)return;let[n,i,r]=t.getScale(),s=[.85*n,.95*i,.85*r],o=new f({position:[0,.5*i,0],scale:[1,1,1],rotation:[Wr(),Wr(),-25]}),a=new rr({position:[0,.5*s[1],0],scale:s}),l=new f({position:[0,.5*i,0],scale:[1,1,1],rotation:[Wr(),Wr(),25]}),c=new rr({position:[0,.5*s[1],0],scale:s});t.add([o,l]),o.add(a),l.add(c),a.userData.antler=!0,c.userData.antler=!0,$r(a,++e),$r(c,++e)},Xr=new f({position:[.15,.2,0],scale:[1,1,1],rotation:[15*Math.random()-7.5,15*Math.random()-7.5,-10]}),Zr=new f({position:[-.15,.2,0],scale:[1,1,1],rotation:[15*Math.random()-7.5,15*Math.random()-7.5,10]}),Jr=new rr({position:[0,.2,0],scale:[.1,.4,.1]});Jr.userData.antler=!0;const Qr=new rr({position:[0,.2,0],scale:[.1,.4,.1]});Qr.userData.antler=!0,$r(Jr),$r(Qr),Xr.add(Jr),Zr.add(Qr);const ts=new f({position:[0,.1,-.33],scale:[1,1,1]});ts.attributes.push(new v(new Float32Array([-.15,0,0,.15,0,0]),3,"aPosition")),ts.indices=new Uint8Array([0,1]),ts.setColor(.24,.55,.77),ts.visible=!0,ts.transparent=!0,ts.drawType="points",Mr.add([sr,pr,Lr]),Ar.add([mr,xr,Hr]),Ir.add(Fr),zr.add(Kr),Nr.add([Xr,Zr,ts]);const es=new f({position:[0,0,0],scale:[1,1,1]}),ns=new g({position:[0,0,12.5],scale:[25,50,0],rotation:[0,0,0]}),is=new g({position:[12.5,0,0],scale:[25,50,0],rotation:[0,90,0]}),rs=new g({position:[-12.5,0,0],scale:[25,50,0],rotation:[0,-90,0]}),ss=new g({position:[0,0,-12.5],scale:[25,50,0],rotation:[0,0,0]}),os=new g({position:[0,12.5,0],scale:[25,25,0],rotation:[90,0,0]});es.transparent=!0,es.add([ns,is,rs,ss,os]);const as=er.timeline(),ls=document.querySelector("#webgl"),cs=new class{constructor(n){null!==n?(n.width=window.innerWidth,n.height=window.innerHeight,this.gl=function(t,e,n){var i=r.setupWebGL(t,n);return i?((arguments.length<2||e)&&(i=s.makeDebugContext(i)),i):null}(n,!1,{alpha:!0,premultipliedAlpha:!0}),window.addEventListener("resize",(t=>{this.gl.canvas.width=t.target.innerWidth,this.gl.canvas.height=t.target.innerHeight,this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height)})),this.gl?(this.defaultProgram=o(this.gl,t,e),this.viewMatrixLocation=null,this.projectionMatrixLocation=null,this.resolutionLocation=null,this.gl.clearColor(0,0,0,1),this.gl.enable(this.gl.DEPTH_TEST),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.clear()):console.warn("Could not get the webGL context!")):console.warn("Could not find the canvas element!")}clear(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}setClearColor(t,e,n,i){"object"==typeof t?this.gl.clearColor(t):this.gl.clearColor(t,e,n,i)}renderObject(n,i){if(0==n.depthTest&&this.gl.disable(this.gl.DEPTH_TEST),n.autoUpdateMatrix&&n.recalculateMatrix(),1==n.transparent?this.gl.depthMask(!1):this.gl.depthMask(!0),!1===n.visible)return;n.program||n.setShaderProgram(this.gl,t,e),this.gl.useProgram(n.program),this.gl.program=n.program,n.uniforms.viewMatrix.value.set(i.viewMatrix.elements),n.uniforms.projectionMatrix.value.set(i.projectionMatrix.elements),n.uniforms.uResolution.value.set([this.gl.canvas.width,this.gl.canvas.height]);let r=this.gl.DYNAMIC_DRAW;var s=this.gl.TRIANGLES;switch(n.drawMode){case"static":r=this.gl.STATIC_DRAW;break;case"stream":r=this.gl.STREAM_DRAW;break;default:r=this.gl.DYNAMIC_DRAW}switch(n.drawType){case"triangles":s=this.gl.TRIANGLES;break;case"triangle_fan":s=this.gl.TRIANGLE_FAN;break;case"triangle_strip":s=this.gl.TRIANGLE_STRIP;break;case"lines":s=this.gl.LINES;break;case"lines_strip":s=this.gl.LINE_STRIP;break;case"lines_loop":s=this.gl.LINE_LOOP;break;default:s=this.gl.POINTS}for(let t of n.attributes){let e=!1;null===t.buffer&&(t.buffer=this.gl.createBuffer(),e=!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,t.value,r),null===t.location&&(t.location=this.gl.getAttribLocation(this.gl.program,t.name));const n=t.location;-1!==n&&(this.gl.vertexAttribPointer(n,t.countPerVertex,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(n))}const o=n.uniforms;for(let t in o){null===o[t].location&&(o[t].location=this.gl.getUniformLocation(this.gl.program,t));let e=o[t].location;switch(o[t].type){case"float":this.gl.uniform1f(e,...o[t].value);break;case"vec2":this.gl.uniform2f(e,...o[t].value);break;case"vec3":this.gl.uniform3f(e,...o[t].value);break;case"vec4":this.gl.uniform4f(e,...o[t].value);break;case"mat3":this.gl.uniformMatrix3fv(e,!1,o[t].value);break;case"mat4":this.gl.uniformMatrix4fv(e,!1,o[t].value);break;default:console.warn(`There was an error in the typing of your uniform ${t}`)}}if(n.indexBuffer||(n.indexBuffer=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,n.indexBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,n.indices,this.gl.DYNAMIC_DRAW),"cube"===n.type){let t=o.uBrightness.location,e=1;for(let i=0;i<n.indices.length;i+=6)this.gl.drawElements(s,6,this.gl.UNSIGNED_BYTE,i),this.gl.uniform1f(t,e),e-=.1}else this.gl.drawElements(s,n.indices.length,this.gl.UNSIGNED_BYTE,0);this.gl.enable(this.gl.DEPTH_TEST)}render(t,e){this.clear();let n=[],i=[],r=[];t.traverse((t=>{0!=t.depthTest?1!=t.transparent?i.push(t):r.push(t):n.push(t)}));for(let t of n)this.renderObject(t,e);for(let t of i)this.renderObject(t,e);for(let t of r)this.renderObject(t,e)}}(ls),ps=new class extends f{constructor({position:t,target:e=[0,0,0],fov:n=75,near:i=.01,far:r=20}){super({position:t}),window.addEventListener("resize",(t=>{this.aspect=t.target.innerWidth/t.target.innerHeight,this.calculateViewProjection()})),this.type="camera",this.aspect=window.innerWidth/window.innerHeight,this.fov=n,this.near=i,this.far=r,this.viewMatrix=new p,this.projectionMatrix=new p,this.target=new l(e),this.calculateViewProjection()}calculateViewProjection(){this.viewMatrix.setLookAt(...this.position.elements,...this.target.elements,...this.up.elements),this.projectionMatrix.setPerspective(this.fov,this.aspect,this.near,this.far)}}({position:[0,5.5,-10],far:40,target:[0,3.5,0]}),us=new class extends f{constructor({position:t,rotation:e}){super({position:t,scale:[1,1,1],rotation:e}),this.type="scene",this.autoUpdateMatrix=!0,this.visible=!1}}({position:[0,0,0],rotation:[0,-70,0]}),hs=new g({position:[0,0,0],scale:[25,25,0],widthSegments:1,heightSegments:1,rotation:[90,0,0]});hs.transparent=!0,hs.setShaderProgram(cs.gl,"#define GLSLIFY 1\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 modelMatrix;\n\nattribute vec3 aPosition;\n\nvarying vec3 vCoord;\n\nvoid main() {\n  gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(aPosition, 1.0);\n  vCoord = (modelMatrix * vec4(aPosition, 1.0)).xyz;\n}","precision mediump float;\n#define GLSLIFY 1\n\nuniform float uTime;\nuniform vec2 uResolution;\n\nvarying vec3 vCoord;\n\nvoid main() {\n  float d = length(vCoord.xz) / 25.0;\n  float strength1 = smoothstep(0.3,0.45,pow(1.0 - d, 5.0 + cos(uTime * 10.0) * 0.3));\n  float strength2 = smoothstep(0.3,0.6,pow(1.0 - d, 5.0 + sin(uTime * 10.0) * 0.3));\n\n  vec3 color = vec3(strength2) + vec3(0.7373, 0.7843, 1.0) * strength1;\n\n  gl_FragColor = vec4(color, strength1);\n}"),Kr.setShaderProgram(cs.gl,"#define GLSLIFY 1\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 modelMatrix;\n\nuniform float uTime;\n\nattribute vec3 aPosition;\nattribute float aOffset;\n\nvarying float fade;\n\nvoid main() {\n  vec3 pos = aPosition;\n  \n  float offset = mod(uTime * aOffset * 2.0, 1.2);\n\n  pos.x = aPosition.x + offset;\n  float diff = abs(aPosition.x - pos.x);\n  pos.y = aPosition.y + pow(diff, 0.5) * 0.15 + abs(sin(pos.x * 5.0)) * 0.05;\n  pos.z = aPosition.z / (clamp(diff, 0.2,1.0) * 10.0);\n\n  gl_PointSize = 60.0 * (1.2 - pos.x);\n  gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(pos, 1.0);\n\n  fade = clamp(gl_PointSize - 10.0 * aOffset - 2.0, 0.0, 1.0);\n}","precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 uResolution;\n//uniform float uTime;\nuniform vec3 uColor;\n\nvarying float fade;\n\nvoid main() {\n  float d = min(distance(gl_PointCoord, vec2(0.5)) * 2.0, 1.0);\n  \n  float strength = 1.0 - d;\n  strength = pow(strength, 5.0);\n\n  float opacity = smoothstep(0.2, 0.9, strength);\n\n  vec3 color = uColor * opacity;\n\n  gl_FragColor = vec4(color, opacity * fade);\n}"),Hr.setShaderProgram(cs.gl,"#define GLSLIFY 1\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 modelMatrix;\n\nuniform float uTime;\n\nattribute vec3 aPosition;\nattribute float aOffset;\n\nvarying float fade;\n\n#define PI 3.14159\n\nvoid main() {\n  vec3 pos = aPosition;\n\n  pos.z = mod(aPosition.z * aOffset + uTime, 1.5);\n\n  float radius = 15.0 * exp(-0.95 * pos.z) * sin(PI * 0.1 * pos.z);\n\n  pos.x = cos(uTime * aOffset) * radius * 0.2;\n  pos.y = sin(uTime * aOffset) * radius * 0.2 + pow(pos.z, 3.0);\n\n  gl_PointSize = 35.0 * (2.0 - pos.y);\n  gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(pos, 1.0);\n\n  fade = min(gl_PointSize - 2.0, 1.0);\n}","precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 uResolution;\n//uniform float uTime;\nuniform vec3 uColor;\n\nvarying float fade;\n\nvoid main() {\n  float d = min(distance(gl_PointCoord, vec2(0.5)) * 2.0, 1.0);\n  \n  float strength = 1.0 - d;\n  strength = pow(strength, 5.0);\n\n  float opacity = smoothstep(0.3, 0.9, strength);\n\n  vec3 color = uColor * opacity;\n\n  gl_FragColor = vec4(color, opacity * fade);\n}"),ts.setShaderProgram(cs.gl,"precision mediump float;\n#define GLSLIFY 1\n\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 modelMatrix;\n\nuniform float uTime;\n\nattribute vec3 aPosition;\n\nvoid main() {\n  vec3 pos = aPosition;\n\n  gl_PointSize = 30.0 + sin(uTime * 3.0) * 15.0;\n  gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(aPosition, 1.0);\n}","precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 uResolution;\nuniform float uTime;\nuniform vec3 uColor;\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\nvoid main() {\n  float d = min(distance(gl_PointCoord, vec2(0.5)) * 2.0, 1.0);\n  \n  float strength = 1.0 - d;\n\n  float opacity = smoothstep(0.2, 0.9, strength);\n\n  vec3 color = uColor * opacity;\n\n  gl_FragColor = vec4(color, opacity);\n}"),Mr.traverse((t=>{"cube"===t.type&&(t.userData.hoof?(t.setShaderProgram(cs.gl,nr,ir),t.setColor(.1,.1,.1)):t.userData.antler?(t.setShaderProgram(cs.gl,nr,ir),t.setColor(.1647,.2353,.4078)):(t.setShaderProgram(cs.gl,"#define GLSLIFY 1\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 modelMatrix;\n\nattribute vec3 aPosition;\nattribute vec3 aColor;\n\nvarying vec3 vCoord;\n\nvoid main() {\n\n  gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(aPosition, 1.0);\n  vCoord = gl_Position.xyz;\n}","precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 uResolution;\nuniform vec3 uColor;\nuniform float uTime;\nuniform float uBrightness;\n\nvarying vec3 vCoord;\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nfloat mod289(float x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nfloat permute(float x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat taylorInvSqrt(float r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 grad4(float j, vec4 ip)\n  {\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;\n\n  return p;\n  }\n\n// (sqrt(5) - 1)/4 = F4, used once below\n#define F4 0.309016994374947451\n\nfloat snoise(vec4 v)\n  {\n  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\n                        0.276393202250021,  // 2 * G4\n                        0.414589803375032,  // 3 * G4\n                       -0.447213595499958); // -1 + 4 * G4\n\n// First corner\n  vec4 i  = floor(v + dot(v, vec4(F4)) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n// Other corners\n\n// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n//  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C.xxxx\n  //  x1 = x0 - i1  + 1.0 * C.xxxx\n  //  x2 = x0 - i2  + 2.0 * C.xxxx\n  //  x3 = x0 - i3  + 3.0 * C.xxxx\n  //  x4 = x0 - 1.0 + 4.0 * C.xxxx\n  vec4 x1 = x0 - i1 + C.xxxx;\n  vec4 x2 = x0 - i2 + C.yyyy;\n  vec4 x3 = x0 - i3 + C.zzzz;\n  vec4 x4 = x0 + C.wwww;\n\n// Permutations\n  i = mod289(i);\n  float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute( permute( permute( permute (\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n\n// Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\n// 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0 = grad4(j0,   ip);\n  vec4 p1 = grad4(j1.x, ip);\n  vec4 p2 = grad4(j1.y, ip);\n  vec4 p3 = grad4(j1.z, ip);\n  vec4 p4 = grad4(j1.w, ip);\n\n// Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt(dot(p4,p4));\n\n// Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n  }\n\nvoid main() {\n  vec2 st = vCoord.xy / uResolution;\n\n  vec3 color1 = vec3(0.1647, 0.2353, 0.4078);\n  vec3 color2 = vec3(0.749, 0.8196, 1.0);\n\n  float strength = clamp(snoise(vec4(vCoord.xzy * 2.0, uTime)), 0.0, 1.0);\n  float ring = smoothstep(0.3, 1.0, strength) - smoothstep(0.7, 1.0, strength);\n\n  vec3 color = ring * color1 + (1.0 - ring) * uColor;\n\n  color *= uBrightness;\n\n  gl_FragColor = vec4(color, 1.0);\n}"),t.setColor(.749,.8196,1)))})),es.traverse((t=>{"plane"===t.type&&(t.setShaderProgram(cs.gl,"#define GLSLIFY 1\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 modelMatrix;\n\nattribute vec3 aPosition;\n\nvarying vec3 vCoord;\n\nvoid main() {\n\n  gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(aPosition, 1.0);\n  vCoord = gl_Position.xyz;\n}",'precision mediump float;\n#define GLSLIFY 1\n\nuniform float uTime;\nuniform vec3 uColor;\nuniform vec3 uColor2;\nuniform vec3 uColor3;\nuniform vec3 uColor4;\nuniform vec2 uResolution;\nuniform float uRotation;\n\nvarying vec3 vCoord;\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289_1(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289_1(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute_1(vec4 x) {\n     return mod289_1(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt_1(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289_1(i);\n  vec4 p = permute_1( permute_1( permute_1(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt_1(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\n//\n// GLSL textureless classic 3D noise "cnoise",\n// with an RSL-style periodic variant "pnoise".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-10-11\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289_0(vec3 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289_0(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute_0(vec4 x)\n{\n  return mod289_0(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt_0(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec3 fade(vec3 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise\nfloat cnoise(vec3 P)\n{\n  vec3 Pi0 = floor(P); // Integer part for indexing\n  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n  Pi0 = mod289_0(Pi0);\n  Pi1 = mod289_0(Pi1);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute_0(permute_0(ix) + iy);\n  vec4 ixy0 = permute_0(ixy + iz0);\n  vec4 ixy1 = permute_0(ixy + iz1);\n\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt_0(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt_0(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\n#define PI 3.14159\n\nfloat cone(vec2 uv, float thinness){\n  float strength = 1.0 - abs(uv.x * uv.y * thinness);\n  return clamp(strength, 0.0, 1.0);\n}\n\nmat2 rot(float a) {\n  float s=sin(a), c=cos(a);\n\n  return mat2(c, -s, s, c);\n}\n\nvec2 rotatedUv(vec2 uv, float a) {\n  float s=sin(a), c=cos(a);\n  vec3 hUv = vec3(uv,1);\n\n  mat3 rotM = mat3(c, 0, s, 0, 1, 0, -s, 0, c);\n\n  hUv *= rotM;\n\n  return uv.xy;\n}\n\nfloat hash2_1(vec2 p) {\n  p = fract(p * vec2(345.12, 684.14));\n  p += dot(p, p + 69.0);\n\n  return fract(p.x*p.y);\n}\n\nfloat star(vec2 uv, float flare) {\n  float d = length(uv);\n\n  float brightness = pow(0.01/d, 2.0);\n  float rays = max(0.0, 1.0 - abs(uv.x * uv.y * 1000.0));\n  brightness += rays*flare;\n\n  uv *= rot(PI * 0.25);\n\n  rays = max(0.0, 1.0 - abs(uv.x * uv.y * 1000.0));\n  brightness += rays*0.3*flare;\n\n  brightness *= smoothstep(0.7, 0.8, 1.0 - d);\n  \n  return brightness;\n}\n\nvec3 starLayer(vec2 uv, vec3 _color) {\n  vec3 outputColor = vec3(0.0);\n\n  vec2 grid = fract(uv) - 0.5;\n  vec2 id = floor(uv);\n\n  for (float x = -1.0; x <= 1.0; x++) {\n    for (float y = -1.0; y <= 1.0; y++) {\n      vec2 offset = vec2(x,y);\n      float n = hash2_1(id + offset);\n\n      float size = fract(n*69.0);\n      float flare = max(0.0, smoothstep(0.9, 1.0, size) - 0.5);\n      float star = star(grid - offset - vec2(n, fract(n*8008.5)) + 0.5, 0.0);\n\n      outputColor += star * size * _color;\n    }\n  }\n\n  return outputColor;\n}\n\nvoid main() {\n  vec2 uv = (gl_FragCoord.xy - 0.5 * uResolution) / uResolution.xy;\n  \n  uv.y = (uv.y + 0.5) * 0.5;\n  uv.x += uRotation;\n\n  float noise = clamp(snoise(vec3(uv * 1.0, uTime * 0.02)), 0.0, 1.0);\n\n  float antiNoise = 1.0 - abs(noise);\n  antiNoise = smoothstep(0.0, 0.9,pow(antiNoise, 5.0));\n  \n  float distort = cnoise(vec3(uv * 2.0, uTime * 0.05));\n\n  float shadow = smoothstep(0.1, 0.7, uv.y);\n\n  vec3 color = uColor * shadow;\n\n  vec3 stars = starLayer(uv * 100.0, uColor3) * smoothstep(.05,.5,noise) * shadow;\n  stars += starLayer(uv * 40.0, uColor3) * smoothstep(0.5, 1.0, noise) * shadow;\n\n  stars += starLayer(uv * 100.0, vec3(0.7,0.65,1.0)) * smoothstep(0.05, 0.5, antiNoise) * shadow;\n  \n  vec3 clouds = uColor2 * smoothstep(0.0, 0.9, noise) * shadow;\n  clouds += uColor4 * smoothstep(0.0, 0.9, antiNoise) * shadow;\n  stars += clouds;\n\n  color += abs(stars);\n\n  gl_FragColor = vec4(color,1.0);\n}'),t.uniforms.uColor.value.set([0,.0353,.0588]),t.uniforms.uColor2=new m([0,.08235,.1412],3,"vec3"),t.uniforms.uColor3=new m([1,.6196,.6196],3,"vec3"),t.uniforms.uColor4=new m([0,.0549,.1412],3,"vec3"),t.uniforms.uRotation=new m([0],1,"float"))})),us.add([hs,es,Mr]);const ds=new class{constructor(t=0){this.stats=new(b()),this.stats.showPanel(t),document.body.appendChild(this.stats.dom),this.begin=this.stats.begin,this.end=this.stats.end}}(0),vs=new w.Pane({title:"Config",expanded:!0}),ms={animations:!0},fs={position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},gs={legRotation:{x:0,y:0,z:0},kneeRotation:{x:0,y:0,z:0}},_s=vs.addFolder({title:"Scene"}),bs=vs.addFolder({title:"Cube"}),ws=vs.addFolder({title:"Right Leg"});_s.addInput(ms,"animations").on("change",(t=>{1==t.value?as.resume():as.pause()})),bs.addInput(fs,"position").on("change",(t=>{let{x:e,y:n,z:i}=t.value;Mr.setPosition(e,n,i)})),bs.addInput(fs,"rotation").on("change",(t=>{let{x:e,y:n,z:i}=t.value;Mr.setRotation(e,n,i)})),ws.addInput(gs,"legRotation").on("change",(t=>{let{x:e,y:n,z:i}=t.value;rightLegJoint.setRotation(e,n,i)})),ws.addInput(gs,"kneeRotation").on("change",(t=>{let{x:e,y:n,z:i}=t.value;rightKnee.setRotation(e,n,i)})),ls.onclick=()=>{};const xs=new Date,ys=()=>{ds.begin(),ms.animations&&(Mr.traverse((t=>{"cube"!==t.type||t.userData.hoof||(t.uniforms.uTime.value[0]=xs.getTime()/1e4%1e3)})),es.traverse((t=>{"plane"===t.type&&(t.uniforms.uTime.value[0]=xs.getTime()/500%1e3)})),Kr.uniforms.uTime.value[0]=xs.getTime()/1e4%1e3,Hr.uniforms.uTime.value[0]=xs.getTime()/1e4%1e3,ts.uniforms.uTime.value[0]=xs.getTime()/1e4%1e3,hs.uniforms.uTime.value[0]=xs.getTime()/1e4%1e3),cs.render(us,ps);let[,t]=us.getRotation();es.traverse((e=>{e.uniforms.uRotation&&e.uniforms.uRotation.value&&(e.uniforms.uRotation.value[0]=Math.PI*t/180)})),xs.setTime(Date.now()),ds.end(),requestAnimationFrame(ys)},Cs={x:0,y:0};ls.onmousedown=t=>{Cs.x=t.clientX,Cs.y=t.clientY},ls.onmousemove=t=>{if(1!==t.buttons)return;let[e,n,i]=us.getRotation(),r=(Cs.x-t.clientX)/10,s=(Cs.y-t.clientY)/10;us.setRotation(e+s,n-r,i),Cs.x=t.clientX,Cs.y=t.clientY},(t=>{const e={leftKnee:-45,leftLegJoint:25,neckJoint:-5,neckJoint1:-12};t.to(e,{leftLegJoint:30,ease:Hn.easeInOut,duration:3,repeat:-1,yoyo:!0,onUpdate:()=>{sr.setRotation(e.leftLegJoint,0,0)}}),t.to(e,{leftKnee:-30,delay:-2,ease:Hn.easeInOut,duration:3,repeat:-1,yoyo:!0,onUpdate:()=>{ar.setRotation(e.leftKnee,0,0)}}),t.to(e,{neckJoint:-8,ease:Hn.easeInOut,delay:-3,duration:5,repeat:-1,yoyo:!0,onUpdate:()=>{Lr.setRotation(e.neckJoint,0,0)}}),t.to(e,{neckJoint1:-15,ease:Hn.easeInOut,delay:-2,duration:5,repeat:-1,yoyo:!0,onUpdate:()=>{Rr.setRotation(e.neckJoint1,0,0)}})})(as),ys(),document.querySelector(".name").classList.add("in"),document.querySelector(".drag-tip").classList.add("in")})()})();